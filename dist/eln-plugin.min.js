(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.elnPlugin=e()}})(function(){var e=Math.ceil,t=Math.round,n=Number.isInteger,o=Math.sin,u=Math.max,_=Math.sqrt,s=Number.MAX_VALUE,a=Number.MIN_VALUE,r=Math.log,p=Math.floor,f=Math.pow,l=String.fromCharCode,C=Math.min,d=Math.exp,S=Math.abs,i,c,m;return function(){function s(l,e,n){function t(d,i){if(!e[d]){if(!l[d]){var r="function"==typeof require&&require;if(!i&&r)return r(d,!0);if(o)return o(d,!0);var u=new Error("Cannot find module '"+d+"'");throw u.code="MODULE_NOT_FOUND",u}var a=e[d]={exports:{}};l[d][0].call(a.exports,function(e){var i=l[d][1][e];return t(i||e)},a,a.exports,s,l,e,n)}return e[d].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)t(n[a]);return t}return s}()({1:[function(e,t,n){"use strict";function o(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var n=i===t?0:4-i%4;return[i,n]}function s(e,t,i){return 3*(t+i)/4-i}function a(e){return l[63&e>>18]+l[63&e>>12]+l[63&e>>6]+l[63&e]}function r(e,t,n){for(var o=[],s=t,i;s<n;s+=3)i=(16711680&e[s]<<16)+(65280&e[s+1]<<8)+(255&e[s+2]),o.push(a(i));return o.join("")}n.byteLength=function(e){var t=o(e),i=t[0],n=t[1];return 3*(i+n)/4-n},n.toByteArray=function(e){for(var t=o(e),n=t[0],a=t[1],r=new u(s(e,n,a)),l=0,p=0<a?n-4:n,c=0,i;c<p;c+=4)i=d[e.charCodeAt(c)]<<18|d[e.charCodeAt(c+1)]<<12|d[e.charCodeAt(c+2)]<<6|d[e.charCodeAt(c+3)],r[l++]=255&i>>16,r[l++]=255&i>>8,r[l++]=255&i;return 2===a&&(i=d[e.charCodeAt(c)]<<2|d[e.charCodeAt(c+1)]>>4,r[l++]=255&i),1===a&&(i=d[e.charCodeAt(c)]<<10|d[e.charCodeAt(c+1)]<<4|d[e.charCodeAt(c+2)]>>2,r[l++]=255&i>>8,r[l++]=255&i),r},n.fromByteArray=function(e){for(var t=e.length,n=t%3,o=[],s=16383,a=0,i=t-n,d;a<i;a+=s)o.push(r(e,a,a+s>i?i:a+s));return 1==n?(d=e[t-1],o.push(l[d>>2]+l[63&d<<4]+"==")):2==n&&(d=(e[t-2]<<8)+e[t-1],o.push(l[d>>10]+l[63&d>>4]+l[63&d<<2]+"=")),o.join("")};for(var l=[],d=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,i=p.length;c<i;++c)l[c]=p[c],d[p.charCodeAt(c)]=c;d[45]=62,d[95]=63},{}],2:[function(e,t){"use strict";t.exports=function(e,t,i,n,o){var s,a;if(void 0===n)n=0;else if(n|=0,0>n||n>=e.length)throw new RangeError("invalid lower bound");if(void 0===o)o=e.length-1;else if(o|=0,o<n||o>=e.length)throw new RangeError("invalid upper bound");for(;n<=o;)if(s=n+(o-n>>1),a=+i(e[s],t,s,e),0>a)n=s+1;else if(0<a)o=s-1;else return s;return~n}},{}],3:[function(e,t){"use strict";function n(e,t){t=t||{};var n=new Date,a;if(e.ser||e["2rr"])a=s(e,t);else if(e["1r"]||e["1i"]||e.fid)a=o(e,t);else throw new RangeError("The current files are invalid");a.twoD&&!t.noContours&&(u(a),a.profiling&&a.profiling.push({action:"Finished countour plot calculation",time:new Date-n}),!t.keepSpectra&&delete a.spectra);var r=a.spectra;if(t.xy&&0<r.length)for(var l=0,i;l<r.length;l++)if(i=r[l],0<i.data.length)for(var d=0;d<i.data.length;d++){for(var p=i.data[d],c={x:Array(p.length/2),y:Array(p.length/2)},m=0;m<p.length;m+=2)c.x[m/2]=p[m],c.y[m/2]=p[m+1];i.data[d]=c}return a}function o(e,t){for(var n=r(e.procs,t),o=r(e.acqus,t),s=Object.keys(o.info),d=0,i;d<s.length;d++)i=s[d],void 0===n.info[i]&&(n.info[i]=o.info[i]);return e["1r"]||e["1i"]?(e["1r"]&&a(e["1r"],n,"1r",!0),e["1i"]&&a(e["1i"],n,"1i",!1)):e.fid&&l(e.fid,n),n}function s(e,t){var n,o,s;if(e["2rr"]){for(var d=r(e.procs,t),u=r(e.acqus,t),p=Object.keys(u.info),c=0,i;c<p.length;c++)i=p[c],void 0===d.info[i]&&(d.info[i]=u.info[i]);u=r(e.proc2s,t),d.info.nbSubSpectra=u.info.$SI=parseInt(u.info.$SI),n=u.info.$SF=parseFloat(u.info.$SF),o=u.info.$SWP=parseFloat(u.info.$SWP),s=u.info.$OFFSET=parseFloat(u.info.$OFFSET)}else e.ser&&(d=r(e.acqus,t),u=r(e.acqu2s,t),d.info.nbSubSpectra=u.info.$SI=parseInt(u.info.$TD),d.info.$SI=parseInt(d.info.$TD),o=u.info.$SW,d.info.$SWP=d.info.$SWH,d.info.$SF=parseFloat(u.info.$SFO1),d.info.$OFFSET=0,n=u.info.$SFO1=parseFloat(u.info.$SFO1),n=1,s=0,d.info.$AXNUC=d.info.$NUC1,u.info.$AXNUC=u.info.$NUC1);d.info.firstY=s,d.info.lastY=s-o/n,d.info.$BF2=n,d.info.$SFO1=n;var m=d.info.nbSubSpectra,h=d.info.firstY,g=(d.info.lastY-d.info.firstY)/(m-1);e["2rr"]?a(e["2rr"],d,"2rr",!0):e.ser&&l(e.ser,d,"ser",!0);for(var c=0;c<m;c++)h+=g,d.spectra[c].pageValue=h;e.ser?"TYPE_2DNMR_FID":"TYPE_2DNMR_SPECTRUM";return d.info["2D_Y_NUCLEUS"]=u.info.$AXNUC,d.info["2D_X_NUCLEUS"]=d.info.$AXNUC,d.info["2D_Y_FRECUENCY"]=n,d.info["2D_Y_OFFSET"]=s,d.info["2D_X_FRECUENCY"]=d.info.$SF,d.info["2D_X_OFFSET"]=d.info.$OFFSET,d.twoD=!0,d}function a(e,t,n,o){var s=t.info.$SI=parseInt(t.info.$SI),a=parseFloat(t.info.$SWP),r=parseFloat(t.info.$SF),l=r,d=t.shiftOffsetVal;t.info.observeFrequency=r,t.info.$BF1=l,t.info.$SFO1=r,t.info.brukerReference=l;var u=parseInt(t.info.$BYTORDP);u=u?0:1;var p=t.info.nbSubSpectra?t.info.nbSubSpectra:1;u?e.setLittleEndian():e.setBigEndian();for(var c=0;c<p;c++){var i={dataType:"NMR Spectrum",dataTable:"(X++(R..R))",nbPoints:s,firstX:d,lastX:d-a/r,xUnit:"PPM",yUnit:"Arbitrary",data:[Array(2*s)],isXYdata:!0,observeFrequency:r,title:t.info.TITLE,deltaX:-(a/r)/(s-1)},m=d,h=i.deltaX;if(o)for(var g=0;g<s;++g)i.data[0][2*g]=m,i.data[0][2*g+1]=e.readInt32(),(null===i.data[0][2*g+1]||isNaN(i.data[0][2*g+1]))&&(i.data[0][2*g+1]=0),m+=h;else for(g=s-1;0<=g;--g)i.data[0][2*g]=m,i.data[0][2*g+1]=e.readInt32(),(null===i.data[0][2*g+1]||isNaN(i.data[0][2*g+1]))&&(i.data[0][2*g+1]=0),m+=h;t.spectra.push(i)}}function r(e,t){var i=/.*/;return t.keepRecordsRegExp&&(i=t.keepRecordsRegExp),c.convert(e,{keepRecordsRegExp:i})}function l(e,t){var n=t.info.$TD=parseInt(t.info.$TD),o=t.info.$SWH=parseFloat(t.info.$SWH),s=t.info.$SW=parseFloat(t.info.$SW),a=t.info.$SFO1=parseFloat(t.info.$SFO1),r=parseFloat(t.info.$BF1);t.info.$BF1=r;var l=s,d=l/(n-1),u=parseInt(t.info.$BYTORDP);u=u?0:1,u?e.setLittleEndian():e.setBigEndian();var p=t.info.nbSubSpectra?t.info.nbSubSpectra:1;t.spectra=Array(p);for(var c=0,m;c<p/2;c++){m={dataType:"NMR FID",dataTable:"(X++(R..R))",nbPoints:n,firstX:0,lastX:l,nucleus:t.info.$NUC1?t.info.$NUC1:void 0,xUnit:"Sec",yUnit:"Arbitrary",data:[Array(2*n)],isXYdata:!0,observeFrequency:a,title:t.info.TITLE,deltaX:d},t.spectra[2*c]=m,m={dataType:"NMR FID",dataTable:"(X++(I..I))",nbPoints:n,firstX:0,lastX:l,nucleus:t.info.$NUC1?t.info.$NUC1:void 0,xUnit:"Sec",yUnit:"Arbitrary",data:[Array(2*n)],isXYdata:!0,observeFrequency:a,title:t.info.TITLE,deltaX:d},t.spectra[2*c+1]=m;for(var h=0,g=0,i;e.available(8)&&g<n;g++,h=g*d)i=e.readInt32(),(null===i||isNaN(i))&&(i=0),t.spectra[2*c].data[0][2*g+1]=i,t.spectra[2*c].data[0][2*g]=h,i=e.readInt32(),(null===i||isNaN(i))&&(i=0),t.spectra[2*c+1].data[0][2*g+1]=i,t.spectra[2*c+1].data[0][2*g]=h;for(;g<n;g++,h=g*d)t.spectra[2*c].data[0][2*g+1]=0,t.spectra[2*c].data[0][2*g]=h,t.spectra[2*c+1].data[0][2*g+1]=0,t.spectra[2*c+1].data[0][2*g]=h}}function i(e){for(var t=0,n=e[0].data[0][0],o=n,s=e.length,a=e[0].data[0].length/2,r=Array(s),l=0;l<s;l++){r[l]=Array(a);for(var i=0;i<a;i++)r[l][i]=e[l].data[0][2*i+1],r[l][i]<n&&(n=e[l].data[0][2*i+1]),r[l][i]>o&&(o=e[l].data[0][2*i+1]),0!==l&&0!==i&&(t+=S(r[l][i]-r[l][i-1])+S(r[l][i]-r[l-1][i]))}return{z:r,minX:e[0].data[0][0],maxX:e[0].data[0][e[0].data[0].length-2],minY:e[0].pageValue,maxY:e[s-1].pageValue,minZ:n,maxZ:o,noise:t/(2*((s-1)*(a-1)))}}function u(e){var t=i(e.spectra);e.contourLines=p(t),delete t.z,e.minMax=t}function p(e){for(var t=e.noise,n=e.z,o=[],s=7,a=new Float32Array(4),r=[],l=n.length,u=n[0].length,p=e.minX,c=e.maxX,m=(c-p)/(u-1),h=e.minY,g=e.maxY,f=(g-h)/(l-1),y=e.minZ,x=e.maxZ,b=0,_,C,k,w,j,v;b<2*s;b++){v={},o.push(v);var S=b%2;j=0==S?(x-5*t)*d(b/2-s)+5*t:-(x-5*t)*d(b/2-s)-5*t;var E=[];if(v.zValue=j,v.lines=E,!(j<=y||j>=x))for(var D=0;D<l-1;D++)for(var H=0;H<u-1;H++){a[0]=n[D][H],a[1]=n[D][H+1],a[2]=n[D+1][H],a[3]=n[D+1][H+1];for(var P=0;4>P;P++)r[P]=a[P]>j;r[0]!==r[1]&&r[0]!==r[2]&&(_=H+(j-a[0])/(a[1]-a[0]),C=D,k=H,w=D+(j-a[0])/(a[2]-a[0]),E.push(_*m+p,C*f+h,k*m+p,w*f+h)),r[3]!==r[1]&&r[3]!==r[2]&&(_=H+1,C=D+1-(j-a[3])/(a[1]-a[3]),k=H+1-(j-a[3])/(a[2]-a[3]),w=D+1,E.push(_*m+p,C*f+h,k*m+p,w*f+h)),r[1]!==r[2]&&(_=H+1-(j-a[1])/(a[2]-a[1]),C=D+(j-a[1])/(a[2]-a[1]),r[1]!==r[0]&&(k=H+1-(j-a[1])/(a[0]-a[1]),w=D,E.push(_*m+p,C*f+h,k*m+p,w*f+h)),r[2]!==r[0]&&(k=H,w=D+1-(j-a[2])/(a[0]-a[2]),E.push(_*m+p,C*f+h,k*m+p,w*f+h)),r[1]!==r[3]&&(k=H+1,w=D+(j-a[1])/(a[3]-a[1]),E.push(_*m+p,C*f+h,k*m+p,w*f+h)),r[2]!==r[3]&&(k=H+(j-a[2])/(a[3]-a[2]),w=D+1,E.push(_*m+p,C*f+h,k*m+p,w*f+h)))}}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:o}}var c=e("jcampconverter"),m=e("iobuffer"),h=e("jszip"),g=1,f=2;t.exports={convertZip:function(e,t){t=t||{};var o=new h;o.load(e,t);for(var s={ser:g,fid:g,acqus:f,acqu2s:f,procs:f,proc2s:f,"1r":g,"1i":g,"2rr":g},a=o.filter(function(e){return 0<=e.indexOf("ser")||0<=e.indexOf("fid")||0<=e.indexOf("1r")||0<=e.indexOf("2rr")}),r=Array(a.length),l=0;l<a.length;++l){var i=a[l].name.length,d=a[l].name;d=d.substr(0,d.lastIndexOf("/")+1);var u=o.folder(d),p=u.filter(function(e){return!!s[e]}),c={};0<=d.indexOf("pdata")&&(c.acqus=o.file(d.replace(/pdata\/[0-9]\//,"acqus")).asText());for(var y=0;y<p.length;++y){var x=p[y].name.lastIndexOf("/"),d=p[y].name.substr(x+1);c[d]=s[d]===g?new m(p[y].asArrayBuffer()):p[y].asText()}r[l]={filename:a[l].name,value:n(c,t)}}return r},converFolder:n}},{iobuffer:14,jcampconverter:16,jszip:26}],4:[function(e,t,i){"use strict";function n(e){if(e>J)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"");var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError("The \"string\" argument must be of type string. Received type number");return d(e)}return s(e,t,i)}function s(e,t,i){if("string"==typeof e)return u(e,t);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer))return c(e,t,i);if("number"==typeof e)throw new TypeError("The \"value\" argument must not be of type number. Received type number");var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,i);var s=m(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be of type number");else if(0>e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"")}function r(e,t,i){return a(e),0>=e?n(e):void 0===t?n(e):"string"==typeof i?n(e).fill(t,i):n(e).fill(t)}function d(e){return a(e),n(0>e?0:0|h(e))}function u(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|g(e,t),s=n(i),a=s.write(e,t);return a!==i&&(s=s.slice(0,a)),s}function p(e){for(var t=0>e.length?0:0|h(e.length),o=n(t),s=0;s<t;s+=1)o[s]=255&e[s];return o}function c(e,t,i){if(0>t||e.byteLength<t)throw new RangeError("\"offset\" is outside of buffer bounds");if(e.byteLength<t+(i||0))throw new RangeError("\"length\" is outside of buffer bounds");var n;return n=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),n.__proto__=o.prototype,n}function m(e){if(o.isBuffer(e)){var t=0|h(e.length),i=n(t);return 0===i.length?i:(e.copy(i,0,0,t),i)}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0:"number"!=typeof e.length||Z(e.length)?n(0):p(e)}function h(e){if(e>=J)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+J.toString(16)+" bytes");return 0|e}function g(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+typeof e);var i=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===i)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return q(e).length;default:if(s)return n?-1:Y(e).length;t=(""+t).toLowerCase(),s=!0;}}function y(e,t,i){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),0>=i)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return z(this,t,i);case"utf8":case"utf-8":return H(this,t,i);case"ascii":return I(this,t,i);case"latin1":case"binary":return A(this,t,i);case"base64":return D(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function x(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function b(e,t,i,n,s){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,Z(i)&&(i=s?0:e.length-1),0>i&&(i=e.length+i),i>=e.length){if(s)return-1;i=e.length-1}else if(0>i)if(s)i=0;else return-1;if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:_(e,t,i,n,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):_(e,[t],i,n,s);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,o,s){function a(e,t){return 1==r?e[t]:e.readUInt16BE(t*r)}var r=1,l=e.length,d=t.length;if(void 0!==o&&(o=(o+"").toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(2>e.length||2>t.length)return-1;r=2,l/=2,d/=2,n/=2}var u;if(s){var i=-1;for(u=n;u<l;u++)if(a(e,u)!==a(t,-1==i?0:u-i))-1!=i&&(u-=u-i),i=-1;else if(-1==i&&(i=u),u-i+1===d)return i*r}else for(n+d>l&&(n=l-d),u=n;0<=u;u--){for(var p=!0,c=0;c<d;c++)if(a(e,u+c)!==a(t,c)){p=!1;break}if(p)return u}return-1}function k(e,t,n,o){n=+n||0;var s=e.length-n;o?(o=+o,o>s&&(o=s)):o=s;var a=t.length;o>a/2&&(o=a/2);for(var r=0,i;r<o;++r){if(i=parseInt(t.substr(2*r,2),16),Z(i))return r;e[n+r]=i}return r}function w(e,t,i,n){return V(Y(t,e.length-i),e,i,n)}function j(e,t,i,n){return V(U(t),e,i,n)}function v(e,t,i,n){return j(e,t,i,n)}function S(e,t,i,n){return V(q(t),e,i,n)}function E(e,t,i,n){return V(B(t,e.length-i),e,i,n)}function D(e,t,i){return 0===t&&i===e.length?W.fromByteArray(e):W.fromByteArray(e.slice(t,i))}function H(e,t,n){n=C(e.length,n);for(var o=[],s=t;s<n;){var i=e[s],a=null,r=239<i?4:223<i?3:191<i?2:1;if(s+r<=n){var l,d,u,p;1==r?128>i&&(a=i):2==r?(l=e[s+1],128==(192&l)&&(p=(31&i)<<6|63&l,127<p&&(a=p))):3==r?(l=e[s+1],d=e[s+2],128==(192&l)&&128==(192&d)&&(p=(15&i)<<12|(63&l)<<6|63&d,2047<p&&(55296>p||57343<p)&&(a=p))):4==r?(l=e[s+1],d=e[s+2],u=e[s+3],128==(192&l)&&128==(192&d)&&128==(192&u)&&(p=(15&i)<<18|(63&l)<<12|(63&d)<<6|63&u,65535<p&&1114112>p&&(a=p))):void 0}null===a?(a=65533,r=1):65535<a&&(a-=65536,o.push(55296|1023&a>>>10),a=56320|1023&a),o.push(a),s+=r}return P(o)}function P(e){var t=e.length;if(t<=K)return l.apply(String,e);for(var n="",o=0;o<t;)n+=l.apply(String,e.slice(o,o+=K));return n}function I(e,t,n){var o="";n=C(e.length,n);for(var s=t;s<n;++s)o+=l(127&e[s]);return o}function A(e,t,n){var o="";n=C(e.length,n);for(var s=t;s<n;++s)o+=l(e[s]);return o}function z(e,t,n){var o=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>o)&&(n=o);for(var s="",a=t;a<n;++a)s+=L(e[a]);return s}function T(e,t,n){for(var o=e.slice(t,n),s="",a=0;a<o.length;a+=2)s+=l(o[a]+256*o[a+1]);return s}function F(e,t,i){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,i,n,s,a){if(!o.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>s||t<a)throw new RangeError("\"value\" argument is out of bounds");if(i+n>e.length)throw new RangeError("Index out of range")}function R(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}function M(e,t,i,n,o){return t=+t,i>>>=0,o||R(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,t,i,n,23,4),i+4}function N(e,t,i,n,o){return t=+t,i>>>=0,o||R(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,t,i,n,52,8),i+8}function X(e){if(e=e.split("=")[0],e=e.trim().replace(Q,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function L(e){return 16>e?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||Infinity;for(var n=e.length,o=null,s=[],a=0,i;a<n;++a){if(i=e.charCodeAt(a),55295<i&&57344>i){if(!o){if(56319<i){-1<(t-=3)&&s.push(239,191,189);continue}else if(a+1===n){-1<(t-=3)&&s.push(239,191,189);continue}o=i;continue}if(56320>i){-1<(t-=3)&&s.push(239,191,189),o=i;continue}i=(o-55296<<10|i-56320)+65536}else o&&-1<(t-=3)&&s.push(239,191,189);if(o=null,128>i){if(0>(t-=1))break;s.push(i)}else if(2048>i){if(0>(t-=2))break;s.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;s.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(t-=4))break;s.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error("Invalid code point")}return s}function U(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function B(e,t){for(var n=[],o=0,i,s,a;o<e.length&&!(0>(t-=2));++o)i=e.charCodeAt(o),s=i>>8,a=i%256,n.push(a),n.push(s);return n}function q(e){return W.toByteArray(X(e))}function V(e,t,n,o){for(var s=0;s<o&&!(s+n>=t.length||s>=e.length);++s)t[s+n]=e[s];return s}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!==e}var W=e("base64-js"),G=e("ieee754");i.Buffer=o,i.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},i.INSPECT_MAX_BYTES=50;var J=2147483647;i.kMaxLength=J,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return o.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return o.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,i){return s(e,t,i)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,i){return r(e,t,i)},o.allocUnsafe=function(e){return d(e)},o.allocUnsafeSlow=function(e){return d(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if($(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array");if(e===t)return 0;for(var n=e.length,s=t.length,a=0,i=C(n,s);a<i;++a)if(e[a]!==t[a]){n=e[a],s=t[a];break}return n<s?-1:s<n?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return o.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=o.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var a=e[n];if($(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw new TypeError("\"list\" argument must be an Array of Buffers");a.copy(i,s),s+=a.length}return i},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?H(this,0,e):y.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,s,a){if($(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===s&&(s=0),void 0===a&&(a=this.length),0>t||n>e.length||0>s||a>this.length)throw new RangeError("out of range index");if(s>=a&&t>=n)return 0;if(s>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,s>>>=0,a>>>=0,this===e)return 0;for(var r=a-s,l=n-t,d=C(r,l),u=this.slice(s,a),p=e.slice(t,n),c=0;c<d;++c)if(u[c]!==p[c]){r=u[c],l=p[c];break}return r<l?-1:l<r?1:0},o.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},o.prototype.indexOf=function(e,t,i){return b(this,e,t,i,!0)},o.prototype.lastIndexOf=function(e,t,i){return b(this,e,t,i,!1)},o.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((void 0===i||i>o)&&(i=o),0<e.length&&(0>i||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return k(this,e,t,i);case"utf8":case"utf-8":return w(this,e,t,i);case"ascii":return j(this,e,t,i);case"latin1":case"binary":return v(this,e,t,i);case"base64":return S(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0;}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;o.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=o.prototype,n},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var o=this[e],s=1,a=0;++a<t&&(s*=256);)o+=this[e+a]*s;return o},o.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||F(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},o.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var o=this[e],s=1,a=0;++a<t&&(s*=256);)o+=this[e+a]*s;return s*=128,o>=s&&(o-=f(2,8*t)),o},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var o=t,i=1,s=this[e+--o];0<o&&(i*=256);)s+=this[e+--o]*i;return i*=128,s>=i&&(s-=f(2,8*t)),s},o.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),G.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),G.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),G.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),G.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,o){if(e=+e,t>>>=0,n>>>=0,!o){var s=f(2,8*n)-1;O(this,e,t,n,s,0)}var a=1,r=0;for(this[t]=255&e;++r<n&&(a*=256);)this[t+r]=255&e/a;return t+n},o.prototype.writeUIntBE=function(e,t,n,o){if(e=+e,t>>>=0,n>>>=0,!o){var s=f(2,8*n)-1;O(this,e,t,n,s,0)}var a=n-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=255&e/i;return t+n},o.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t>>>=0,!o){var s=f(2,8*n-1);O(this,e,t,n,s-1,-s)}var a=0,i=1,r=0;for(this[t]=255&e;++a<n&&(i*=256);)0>e&&0==r&&0!==this[t+a-1]&&(r=1),this[t+a]=255&(e/i>>0)-r;return t+n},o.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t>>>=0,!o){var s=f(2,8*n-1);O(this,e,t,n,s-1,-s)}var a=n-1,i=1,r=0;for(this[t+a]=255&e;0<=--a&&(i*=256);)0>e&&0==r&&0!==this[t+a+1]&&(r=1),this[t+a]=255&(e/i>>0)-r;return t+n},o.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,i){return M(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return M(this,e,t,!1,i)},o.prototype.writeDoubleLE=function(e,t,i){return N(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return N(this,e,t,!1,i)},o.prototype.copy=function(e,t,n,s){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),0<s&&s<n&&(s=n),s===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>s)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);var a=s-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,s);else if(this===e&&n<t&&t<s)for(var r=a-1;0<=r;--r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,s),t);return a},o.prototype.fill=function(e,t,n,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,n=this.length):"string"==typeof n&&(s=n,n=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){var a=e.charCodeAt(0);("utf8"===s&&128>a||"latin1"===s)&&(e=a)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var r;if("number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{var i=o.isBuffer(e)?e:o.from(e,s),l=i.length;if(0===l)throw new TypeError("The value \""+e+"\" is invalid for argument \"value\"");for(r=0;r<n-t;++r)this[r+t]=i[r%l]}return this};var Q=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:12}],5:[function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t=i.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!o)return!1;for(var s in e);return"undefined"==typeof s||i.call(e,s)};t.exports=function e(){var t=arguments[0],n=1,i=arguments.length,a=!1,r,l,d,u,p,c;for("boolean"==typeof t?(a=t,t=arguments[1]||{},n=2):("object"!=typeof t&&"function"!=typeof t||null==t)&&(t={});n<i;++n)if(r=arguments[n],null!=r)for(l in r)d=t[l],u=r[l],t!==u&&(a&&u&&(s(u)||(p=o(u)))?(p?(p=!1,c=d&&o(d)?d:[]):c=d&&s(d)?d:{},t[l]=e(a,c,u)):"undefined"!=typeof u&&(t[l]=u));return t}},{}],6:[function(e,t){"use strict";function i(e,t){var i=n(e);if(t===i)return!1;var o=e.trim();return!o.charAt(0).match(/\//)}function n(e){var t=/^\s*/.exec(e);return null===t?0:t[0].length}var o=e("./utils/splitStringIntoLines.js"),s=e("./utils/createInitialSequence"),a=e("./utils/months");t.exports=function(e){function t(){d(),v.push(D)}function r(){return D.parsedSequence.features[D.parsedSequence.features.length-1]}function l(e){D.messages.indexOf(-1===e)&&D.messages.push(e)}function d(){if(D.parsedSequence&&D.parsedSequence.features)for(var e=0;e<D.parsedSequence.features.length;e++)D.parsedSequence.features[e]=j(D.parsedSequence.features[e])}function u(e,t){if(t!==S.ORIGIN_TAG){var i=e.replace(/[\s]*[0-9]*/g,"");D.parsedSequence.sequence+=i}}function p(e){D=s(),e=c(S.LOCUS_TAG,e);var t=e.match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)$/),i=t[1],n=+t[2],o=t[3],r="circular"===t[4],l=t[5],d=D.parsedSequence;d.circular=r,d.moleculeType=o,d.genbankDivision=l;var u=t[6].match(/^(\d{2})-(.{3})-(\d{4})$/),p=new Date;p.setFullYear(+u[3]),p.setUTCMonth(a.indexOf(u[2].toUpperCase())),p.setDate(+u[1]),p.setUTCHours(12),p.setMinutes(0),p.setSeconds(0),p.setMilliseconds(0),d.date=p.getTime(),d.name=i,d.size=n}function c(e,t){return t=t.replace(/^\s*/,""),0===t.indexOf(e)&&(t=t.replace(e,"")),t.trim()}function m(e,t){var i=D.parsedSequence.references,n=i[i.length-1];t?_(t,e,t.toLowerCase(),n):_(S.REFERENCE_TAG,e,"description",n)}function h(e,t,o){var s;if(t===S.FEATURES_TAG)return void(X=!0);if(X&&(A=n(e),X=!1),i(e,A))L?(y(e.trim()),L=!0):(H&&(H[H.length-1]+=e.trim().replace(/"/g,"")),L=!1);else if(f(e))r()&&(x(e),L=!1);else{s=o.match(/complement/g)?-1:1,g();var a=r();a.type=t,a.strand=s,y(o),L=!0}}function g(){D.parsedSequence.features.push({locations:[],notes:{}})}function f(e){var t=!1;return e.trim().charAt(0).match(/\//)?t=!0:e.match(/^[\s]*\/[\w]+=[\S]+/)&&(t=!0),t}function y(e){e=e.trim();var t=[];e.replace(/(\d+)/g,function(e,i){t.push(i)});var i=r();i.start=+t[0],i.end=+t[1]}function x(e){var t,i;t=e.trim(),t=t.replace(/^\/|"$/g,""),i=t.split(/="|=/);var n=i[1];n&&(n=n.replace(/\\/g," "),e.match(/="/g)?n=n.replace(/".*/g,""):n.match(/^\d+$/g)&&(n=+n));var o=i[0],s=r().notes;s[o]?s[o].push(n):s[o]=[n],H=s[o]}function b(e){var t;return e=e.replace(/^[\s]*/,""),t=0>e.indexOf("=")?e.split(/[\s]+/):e.split(/=/),t[0]}function _(e,t,i,n){n=n||D.parsedSequence;var o=c(e,t);n[i]=n[i]?`${n[i]} `:"",n[i]+=o}function C(e){var t;return 0>e.indexOf("=")?(e=e.replace(/^[\s]*[\S]+[\s]+|[\s]+$/,""),e=e.trim(),e):(t=e.split(/=/),t[1])}function k(e){var t=!1;return e.substr(0,10).match(/^[\S]+/)&&(t=!0),t}function w(e){var t=!1;return e.substr(0,10).match(/^[\s]+[\S]+/)&&(t=!0),t}function j(e){e.name=e.notes.label?e.notes.label[0]:e.notes.gene?e.notes.gene[0]:e.notes.ApEinfo_label?e.notes.ApEinfo_label[0]:e.notes.name?e.notes.name[0]:e.notes.organism?e.notes.organism[0]:e.notes.locus_tag?e.notes.locus_tag[0]:e.notes.note?e.notes.note[0].substr(0,100):"";var t=e.name;return 0===e.name||e.name||(e.name="Untitled Feature"),e.name="string"==typeof e.name?e.name:e.name+"",e.name=e.name.substr(0,100),e.name!==t&&l("Warning: Shortening name of sequence (max 100 chars)"),e}var v=[],S={LOCUS_TAG:"LOCUS",DEFINITION_TAG:"DEFINITION",ACCESSION_TAG:"ACCESSION",VERSION_TAG:"VERSION",KEYWORDS_TAG:"KEYWORDS",SOURCE_TAG:"SOURCE",ORGANISM_TAG:"ORGANISM",REFERENCE_TAG:"REFERENCE",AUTHORS_TAG:"AUTHORS",CONSORTIUM_TAG:"CONSRTM",TITLE_TAG:"TITLE",JOURNAL_TAG:"JOURNAL",PUBMED_TAG:"PUBMED",REMARK_TAG:"REMARK",FEATURES_TAG:"FEATURES",BASE_COUNT_TAG:"BASE COUNT",ORIGIN_TAG:"ORIGIN",END_SEQUENCE_TAG:"//"},E=o(e),D,H,P,I,A;null===E&&l("Import Error: Sequence file is empty");var z=!1;for(var T of E){if(null===T)break;var F=b(T),O=C(T),R=w(T),M=k(T);if(F===S.END_SEQUENCE_TAG||M?(P=F,I=null):R&&(I=F),""!==T.trim()&&";"!==F){if(!z&&P!==S.LOCUS_TAG)break;switch(P){case S.LOCUS_TAG:z=!0,p(T);break;case S.FEATURES_TAG:if(""===O){l(`Warning: The feature '${F}'' has no location specified. This line has been ignored: line${T}`);break}h(T,F,O);break;case S.ORIGIN_TAG:u(T,F);break;case S.DEFINITION_TAG:case S.ACCESSION_TAG:case S.VERSION_TAG:case S.KEYWORDS_TAG:_(P,T,P.toLowerCase());break;case S.SOURCE_TAG:I===S.ORGANISM_TAG?_(I,T,"organism"):_(F,T,"source");break;case S.REFERENCE_TAG:if(F===S.REFERENCE_TAG){var N=D.parsedSequence.references||[];D.parsedSequence.references=N,N.push({})}m(T,I);break;case S.END_SEQUENCE_TAG:t();break;default:l(`Warning: This line has been ignored: ${T}`);}}}return D.success&&v[v.length-1]!==D&&t(),v;var X,L}},{"./utils/createInitialSequence":7,"./utils/months":8,"./utils/splitStringIntoLines.js":9}],7:[function(e,t){"use strict";t.exports=function(){return{messages:[],success:!0,parsedSequence:{features:[],name:"Untitled sequence",sequence:""}}}},{}],8:[function(e,t){"use strict";t.exports=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},{}],9:[function(e,t){"use strict";t.exports=function(e){var t=[];return""===e?t:(t=e.split(/\r?\n/),1===t.length&&(t=e.split("\\n")),t)}},{}],10:[function(e,t){"use strict";t.exports=e("./lib/heap")},{"./lib/heap":11}],11:[function(e,t,n){"use strict";(function(){var e,o,s,a,r,l,d,u,c,m,h,g,f,y,x;s=p,m=C,o=function(e,t){return e<t?-1:e>t?1:0},c=function(e,t,i,n,a){var r;if(null==i&&(i=0),null==a&&(a=o),0>i)throw new Error("lo must be non-negative");for(null==n&&(n=e.length);i<n;)r=s((i+n)/2),0>a(t,e[r])?n=r:i=r+1;return[].splice.apply(e,[i,i-i].concat(t)),t},l=function(e,t,i){return null==i&&(i=o),e.push(t),y(e,0,e.length-1,i)},r=function(e,t){var i,n;return null==t&&(t=o),i=e.pop(),e.length?(n=e[0],e[0]=i,x(e,0,t)):n=i,n},u=function(e,t,i){var n;return null==i&&(i=o),n=e[0],e[0]=t,x(e,0,i),n},d=function(e,t,i){var n;return null==i&&(i=o),e.length&&0>i(e[0],t)&&(n=[e[0],t],t=n[0],e[0]=n[1],x(e,0,i)),t},a=function(e,t){var n,i,a,r,l,d;for(null==t&&(t=o),r=function(){d=[];for(var t=0,i=s(e.length/2);0<=i?t<i:t>i;0<=i?t++:t--)d.push(t);return d}.apply(this).reverse(),l=[],(i=0,a=r.length);i<a;i++)n=r[i],l.push(x(e,n,t));return l},f=function(e,t,i){var n;if(null==i&&(i=o),n=e.indexOf(t),-1!==n)return y(e,0,n,i),x(e,n,i)},h=function(e,t,i){var n,s,r,l,u;if(null==i&&(i=o),s=e.slice(0,t),!s.length)return s;for(a(s,i),u=e.slice(t),(r=0,l=u.length);r<l;r++)n=u[r],d(s,n,i);return s.sort(i).reverse()},g=function(e,t,n){var s,l,i,d,u,p,h,g,f,y;if(null==n&&(n=o),10*t<=e.length){if(d=e.slice(0,t).sort(n),!d.length)return d;for(i=d[d.length-1],g=e.slice(t),(u=0,h=g.length);u<h;u++)s=g[u],0>n(s,i)&&(c(d,s,0,null,n),d.pop(),i=d[d.length-1]);return d}for(a(e,n),y=[],(l=p=0,f=m(t,e.length));0<=f?p<f:p>f;l=0<=f?++p:--p)y.push(r(e,n));return y},y=function(e,t,i,n){var s,a,r;for(null==n&&(n=o),s=e[i];i>t;){if(r=i-1>>1,a=e[r],0>n(s,a)){e[i]=a,i=r;continue}break}return e[i]=s},x=function(e,t,i){var n,s,a,r,l;for(null==i&&(i=o),s=e.length,l=t,a=e[t],n=2*t+1;n<s;)r=n+1,r<s&&!(0>i(e[n],e[r]))&&(n=r),e[t]=e[n],t=n,n=2*t+1;return e[t]=a,y(e,l,t,i)},e=function(){function e(e){this.cmp=null==e?o:e,this.nodes=[]}return e.push=l,e.pop=r,e.replace=u,e.pushpop=d,e.heapify=a,e.updateItem=f,e.nlargest=h,e.nsmallest=g,e.prototype.push=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pop=function(){return r(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return d(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,o){return"function"==typeof i&&i.amd?i([],o):"object"==typeof n?t.exports=o():e.Heap=o()}(this,function(){return e})}).call(void 0)},{}],12:[function(e,t,i){"use strict";i.read=function(t,n,o,a,r){var l=8*r-a-1,u=(1<<l)-1,p=u>>1,c=-7,h=o?r-1:0,i=o?-1:1,d=t[n+h],s,e;for(h+=i,s=d&(1<<-c)-1,d>>=-c,c+=l;0<c;s=256*s+t[n+h],h+=i,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=a;0<c;e=256*e+t[n+h],h+=i,c-=8);if(0===s)s=1-p;else{if(s===u)return e?NaN:(d?-1:1)*Infinity;e+=f(2,a),s-=p}return(d?-1:1)*e*f(2,s-a)},i.write=function(t,n,o,a,l,u){var h=8*u-l-1,g=(1<<h)-1,y=g>>1,x=23===l?5.960464477539063e-8-6.617444900424222e-24:0,b=a?0:u-1,i=a?1:-1,d=0>n||0===n&&0>1/n?1:0,s,_,m;for(n=S(n),isNaN(n)||n===Infinity?(_=isNaN(n)?1:0,s=g):(s=p(r(n)/Math.LN2),1>n*(m=f(2,-s))&&(s--,m*=2),n+=1<=s+y?x/m:x*f(2,1-y),2<=n*m&&(s++,m/=2),s+y>=g?(_=0,s=g):1<=s+y?(_=(n*m-1)*f(2,l),s+=y):(_=n*f(2,y-1)*f(2,l),s=0));8<=l;t[o+b]=255&_,b+=i,_/=256,l-=8);for(s=s<<l|_,h+=l;0<h;t[o+b]=255&s,b+=i,s/=256,h-=8);t[o+b-i]|=128*d}},{}],13:[function(e,t){"use strict";t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],14:[function(e,t){"use strict";var i=8192,o=[];t.exports=class{constructor(e,t){t=t||{},e===void 0&&(e=i),"number"==typeof e&&(e=new ArrayBuffer(e));var n=e.byteLength,o=t.offset?t.offset>>>0:0;e.buffer&&(n=e.byteLength-o,e=e.byteLength===e.buffer.byteLength?o?e.buffer.slice(o):e.buffer:e.buffer.slice(e.byteOffset+o,e.byteOffset+e.byteLength)),this.buffer=e,this.length=n,this.byteLength=n,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=n||i,this._mark=0}available(e){return void 0===e&&(e=1),this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(e){e===void 0&&(e=1),this.offset+=e}seek(e){this.offset=e}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(e){if(void 0===e&&(e=1),!this.available(e)){var t=this._increment+this._increment;this._increment=t;var i=this.length+t,n=new Uint8Array(i);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=i,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e){e===void 0&&(e=1);for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readByte();return t}readInt16(){var e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){var e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){var e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){var e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){var e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){var e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return l(this.readInt8())}readChars(e){e===void 0&&(e=1),o.length=e;for(var t=0;t<e;t++)o[t]=this.readChar();return o.join("")}writeBoolean(e){this.writeUint8(e?255:0)}writeInt8(e){this.ensureAvailable(1),this._data.setInt8(this.offset++,e)}writeUint8(e){this.ensureAvailable(1),this._data.setUint8(this.offset++,e)}writeByte(e){this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(var t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t])}writeInt16(e){this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2}writeUint16(e){this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2}writeInt32(e){this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4}writeUint32(e){this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4}writeFloat32(e){this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4}writeFloat64(e){this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8}writeChar(e){this.writeUint8(e.charCodeAt(0))}writeChars(e){for(var t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],15:[function(e,t){"use strict";var i=Object.prototype.toString;t.exports=function(e){return i.call(e).endsWith("Array]")}},{}],16:[function(e,t){"use strict";function i(){function e(e){for(var t=e.length,n=Array(t),o=0;o<t;o++)n[o]=parseFloat(e[o]);return n}function t(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"")}function n(e){return-1!==y.indexOf(e)}function o(e){var n=e.spectra,o=n.length,s={times:Array(o),series:{ms:{dimension:2,data:Array(o)}}},a=[],r;for(r=0;r<y.length;r++){var i=t(y[r]);n[0][i]&&(a.push(i),s.series[i]={dimension:1,data:Array(o)})}for(r=0;r<o;r++){var l=n[r];s.times[r]=l.pageValue;for(var d=0;d<a.length;d++)s.series[a[d]].data[r]=parseFloat(l[a[d]]);l.data&&(s.series.ms.data[r]=[l.data[0].x,l.data[0].y])}e.chromatogram=s}function s(e){var t=e.spectra[0].data[0];e.chromatogram={times:t.x.slice(),series:{intensity:{dimension:1,data:t.y.slice()}}}}function i(e,t){if(t.xFactor||(t.xFactor=1),t.yFactor||(t.yFactor=1),t.observeFrequency&&t.xUnit&&"HZ"===t.xUnit.toUpperCase()&&(t.xUnit="PPM",t.xFactor/=t.observeFrequency,t.firstX/=t.observeFrequency,t.lastX/=t.observeFrequency,t.deltaX/=t.observeFrequency),e.shiftOffsetVal){var i=t.firstX-e.shiftOffsetVal;t.firstX-=i,t.lastX-=i}}function a(e){e=e.sort(r);var t=e.length;return e[p(t/2)]}function r(e,t){return e-t}function l(e){for(var t=e[0].data[0][0],n=t,o=e.length,s=e[0].data[0].length/2,r=Array(o),l=0;l<o;l++){r[l]=Array(s);for(var i=e[l].data[0],d=0,u;d<s;d++)u=i[2*d+1],r[l][d]=u,u<t&&(t=u),u>n&&(n=u)}return{z:r,minX:e[0].data[0][0],maxX:e[0].data[0][e[0].data[0].length-2],minY:e[0].pageValue,maxY:e[o-1].pageValue,minZ:t,maxZ:n,noise:a(r[0].map(Math.abs))}}function u(e,t){var i=l(e.spectra);t.noContour||(e.contourLines=c(i,t),delete i.z),e.minMax=i}function c(e,t){for(var i=e.noise,n=e.z,o=n.length,s=n[0].length,a=e.minX,r=e.maxX,l=(r-a)/(s-1),u=e.minY,p=e.maxY,c=(p-u)/(o-1),m=e.minZ,h=e.maxZ,g=2*t.nbContourLevels,f=Array(g),y=0,x,b,_,C,k,w,j,v,S,E,D,H,P,I;y<g;y++){I={},f[y]=I;var A=y%2,z=(h-t.noiseMultiplier*i)*d((y>>1)-t.nbContourLevels);P=0==A?z+t.noiseMultiplier*i:0-z-t.noiseMultiplier*i;var T=[];if(I.zValue=P,I.lines=T,!(P<=m||P>=h))for(var F=0;F<o-1;F++)for(var O=n[F],R=n[F+1],M=0;M<s-1;M++)x=O[M],b=O[M+1],_=R[M],C=R[M+1],k=x>P,w=b>P,j=_>P,v=C>P,k!==w&&k!==j&&(S=M+(P-x)/(b-x),E=F,D=M,H=F+(P-x)/(_-x),T.push(S*l+a),T.push(E*c+u),T.push(D*l+a),T.push(H*c+u)),v!==w&&v!==j&&(S=M+1,E=F+1-(P-C)/(b-C),D=M+1-(P-C)/(_-C),H=F+1,T.push(S*l+a),T.push(E*c+u),T.push(D*l+a),T.push(H*c+u)),w!==j&&(S=(M+1-(P-b)/(_-b))*l+a,E=(F+(P-b)/(_-b))*c+u,w!==k&&(D=M+1-(P-b)/(x-b),H=F,T.push(S),T.push(E),T.push(D*l+a),T.push(H*c+u)),j!==k&&(D=M,H=F+1-(P-_)/(x-_),T.push(S),T.push(E),T.push(D*l+a),T.push(H*c+u)),w!==v&&(D=M+1,H=F+(P-b)/(C-b),T.push(S),T.push(E),T.push(D*l+a),T.push(H*c+u)),j!==v&&(D=M+(P-_)/(C-_),H=F+1,T.push(S),T.push(E),T.push(D*l+a),T.push(H*c+u)))}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:f}}function m(e,t){var n=e.yFactor,o=e.deltaX;e.isXYdata=!0;var s=[];e.data=[s];for(var a=e.firstX,r=e.firstY,l=!1,d=0,i;d<t.length;d++)if(i=t.charCodeAt(d),13===i||10===i)l=!0;else if(l)break;for(var u=!0,p=!1,c=!1,m=0,h=!1,g=!1,y=0,x=!1,b=!1,_=!1,C=0;d<=t.length;d++)if(i=d===t.length?13:t.charCodeAt(d),g)(13===i||10===i)&&(u=!0,g=!1);else if(57>=i&&48<=i)b=!0,0<C?y+=(i-48)/f(10,C++):(y*=10,y+=i-48);else if(44===i||46===i)b=!0,C++;else{if(b){if(u)u=!1,c&&(_=!0);else if(_)_=!1;else{p&&(m=x?0-y:y,c=!0,p=!1);for(var k=h?y-1:1,w=0;w<k;w++)c?r+=m:r=x?0-y:y,s.push(a),s.push(r*n),a+=o}x=!1,y=0,C=0,b=!1,h=!1}if(74>i&&63<i)b=!0,c=!1,y=i-64;else if(96<i&&106>i)b=!0,c=!1,y=i-96,x=!0;else if(115===i)b=!0,h=!0,y=9;else if(82<i&&91>i)b=!0,h=!0,y=i-82;else if(73<i&&83>i)b=!0,p=!0,y=i-73;else if(105<i&&115>i)b=!0,p=!0,y=i-105,x=!0;else if(36===i&&36===t.charCodeAt(d+1))b=!0,g=!0;else if(37===i)b=!0,p=!0,y=0,x=!1;else if(45===i){var j=t.charCodeAt(d+1);(48<=j&&57>=j||44===j||46===j)&&(b=!0,!u&&(c=!1),x=!0)}else(13===i||10===i)&&(u=!0,g=!1)}}function h(e,t,n){var o=/\$\$.*/,s=/[,\t ]+/;e.isPeaktable=!0;var a=[],r,i,l,d,u;e.data=[a];var p=t.split(/,? *,?[;\r\n]+ */);for(r=1,i=p.length;r<i;r++)if(u=p[r].trim().replace(o,"").split(s),0==u.length%2)for(l=0,d=u.length;l<d;l+=2)a.push(parseFloat(u[l])*e.xFactor),a.push(parseFloat(u[l+1])*e.yFactor);else n.logs.push(`Format error: ${u}`)}var g=/[, \t]+/,y=["TIC",".RIC","SCANNUMBER"];class x{}var b={keepRecordsRegExp:/^$/,xy:!1,withoutXY:!1,chromatogram:!1,keepSpectra:!1,noContour:!1,nbContourLevels:7,noiseMultiplier:5};return function(a,r){r=Object.assign({},b,r);var l=!r.withoutXY,d=Date.now(),p={},c={},f,y,_,C,w,v,S,j,E,D;c.profiling=[],c.logs=[];var H=[];c.spectra=H,c.info={};var P=new x;if("string"!=typeof a)throw new TypeError("the JCAMP should be a string");for(c.profiling&&c.profiling.push({action:"Before split to LDRS",time:Date.now()-d}),C=a.split(/[\r\n]+##/),c.profiling&&c.profiling.push({action:"Split to LDRS",time:Date.now()-d}),C[0]&&(C[0]=C[0].replace(/^[\r\n ]*##/,"")),(w=0,v=C.length);w<v;w++){if(f=C[w],j=f.indexOf("="),0<j?(y=f.substring(0,j),_=f.substring(j+1).trim()):(y=f,_=""),y=y.replace(/[_ -]/g,"").toUpperCase(),"DATATABLE"===y&&(E=_.indexOf("\n"),-1===E&&(E=_.indexOf("\r")),0<E)){var I=-1,A=-1;if(D=_.substring(0,E).split(/[ ,;\t]+/),0<D[0].indexOf("++")){var z=D[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),T=D[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");I=p.symbol.indexOf(z),A=p.symbol.indexOf(T)}-1===I&&(I=0),-1===A&&(A=0),p.first&&(p.first.length>I&&(P.firstX=p.first[I]),p.first.length>A&&(P.firstY=p.first[A])),p.last&&(p.last.length>I&&(P.lastX=p.last[I]),p.last.length>A&&(P.lastY=p.last[A])),p.vardim&&p.vardim.length>I&&(P.nbPoints=p.vardim[I]),p.factor&&(p.factor.length>I&&(P.xFactor=p.factor[I]),p.factor.length>A&&(P.yFactor=p.factor[A])),p.units&&(p.units.length>I&&(P.xUnit=p.units[I]),p.units.length>A&&(P.yUnit=p.units[A])),P.datatable=D[0],D[1]&&-1<D[1].indexOf("PEAKS")?y="PEAKTABLE":D[1]&&(D[1].indexOf("XYDATA")||0<D[0].indexOf("++"))&&(y="XYDATA",P.deltaX=(P.lastX-P.firstX)/(P.nbPoints-1))}if("XYDATA"===y){l&&(i(c,P),_.match(/.*\+\+.*/)?(!P.deltaX&&(P.deltaX=(P.lastX-P.firstX)/(P.nbPoints-1)),m(P,_,c)):h(P,_,c),H.push(P),P=new x);continue}else if("PEAKTABLE"===y){l&&(i(c,P),h(P,_,c),H.push(P),P=new x);continue}if("TITLE"===y)P.title=_;else if("DATATYPE"===y)P.dataType=_,-1<_.indexOf("nD")&&(c.twoD=!0);else if("NTUPLES"===y)-1<_.indexOf("nD")&&(c.twoD=!0);else if("XUNITS"===y)P.xUnit=_;else if("YUNITS"===y)P.yUnit=_;else if("FIRSTX"===y)P.firstX=parseFloat(_);else if("LASTX"===y)P.lastX=parseFloat(_);else if("FIRSTY"===y)P.firstY=parseFloat(_);else if("LASTY"===y)P.lastY=parseFloat(_);else if("NPOINTS"===y)P.nbPoints=parseFloat(_);else if("XFACTOR"===y)P.xFactor=parseFloat(_);else if("YFACTOR"===y)P.yFactor=parseFloat(_);else if("DELTAX"===y)P.deltaX=parseFloat(_);else if(".OBSERVEFREQUENCY"===y||"$SFO1"===y)P.observeFrequency||(P.observeFrequency=parseFloat(_));else if(".OBSERVENUCLEUS"===y)P.xType||(c.xType=_.replace(/[^a-zA-Z0-9]/g,""));else if("$SFO2"===y)c.indirectFrequency||(c.indirectFrequency=parseFloat(_));else if("$OFFSET"===y)c.shiftOffsetNum=0,c.shiftOffsetVal||(c.shiftOffsetVal=parseFloat(_));else if("$REFERENCEPOINT"===y);else if("VARNAME"===y)p.varname=_.split(g);else if("SYMBOL"===y)p.symbol=_.split(g);else if("VARTYPE"===y)p.vartype=_.split(g);else if("VARFORM"===y)p.varform=_.split(g);else if("VARDIM"===y)p.vardim=e(_.split(g));else if("UNITS"===y)p.units=_.split(g);else if("FACTOR"===y)p.factor=e(_.split(g));else if("FIRST"===y)p.first=e(_.split(g));else if("LAST"===y)p.last=e(_.split(g));else if("MIN"===y)p.min=e(_.split(g));else if("MAX"===y)p.max=e(_.split(g));else if(".NUCLEUS"===y)c.twoD&&(c.yType=_.split(g)[0]);else if("PAGE"===y){P.page=_.trim(),P.pageValue=parseFloat(_.replace(/^.*=/,"")),P.pageSymbol=P.page.replace(/[=].*/,"");var F=p.symbol.indexOf(P.pageSymbol),O="";p.units&&p.units[F]&&(O=p.units[F]),c.indirectFrequency&&"PPM"!==O&&(P.pageValue/=c.indirectFrequency)}else"RETENTIONTIME"===y?P.pageValue=parseFloat(_):n(y)&&(P[t(y)]=_);y.match(r.keepRecordsRegExp)&&(c.info[y]=_.trim())}if(c.profiling&&c.profiling.push({action:"Finished parsing",time:Date.now()-d}),0<Object.keys(p).length){var R=[],M=Object.keys(p);for(w=0;w<M.length;w++){var N=M[w],X=p[N];for(S=0;S<X.length;S++)R[S]||(R[S]={}),R[S][N]=X[S]}c.ntuples=R}if(c.twoD&&l&&(u(c,r),c.profiling&&c.profiling.push({action:"Finished countour plot calculation",time:Date.now()-d}),!r.keepSpectra&&delete c.spectra),r.chromatogram&&(r.xy=!0),r.xy&&l&&0<H.length)for(w=0;w<H.length;w++)if(P=H[w],0<P.data.length)for(S=0;S<P.data.length;S++){for(var L=P.data[S],Y={x:Array(L.length/2),y:Array(L.length/2)},U=0;U<L.length;U+=2)Y.x[U/2]=L[U],Y.y[U/2]=L[U+1];P.data[S]=Y}return r.chromatogram&&(1<c.spectra.length?o(c):s(c),c.profiling&&c.profiling.push({action:"Finished chromatogram calculation",time:Date.now()-d})),c.profiling&&c.profiling.push({action:"Total time",time:Date.now()-d}),c}}function n(e,t){return r||o(),new Promise(function(i){var n=`${Date.now()}${Math.random()}`;a[n]=i,r.postMessage(JSON.stringify({stamp:n,input:e,options:t}))})}function o(){var e=URL.createObjectURL(new Blob([`var getConverter =${i.toString()};var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };`],{type:"application/javascript"}));r=new Worker(e),URL.revokeObjectURL(e),r.addEventListener("message",function(e){var t=JSON.parse(e.data),i=t.stamp;a[i]&&a[i](t.output)})}var s=i(),a={},r;t.exports={convert:function(e,t,i){return"boolean"==typeof t&&(i=t,t={}),i?n(e,t):s(e,t)},createTree:function(e,t={}){var n=t.flatten;if("string"!=typeof e)throw new TypeError("the JCAMP should be a string");for(var o=e.split(/[\r\n]+/),s=[],a=[],r=[],l=void 0,d=0,u=0,i;u<o.length;u++){if(i=o[u],"##NTUPLES"===i.substring(0,9)&&d++,"##TITLE"===i.substring(0,7)){for(var p=[i.substring(8).trim()],c=u+1;c<o.length&&!o[c].startsWith("##");c++)p.push(o[c].trim());a.push({title:p.join("\n"),jcamp:`${i}\n`,children:[]}),l=a[a.length-1],s.push(l)}else if("##END"===i.substring(0,5)&&0==d){l.jcamp+=`${i}\n`;var m=a.pop();0===a.length?(l=void 0,r.push(m)):(l=a[a.length-1],l.children.push(m))}else if(l&&l.jcamp){l.jcamp+=`${i}\n`;var h=i.match(/^##(.*?)=(.+)/);if(h){var g=h[1].replace(/[ _-]/g,"").toUpperCase();"DATATYPE"===g&&(l.dataType=h[2].trim())}}"##END"===i.substring(0,5)&&0<d&&d--}return n!==void 0&&n?(s.forEach((e)=>{e.children=void 0}),s):r}}},{}],17:[function(e,t){"use strict";function i(e){if(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0;for(var t=0;t<this.data.length;t++)e[t]&=255}}var n=e("./dataReader");i.prototype=new n,i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),o=e.charCodeAt(2),s=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===o&&this.data[a+3]===s)return a-this.zero;return-1},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./dataReader":22}],18:[function(e,t,i){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t="",o=0,i,s,a,r,l,d,u;o<e.length;)i=e.charCodeAt(o++),s=e.charCodeAt(o++),a=e.charCodeAt(o++),r=i>>2,l=(3&i)<<4|s>>4,d=(15&s)<<2|a>>6,u=63&a,isNaN(s)?d=u=64:isNaN(a)&&(u=64),t=t+n.charAt(r)+n.charAt(l)+n.charAt(d)+n.charAt(u);return t},i.decode=function(e){var t="",o=0,i,s,a,r,d,u,p;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<e.length;)r=n.indexOf(e.charAt(o++)),d=n.indexOf(e.charAt(o++)),u=n.indexOf(e.charAt(o++)),p=n.indexOf(e.charAt(o++)),i=r<<2|d>>4,s=(15&d)<<4|u>>2,a=(3&u)<<6|p,t+=l(i),64!=u&&(t+=l(s)),64!=p&&(t+=l(a));return t}},{}],19:[function(e,t){"use strict";function i(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}i.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=i},{}],20:[function(e,t,i){"use strict";i.STORE={magic:"\0\0",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},i.DEFLATE=e("./flate")},{"./flate":25}],21:[function(e,t){"use strict";var n=e("./utils"),o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var s="string"!==n.getTypeOf(e);"undefined"==typeof t&&(t=0);var a=0,r=0,l=0;t^=-1;for(var d=0,i=e.length;d<i;d++)l=s?e[d]:e.charCodeAt(d),r=255&(t^l),a=o[r],t=t>>>8^a;return-1^t}},{"./utils":38}],22:[function(e,t){"use strict";function i(){this.data=null,this.length=0,this.index=0,this.zero=0}var n=e("./utils");i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t=0,n;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)t=(t<<8)+this.byteAt(n);return this.index+=e,t},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date((127&e>>25)+1980,(15&e>>21)-1,31&e>>16,31&e>>11,63&e>>5,(31&e)<<1)}},t.exports=i},{"./utils":38}],23:[function(e,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],24:[function(e,t,i){"use strict";var n=e("./utils");i.string2binary=function(e){return n.string2binary(e)},i.string2Uint8Array=function(e){return n.transformTo("uint8array",e)},i.uint8Array2String=function(e){return n.transformTo("string",e)},i.string2Blob=function(e){var t=n.transformTo("arraybuffer",e);return n.arrayBuffer2Blob(t)},i.arrayBuffer2Blob=function(e){return n.arrayBuffer2Blob(e)},i.transformTo=function(e,t){return n.transformTo(e,t)},i.getTypeOf=function(e){return n.getTypeOf(e)},i.checkSupport=function(e){return n.checkSupport(e)},i.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,i.pretty=function(e){return n.pretty(e)},i.findCompression=function(e){return n.findCompression(e)},i.isRegExp=function(e){return n.isRegExp(e)}},{"./utils":38}],25:[function(e,t,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=e("pako");i.uncompressInputType=n?"uint8array":"array",i.compressInputType=n?"uint8array":"array",i.magic="\b\0",i.compress=function(e,t){return o.deflateRaw(e,{level:t.level||-1})},i.uncompress=function(e){return o.inflateRaw(e)}},{pako:122}],26:[function(e,t){"use strict";function n(e,t){return this instanceof n?void(this.files={},this.comment=null,this.root="",e&&this.load(e,t),this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}):new n(e,t)}var i=e("./base64");n.prototype=e("./object"),n.prototype.load=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.utils=e("./deprecatedPublicUtils"),n.base64={encode:function(e){return i.encode(e)},decode:function(e){return i.decode(e)}},n.compressions=e("./compressions"),t.exports=n},{"./base64":18,"./compressions":20,"./defaults":23,"./deprecatedPublicUtils":24,"./load":27,"./object":30,"./support":34}],27:[function(e,t){"use strict";var n=e("./base64"),o=e("./utf8"),s=e("./utils"),a=e("./zipEntries");t.exports=function(e,t){var r,l,d,i;for(t=s.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),t.base64&&(e=n.decode(e)),l=new a(e,t),r=l.files,d=0;d<r.length;d++)i=r[d],this.file(i.fileNameStr,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:t.createFolders});return l.zipComment.length&&(this.comment=l.zipComment),this}},{"./base64":18,"./utf8":37,"./utils":38,"./zipEntries":39}],28:[function(e,t){(function(e){"use strict";t.exports=function(t,i){return new e(t,i)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,e("buffer").Buffer)},{buffer:4}],29:[function(e,t){"use strict";function i(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0}var n=e("./uint8ArrayReader");i.prototype=new n,i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./uint8ArrayReader":35}],30:[function(e,t){"use strict";var i=e("./support"),n=e("./utils"),s=e("./crc32"),a=e("./signature"),r=e("./defaults"),o=e("./base64"),d=e("./compressions"),u=e("./compressedObject"),p=e("./nodeBuffer"),c=e("./utf8"),m=e("./stringWriter"),h=e("./uint8ArrayWriter"),g=function(e){if(e._data instanceof u&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===n.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},f=function(e){var t=g(e),o=n.getTypeOf(t);return"string"===o?!e.options.binary&&i.nodebuffer?p(t,"utf-8"):e.asBinary():t},y=function(e){var t=g(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=o.decode(t)),t=e&&this.options.binary?H.utf8decode(t):n.transformTo("string",t),e||this.options.binary||(t=n.transformTo("string",H.utf8encode(t))),t)},x=function(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};x.prototype={asText:function(){return y.call(this,!0)},asBinary:function(){return y.call(this,!1)},asNodeBuffer:function(){var e=f(this);return n.transformTo("nodebuffer",e)},asUint8Array:function(){var e=f(this);return n.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(e,t){var n="",o;for(o=0;o<t;o++)n+=l(255&e),e>>>=8;return n},_=function(e){return e=e||{},!0===e.base64&&(null===e.binary||void 0===e.binary)&&(e.binary=!0),e=n.extend(e,r),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},C=function(e,t,i){var o=n.getTypeOf(t),s;if(i=_(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=w(e)),i.createFolders&&(s=k(e))&&j.call(this,s,!0),i.dir||null===t||"undefined"==typeof t)i.base64=!1,i.binary=!1,t=null,o=null;else if("string"===o)i.binary&&!i.base64&&!0!==i.optimizedBinaryString&&(t=n.string2binary(t));else{if(i.base64=!1,i.binary=!0,!o&&!(t instanceof u))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=n.transformTo("uint8array",t))}var a=new x(e,t,i);return this.files[e]=a,a},k=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},w=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},j=function(e,t){return t="undefined"!=typeof t&&t,e=w(e),this.files[e]||C.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},v=function(e,t,i){var o=new u,a;return e._data instanceof u?(o.uncompressedSize=e._data.uncompressedSize,o.crc32=e._data.crc32,0===o.uncompressedSize||e.dir?(t=d.STORE,o.compressedContent="",o.crc32=0):e._data.compressionMethod===t.magic?o.compressedContent=e._data.getCompressedContent():(a=e._data.getContent(),o.compressedContent=t.compress(n.transformTo(t.compressInputType,a),i))):(a=f(e),(!a||0===a.length||e.dir)&&(t=d.STORE,a=""),o.uncompressedSize=a.length,o.crc32=s(a),o.compressedContent=t.compress(n.transformTo(t.compressInputType,a),i)),o.compressedSize=o.compressedContent.length,o.compressionMethod=t.magic,o},S=function(e,t){var i=e;return e||(i=t?16893:33204),(65535&i)<<16},E=function(e){return 63&(e||0)},D=function(e,t,i,r,l,d){var u=i.compressedContent,p=d!==c.utf8encode,m=n.transformTo("string",d(t.name)),h=n.transformTo("string",c.utf8encode(t.name)),g=t.comment||"",f=n.transformTo("string",d(g)),y=n.transformTo("string",c.utf8encode(g)),x=h.length!==t.name.length,_=y.length!==g.length,C=t.options,o="",k="",w="",j,v,D,H;D=t._initialMetadata.dir===t.dir?C.dir:t.dir,H=t._initialMetadata.date===t.date?C.date:t.date;var P=0,I=0;D&&(P|=16),"UNIX"===l?(I=798,P|=S(t.unixPermissions,D)):(I=20,P|=E(t.dosPermissions,D)),j=H.getHours(),j<<=6,j|=H.getMinutes(),j<<=5,j|=H.getSeconds()/2,v=H.getFullYear()-1980,v<<=4,v|=H.getMonth()+1,v<<=5,v|=H.getDate(),x&&(k=b(1,1)+b(s(m),4)+h,o+="up"+b(k.length,2)+k),_&&(w=b(1,1)+b(this.crc32(f),4)+y,o+="uc"+b(w.length,2)+w);var A="";A+="\n\0",A+=!p&&(x||_)?"\0\b":"\0\0",A+=i.compressionMethod,A+=b(j,2),A+=b(v,2),A+=b(i.crc32,4),A+=b(i.compressedSize,4),A+=b(i.uncompressedSize,4),A+=b(m.length,2),A+=b(o.length,2);var z=a.LOCAL_FILE_HEADER+A+m+o,T=a.CENTRAL_FILE_HEADER+b(I,2)+A+b(f.length,2)+"\0\0\0\0"+b(P,4)+b(r,4)+m+o+f;return{fileRecord:z,dirRecord:T,compressedObject:i}},H={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t=[],i,o,s,a;for(i in this.files)this.files.hasOwnProperty(i)&&(s=this.files[i],a=new x(s.name,s._data,n.extend(s.options)),o=i.slice(this.root.length,i.length),i.slice(0,this.root.length)===this.root&&e(o,a)&&t.push(a));return t},file:function(e,t,i){if(1===arguments.length){if(n.isRegExp(e)){var o=e;return this.filter(function(e,t){return!t.dir&&o.test(e)})}return this.filter(function(t,i){return!i.dir&&t===e})[0]||null}return e=this.root+e,C.call(this,e,t,i),this},folder:function(e){if(!e)return this;if(n.isRegExp(e))return this.filter(function(t,i){return i.dir&&e.test(t)});var t=this.root+e,i=j.call(this,t),o=this.clone();return o.root=i.name,o},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,i){return i.name.slice(0,e.length)===e}),o=0;o<n.length;o++)delete this.files[n[o].name];return this},generate:function(e){e=n.extend(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode}),n.checkSupport(e.type),("darwin"===e.platform||"freebsd"===e.platform||"linux"===e.platform||"sunos"===e.platform)&&(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t=[],s=0,r=0,l=n.transformTo("string",e.encodeFileName(e.comment||this.comment||"")),u,p;for(var i in this.files)if(this.files.hasOwnProperty(i)){var g=this.files[i],f=g.options.compression||e.compression.toUpperCase(),y=d[f];if(!y)throw new Error(f+" is not a valid compression method !");var x=g.options.compressionOptions||e.compressionOptions||{},_=v.call(this,g,y,x),C=D.call(this,i,g,_,s,e.platform,e.encodeFileName);s+=C.fileRecord.length+_.compressedSize,r+=C.dirRecord.length,t.push(C)}var k="";k=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+b(t.length,2)+b(t.length,2)+b(r,4)+b(s,4)+b(l.length,2)+l;var w=e.type.toLowerCase();for(u="uint8array"===w||"arraybuffer"===w||"blob"===w||"nodebuffer"===w?new h(s+r+k.length):new m(s+r+k.length),p=0;p<t.length;p++)u.append(t[p].fileRecord),u.append(t[p].compressedObject.compressedContent);for(p=0;p<t.length;p++)u.append(t[p].dirRecord);u.append(k);var j=u.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(e.type.toLowerCase(),j);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",j),e.mimeType);case"base64":return e.base64?o.encode(j):j;default:return j;}},crc32:function(e,t){return s(e,t)},utf8encode:function(e){return n.transformTo("string",c.utf8encode(e))},utf8decode:function(e){return c.utf8decode(e)}};t.exports=H},{"./base64":18,"./compressedObject":19,"./compressions":20,"./crc32":21,"./defaults":23,"./nodeBuffer":28,"./signature":31,"./stringWriter":33,"./support":34,"./uint8ArrayWriter":36,"./utf8":37,"./utils":38}],31:[function(e,t,i){"use strict";i.LOCAL_FILE_HEADER="PK\x03\x04",i.CENTRAL_FILE_HEADER="PK\x01\x02",i.CENTRAL_DIRECTORY_END="PK\x05\x06",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",i.DATA_DESCRIPTOR="PK\x07\b"},{}],32:[function(e,t){"use strict";function i(e,t){this.data=e,t||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var n=e("./dataReader"),o=e("./utils");i.prototype=new n,i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./dataReader":22,"./utils":38}],33:[function(e,t){"use strict";var i=e("./utils"),n=function(){this.data=[]};n.prototype={append:function(e){e=i.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=n},{"./utils":38}],34:[function(e,t,i){(function(e){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof e,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var t=new ArrayBuffer(0);try{i.blob=0===new Blob([t],{type:"application/zip"}).size}catch(s){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new n;o.append(t),i.blob=0===o.getBlob("application/zip").size}catch(t){i.blob=!1}}}}).call(this,e("buffer").Buffer)},{buffer:4}],35:[function(e,t){"use strict";function i(e){e&&(this.data=e,this.length=this.data.length,this.index=0,this.zero=0)}var n=e("./arrayReader");i.prototype=new n,i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./arrayReader":17}],36:[function(e,t){"use strict";var i=e("./utils"),n=function(e){this.data=new Uint8Array(e),this.index=0};n.prototype={append:function(e){0!==e.length&&(e=i.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=n},{"./utils":38}],37:[function(e,t,n){"use strict";for(var o=e("./utils"),s=e("./support"),a=e("./nodeBuffer"),r=Array(256),l=0;256>l;l++)r[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;r[254]=r[254]=1;var i=function(e){var t=e.length,n=0,o,a,r,l,d;for(l=0;l<t;l++)a=e.charCodeAt(l),55296==(64512&a)&&l+1<t&&(r=e.charCodeAt(l+1),56320==(64512&r)&&(a=65536+(a-55296<<10)+(r-56320),l++)),n+=128>a?1:2048>a?2:65536>a?3:4;for(o=s.uint8array?new Uint8Array(n):Array(n),d=0,l=0;d<n;l++)a=e.charCodeAt(l),55296==(64512&a)&&l+1<t&&(r=e.charCodeAt(l+1),56320==(64512&r)&&(a=65536+(a-55296<<10)+(r-56320),l++)),128>a?o[d++]=a:2048>a?(o[d++]=192|a>>>6,o[d++]=128|63&a):65536>a?(o[d++]=224|a>>>12,o[d++]=128|63&a>>>6,o[d++]=128|63&a):(o[d++]=240|a>>>18,o[d++]=128|63&a>>>12,o[d++]=128|63&a>>>6,o[d++]=128|63&a);return o},d=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return 0>i?t:0===i?t:i+r[e[i]]>t?i:t},u=function(e){var t=e.length,n=Array(2*t),s,i,a,l;for(i=0,s=0;s<t;){if(a=e[s++],128>a){n[i++]=a;continue}if(l=r[a],4<l){n[i++]=65533,s+=l-1;continue}for(a&=2===l?31:3===l?15:7;1<l&&s<t;)a=a<<6|63&e[s++],l--;if(1<l){n[i++]=65533;continue}65536>a?n[i++]=a:(a-=65536,n[i++]=55296|1023&a>>10,n[i++]=56320|1023&a)}return n.length!==i&&(n.subarray?n=n.subarray(0,i):n.length=i),o.applyFromCharCode(n)};n.utf8encode=function(e){return s.nodebuffer?a(e,"utf-8"):i(e)},n.utf8decode=function(e){if(s.nodebuffer)return o.transformTo("nodebuffer",e).toString("utf-8");e=o.transformTo(s.uint8array?"uint8array":"array",e);for(var t=[],i=0,n=e.length;i<n;){var a=d(e,C(i+65536,n));s.uint8array?t.push(u(e.subarray(i,a))):t.push(u(e.slice(i,a))),i=a}return t.join("")}},{"./nodeBuffer":28,"./support":34,"./utils":38}],38:[function(e,t,n){"use strict";function i(e){return e}function o(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function s(e){var t=65536,o=[],s=e.length,a=n.getTypeOf(e),r=0,d=!0;try{"uint8array"===a?l.apply(null,new Uint8Array(0)):"nodebuffer"===a?l.apply(null,u(0)):void 0}catch(t){d=!1}if(!d){for(var c="",m=0;m<e.length;m++)c+=l(e[m]);return c}for(;r<s&&1<t;)try{"array"===a||"nodebuffer"===a?o.push(l.apply(null,e.slice(r,C(r+t,s)))):o.push(l.apply(null,e.subarray(r,C(r+t,s)))),r+=t}catch(i){t=p(t/2)}return o.join("")}function a(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}var r=e("./support"),d=e("./compressions"),u=e("./nodeBuffer");n.string2binary=function(e){for(var t="",n=0;n<e.length;n++)t+=l(255&e.charCodeAt(n));return t},n.arrayBuffer2Blob=function(e,t){n.checkSupport("blob"),t=t||"application/zip";try{return new Blob([e],{type:t})}catch(n){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new i;return o.append(e),o.getBlob(t)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},n.applyFromCharCode=s;var c={};c.string={string:i,array:function(e){return o(e,Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:function(e){return o(e,u(e.length))}},c.array={string:s,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(e)}},c.arraybuffer={string:function(e){return s(new Uint8Array(e))},array:function(e){return a(new Uint8Array(e),Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(new Uint8Array(e))}},c.uint8array={string:s,array:function(e){return a(e,Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return u(e)}},c.nodebuffer={string:s,array:function(e){return a(e,Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:i},n.transformTo=function(e,t){if(t||(t=""),!e)return t;n.checkSupport(e);var i=n.getTypeOf(t),o=c[i][e](t);return o},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&u.test(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){var t=r[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this browser")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t="",n,o;for(o=0;o<(e||"").length;o++)n=e.charCodeAt(o),t+="\\x"+(16>n?"0":"")+n.toString(16).toUpperCase();return t},n.findCompression=function(e){for(var t in d)if(d.hasOwnProperty(t)&&d[t].magic===e)return d[t];return null},n.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},n.extend=function(){var e={},t,i;for(t=0;t<arguments.length;t++)for(i in arguments[t])arguments[t].hasOwnProperty(i)&&"undefined"==typeof e[i]&&(e[i]=arguments[t][i]);return e}},{"./compressions":20,"./nodeBuffer":28,"./support":34}],39:[function(e,t){"use strict";function i(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var n=e("./stringReader"),o=e("./nodeBufferReader"),s=e("./uint8ArrayReader"),a=e("./arrayReader"),r=e("./utils"),l=e("./signature"),d=e("./zipEntry"),u=e("./support"),p=e("./object");i.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4);return this.reader.setIndex(i),n===t},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=u.uint8array?"uint8array":"array",i=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e=this.zip64EndOfCentralSize-44,t,i,n;0<e;)t=this.reader.readInt(2),i=this.reader.readInt(4),n=this.reader.readString(i),this.zip64ExtensibleData[t]={id:t,length:i,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)e=new d({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length)if(0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length);else;},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(0>e){var t=!this.isSignature(0,l.LOCAL_FILE_HEADER);if(t)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(e);var i=e;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var o=i-n;if(0<o)this.isSignature(i,l.CENTRAL_FILE_HEADER)||(this.reader.zero=o);else if(0>o)throw new Error("Corrupted zip: missing "+S(o)+" bytes.")},prepareReader:function(e){var t=r.getTypeOf(e);if(r.checkSupport(t),"string"===t&&!u.uint8array)this.reader=new n(e,this.loadOptions.optimizedBinaryString);else if("nodebuffer"===t)this.reader=new o(e);else if(u.uint8array)this.reader=new s(r.transformTo("uint8array",e));else if(u.array)this.reader=new a(r.transformTo("array",e));else throw new Error("Unexpected error: unsupported type '"+t+"'")},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=i},{"./arrayReader":17,"./nodeBufferReader":29,"./object":30,"./signature":31,"./stringReader":32,"./support":34,"./uint8ArrayReader":35,"./utils":38,"./zipEntry":40}],40:[function(e,t){"use strict";function i(e,t){this.options=e,this.loadOptions=t}var n=e("./stringReader"),o=e("./utils"),s=e("./compressedObject"),a=e("./object"),r=e("./support");i.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(e,t,i){return function(){var n=e.index;e.setIndex(t);var o=e.readData(i);return e.setIndex(n),o}},prepareContent:function(e,t,i,n,s){return function(){var e=o.transformTo(n.uncompressInputType,this.getCompressedContent()),t=n.uncompress(e);if(t.length!==s)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=o.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readData(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e==0&&(this.dosPermissions=63&this.externalFileAttributes),e==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=new n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t=e.index,i,n,o;for(this.extraFields=this.extraFields||{};e.index<t+this.extraFieldsLength;)i=e.readInt(2),n=e.readInt(2),o=e.readString(n),this.extraFields[i]={id:i,length:n,value:o}},handleUTF8:function(){var e=r.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1===t.readInt(1)?a.crc32(this.fileName)===t.readInt(4)?a.utf8decode(t.readString(e.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1===t.readInt(1)?a.crc32(this.fileComment)===t.readInt(4)?a.utf8decode(t.readString(e.length-5)):null:null}return null}},t.exports=i},{"./compressedObject":19,"./object":30,"./stringReader":32,"./support":34,"./utils":38}],41:[function(e,t){(function(e){"use strict";function i(e){if("string"==typeof e)return e;if(s(e))return E?E.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==typeof e}function s(e){return"symbol"==typeof e||o(e)&&j.call(e)==m}function a(e){if(!e)return 0===e?e:0;if(e=l(e),e===u||e===-u){var t=0>e?-1:1;return t*p}return e===e?e:0}function r(e){var t=a(e),i=t%1;return t===t?i?t-i:t:0}function l(e){if("number"==typeof e)return e;if(s(e))return c;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(h,"");var i=f.test(e);return i||y.test(e)?x(e.slice(2),i?2:8):g.test(e)?c:+e}function d(e){return null==e?"":i(e)}var u=1/0,p=1.7976931348623157e308,c=0/0,m="[object Symbol]",h=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,y=/^0o[0-7]+$/i,x=parseInt,b="object"==typeof e&&e&&e.Object===Object&&e,_="object"==typeof self&&self&&self.Object===Object&&self,k=b||_||Function("return this")(),w=Object.prototype,j=w.toString,v=k.Symbol,S=v?v.prototype:void 0,E=S?S.toString:void 0,D=function(e){var t=Math[e];return function(e,i){if(e=l(e),i=C(r(i),292),i){var n=(d(e)+"e").split("e"),o=t(n[0]+"e"+(+n[1]+i));return n=(d(o)+"e").split("e"),+(n[0]+"e"+(+n[1]-i))}return t(e)}}("round");t.exports=D}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],42:[function(e,t){(function(){function e(t){for(var s=0,a=t.length-1,e=void 0,r=void 0,l=void 0,u=o(s,a);;){if(a<=s)return t[u];if(a==s+1)return t[s]>t[a]&&n(t,s,a),t[u];for(e=o(s,a),t[e]>t[a]&&n(t,e,a),t[s]>t[a]&&n(t,s,a),t[e]>t[s]&&n(t,e,s),n(t,e,s+1),r=s+1,l=a;;){do r++;while(t[s]>t[r]);do l--;while(t[l]>t[s]);if(l<r)break;n(t,r,l)}n(t,s,l),l<=u&&(s=r),l>=u&&(a=l-1)}}var n=function(e,t,i){var n;return n=[e[i],e[t]],e[t]=n[0],e[i]=n[1],n},o=function(e,t){return~~((e+t)/2)};"undefined"!=typeof t&&t.exports?t.exports=e:window.median=e})()},{}],43:[function(e,t){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}(e("is-any-array"));t.exports=function(e){if(!n(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");for(var t=e[0],o=1;o<e.length;o++)e[o]>t&&(t=e[o]);return t}},{"is-any-array":15}],44:[function(e,t){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var n=i(e("median-quickselect")),o=i(e("is-any-array"));t.exports=function(e){if(!o(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");return n(e.slice())}},{"is-any-array":15,"median-quickselect":42}],45:[function(e,t){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}(e("is-any-array"));t.exports=function(e){if(!n(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");for(var t=e[0],o=1;o<e.length;o++)e[o]<t&&(t=e[o]);return t}},{"is-any-array":15}],46:[function(e,t){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var n=i(e("ml-array-max")),o=i(e("ml-array-min")),s=i(e("is-any-array"));t.exports=function(e,t={}){if(!s(e))throw new TypeError("input must be an array");else if(0===e.length)throw new TypeError("input must not be empty");var a;if(t.output!==void 0){if(!s(t.output))throw new TypeError("output option must be an array if specified");a=t.output}else a=Array(e.length);var r=o(e),l=n(e);if(r===l)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var d=t.min,u=d===void 0?t.autoMinMax?r:0:d,p=t.max,c=p===void 0?t.autoMinMax?l:1:p;if(u>=c)throw new RangeError("min option must be smaller than max option");for(var m=0;m<e.length;m++)a[m]=(e[m]-r)*((c-u)/(l-r))+u;return a}},{"is-any-array":15,"ml-array-max":43,"ml-array-min":45}],47:[function(e,t){"use strict";function i(e){for(var t=Array(e[0].length),n=0;n<t.length;++n)t[n]=Array(e.length);for(n=0;n<e.length;++n)for(var i=0;i<e[0].length;++i)t[i][n]=e[n][i];return t}function n(e,t={}){var s=t.min,a=t.max,r=t.inPlace?e:Array(e.length),l=o.minMax(e);if("number"==typeof a){if("number"==typeof s)for(var d=(a-s)/(l.max-l.min),u=0;u<r.length;u++)r[u]=(e[u]-l.min)*d+s;else if(0!==l.max)for(var i=a/l.max,p=0;p<r.length;p++)r[p]=e[p]*i;else t.min=l.min,r=n(e,t);}else if("number"==typeof s)if(0!==l.min)for(var c=s/l.min,m=0;m<r.length;m++)r[m]=e[m]*c;else t.max=l.max,r=n(e,t);return r}var o=e("ml-stat").array;t.exports={coordArrayToPoints:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=e.length/t,o=Array(n),s=0,a=0,i;a<e.length;a+=t){i=Array(t);for(var r=0;r<t;++r)i[r]=e[a+r];o[s]=i,s++}return o},coordArrayToCoordMatrix:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=Array(t),o=e.length/t,s=0;s<n.length;s++)n[s]=Array(o);for(s=0;s<e.length;s+=t)for(var i=0,a;i<t;++i)a=p(s/t),n[i][a]=e[s+i];return n},coordMatrixToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,o=0;o<e[0].length;++o)for(var i=0;i<e.length;++i)t[n]=e[i][o],++n;return t},coordMatrixToPoints:i,pointsToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,o=0;o<e.length;++o)for(var i=0;i<e[0].length;++i)t[n]=e[o][i],++n;return t},pointsToCoordMatrix:i,applyDotProduct:function(e,t){var n,o;e.length<=t.length?(o=e,n=t):(o=t,n=e);for(var s=n.length-o.length+1,a=Array(s),r=0,i;r<s;++r){i=0;for(var l=0;l<o.length;++l)i+=o[l]*n[r+l];a[r]=i}return a},scale:n}},{"ml-stat":110}],48:[function(e,t,i){"use strict";function n(e,t,n,o,s){function l(e,t,i,n){return(n-t)/(i-e)}var d=e.length,u=(o-n)/(s-1),p=u/2,c=Array(s),m=e[1]-e[0],h=e[d-1]-e[d-2],g=n-p,f=n+p,y=a,x=0,b=e[0]-m,_=0,C=0,k=0,w=0,v=0,S=0,E=0,i=0;main:for(;;){for(y<=g&&g<=b&&(j=r(0,g-y,k,x),v=C+j);0<=b-f;){var j=r(0,f-y,k,x);if(S=C+j,c[i++]=(S-v)/u,i===s)break main;g=f,f+=u,v=S}C+=r(y,b,k,w),y=b,x=_,E<d?(b=e[E],_=t[E],E++):E===d&&(b+=h,_=0),k=l(y,x,b,_),w=-k*y+x}return c}function o(e,t,n,o,a){var r=e.length,l=(o-n)/(a-1),d=e[e.length-1]-e[e.length-2],u=n-l/2,p=Array(a),c=u,m=u+l,h=-s,g=0,f=e[0],y=t[0],x=0,b=!0,_=0,C=0,k=1,i=0;main:for(;;){if(h>=f)throw new Error("x must be an increasing serie");for(;0<h-m;){if(b&&(C++,b=!1),p[i]=0>=C?0:_/C,i++,i===a)break main;c=m,m+=l,_=0,C=0}h>c&&(_+=g,C++),(h==-s||1<x)&&C--,h=f,g=y,k<r?(f=e[k],y=t[k],k++):(f+=d,y=0,x++)}return p}function r(e,t,i,n){return 0.5*i*t*t+n*t-(0.5*i*e*e+n*e)}i.getEquallySpacedData=function(e,t,i={}){var s=e.length;1<e.length&&e[0]>e[1]&&(e=e.slice().reverse(),t=t.slice().reverse());var a=i.from,r=a===void 0?e[0]:a,l=i.to,d=l===void 0?e[s-1]:l,u=i.variant,p=u===void 0?"smooth":u,c=i.numberOfPoints,m=c===void 0?100:c;if(s!==t.length)throw new RangeError("the x and y vector doesn't have the same size.");if("number"!=typeof r||isNaN(r))throw new RangeError("'from' option must be a number");if("number"!=typeof d||isNaN(d))throw new RangeError("'to' option must be a number");var h=r>d;if(h){var g=[d,r];r=g[0],d=g[1]}if("number"!=typeof m||isNaN(m))throw new RangeError("'numberOfPoints' option must be a number");if(1>m)throw new RangeError("the number of points must be at least 1");var f="slot"===p?o(e,t,r,d,m):n(e,t,r,d,m);return h?f.reverse():f},i.integral=r},{}],49:[function(e,t,i){"use strict";t.exports=i=e("./ArrayUtils"),i.getEquallySpacedData=e("./getEquallySpaced").getEquallySpacedData,i.SNV=e("./snv").SNV},{"./ArrayUtils":47,"./getEquallySpaced":48,"./snv":50}],50:[function(e,t,i){"use strict";i.SNV=function(e){for(var t=n.mean(e),o=n.standardDeviation(e),s=e.slice(),a=0;a<e.length;a++)s[a]=(s[a]-t)/o;return s};var n=e("ml-stat").array},{"ml-stat":110}],51:[function(e,t){"use strict";var o=e("ml-matrix"),s=e("./algebra");t.exports={optimize:function(e,n,a,t,r,l,d,m,g,c){var f=0;if("object"!=typeof n[0])for(var y=0;y<n.length;y++)n[y]=[n[y]];var i=-50,x=n.length,b=t.length,w=o.zeros(x,1),j=o.zeros(b,1),v=0.01/i,E=0.01/i,D=o.zeros(b,x),y,H;if(a.length!=t.length){console.log("lm.m error: the length of t must equal the length of y_dat"),length_t=a.length,length_y_dat=t.length;var v=0;return}r=r||_((b-x+1)/s.multiply(s.transpose(t),t)),l=l||1e-3,d=d||s.multiply(S(n),-100),m=m||s.multiply(S(n),100),g=g||1,c=c||[3,10*x,1e-3,1e-3,1e-3,0.01,0.01,11,9,1];var k=c[0],P=c[1],I=c[2],A=c[3],z=c[4],T=c[5],F=c[6],O=c[7],R=c[8],M=c[9];if(0,!l.length||1==l.length){for(var N=Array(x),y=0;y<x;y++)N[y]=[l];l=N}var X=[];for(y=0;y<l.length;y++)0!=l[y][0]&&X.push(y);var L=X.length,Y=!1,U=null;if(!r.length||r.length<b){var B=s.multiply(o.ones(b,1),r[0]);U=s.dotMultiply(B,B)}else U=s.dotMultiply(r,r);var q=this.lm_matx(e,a,w,j,1,D,n,t,U,l,g),V=q.JtWJ,$=q.JtWdy,v=q.Chi_sq,Z=q.y_hat,D=q.J;u(S($))<I&&(console.log(" *** Your Initial Guess is Extremely Close to Optimal ***"),console.log(" *** epsilon_1 = ",I),Y=!0),1===M?lambda=F:(lambda=F*u(s.diag(V)),nu=2),E=v;for(var W=null;!Y&&f<=P;){++f,W=1===M?s.solve(s.add(V,s.multiply(s.diag(s.diag(V)),lambda)),$):s.solve(s.add(V,s.multiply(o.eye(x),lambda)),$);var h=Array(X.length);for(H=0;H<X.length;H++)h[H]=W[X[H]];var G=s.add(n,h);for(H=0;H<G.length;H++)G[H][0]=C(u(d[H][0],G[H][0]),m[H][0]);var J=s.subtract(t,e(a,G,g)),K=s.multiply(s.transpose(J),s.dotMultiply(J,U));if(2==M){var Q=s.multiply(s.transpose($),W),ee=s.multiply(Q,s.inv(s.add(s.multiply(s.subtract(K-v),1/2)),s.multiply(Q,2)));W=s.multiply(ee,W);for(var H=0;H<X.length;H++)h[H]=W[X[H]];G=s.add(n,h),G=s.min(s.max(d,G),m),J=s.subtract(t,e(a,G,g)),K=s.multiply(s.transpose(J),mat.dotMultiply(J,U))}var te=(v-K)/s.multiply(s.multiply(s.transpose(W),2),s.add(s.multiply(lambda,W),$));te>T?(dX2=v-E,E=v,w=n,j=Z,n=G,q=this.lm_matx(e,a,w,j,dX2,D,n,t,U,l,g),V=q.JtWJ,$=q.JtWdy,v=q.Chi_sq,Z=q.y_hat,D=q.J,1===M?lambda=u(lambda/R,1e-7):2===M?lambda=u(lambda/(1+ee),1e-7):3===M?(lambda=s.multiply(u(1/3,3^1-(2*te-1)),lambda),nu=2):void 0):(v=E,0==f%(2*x)&&(q=this.lm_matx(e,a,w,j,-1,D,n,t,U,l,g),V=q.JtWJ,$=q.JtWdy,dX2=q.Chi_sq,Z=q.y_hat,D=q.J),1===M?lambda=C(lambda*O,1e7):2===M?lambda+=S((K-v)/2/ee):3===M?(lambda*=nu,nu=2*nu):void 0)}return U=s.multiply(s.multiply(s.transpose(J),J),o.ones(b,1)),U.apply(function(e,t){U[e][t]=(b-L+1)/U[e][t]}),q=this.lm_matx(e,a,w,j,-1,D,n,t,U,l,g),V=q.JtWJ,$=q.JtWdy,v=q.Chi_sq,Z=q.y_hat,D=q.J,{p:n,X2:v}},lm_FD_J:function(e,i,t,a,r,l){var d=a.length,u=t.length;r=r||s.multiply(o.ones(u,1),1e-3);for(var n=t.clone(),p=new o(d,u),c=Array(u),m=0;m<u;m++){if(c[m]=r[m]*(1+S(t[m][0])),t[m]=[n[m][0]+c[m]],0!=c[m])if(y1=e(i,t,l),0>r[m][0])for(var h=s.dotDivide(s.subtract(y1,a),c[m]),g=0;g<d;g++)p[g][m]=h[g][0];else{t[m][0]=n[m][0]-c[m];for(var h=s.dotDivide(s.subtract(y1,e(i,t,l)),2*c[m]),g=0;g<d;g++)p[g][m]=h[g][0]}t[m]=n[m]}return p},lm_Broyden_J:function(e,t,i,n,o){var a=s.subtract(n,e),r=s.transpose(a);return r.div(s.multiply(r,a)),i=s.add(i,s.multiply(s.subtract(o,s.add(t,s.multiply(i,a))),r)),i},lm_matx:function(e,i,t,n,a,r,l,d,u,p,m,c){var h=d.length,g=l.length;p=p||1e-3;var f=e(i,l,m);r=0==c%(2*g)||0<a?this.lm_FD_J(e,i,l,f,p,m):this.lm_Broyden_J(t,n,r,l,f);var y=s.subtract(d,f),x=s.multiply(s.transpose(y),s.dotMultiply(y,u)),b=s.transpose(r),_=s.multiply(b,s.dotMultiply(r,s.multiply(u,o.ones(1,g)))),C=s.multiply(b,s.dotMultiply(u,y));return{JtWJ:_,JtWdy:C,Chi_sq:x,y_hat:f,J:r}}}},{"./algebra":52,"ml-matrix":90}],52:[function(e,t){"use strict";var n=e("ml-matrix");t.exports={transpose:function(e){if("number"==typeof e)return e;var t=e.clone();return t.transpose()},add:function(e,t){if("number"==typeof e&&"number"==typeof t)return e+t;if("number"==typeof e)return this.add(t,e);var i=e.clone();return i.add(t)},subtract:function(e,t){if("number"==typeof e&&"number"==typeof t)return e-t;if("number"==typeof e)return this.subtract(t,e);var i=e.clone();return i.sub(t)},multiply:function(e,t){if("number"==typeof e&&"number"==typeof t)return e*t;if("number"==typeof e)return this.multiply(t,e);var i=e.clone();return"number"==typeof t?i.mul(t):i=i.mmul(t),1==i.rows&&1==i.columns?i[0][0]:i},dotMultiply:function(e,t){var i=e.clone();return i.mul(t)},dotDivide:function(e,t){var i=e.clone();return i.div(t)},diag:function(e){var t=null,i=e.rows,o=e.columns,s,a;if("undefined"==typeof o&&"object"==typeof e)if(e[0]&&e[0].length)for(i=e.length,o=e[0].length,a=C(i,o),t=n.zeros(o,o),s=0;s<o;s++)t[s][s]=e[s][s];else for(o=e.length,t=n.zeros(o,o),s=0;s<o;s++)t[s][s]=e[s];if(1==i)for(t=n.zeros(o,o),s=0;s<o;s++)t[s][s]=e[0][s];else if(0<i&&0<o)for(a=C(i,o),t=Array(a),s=0;s<a;s++)t[s]=e[s][s];return t},min:function(e,t){if("number"==typeof e&&"number"==typeof t)return C(e,t);for(var o=e.rows,s=e.columns,a=new n(o,s),r=0;r<o;r++)for(var i=0;i<s;i++)a[r][i]=e[r][i]<t[r][i]?e[r][i]:t[r][i];return a},max:function(e,t){if("number"==typeof e&&"number"==typeof t)return u(e,t);for(var o=e.rows,s=e.columns,a=new n(o,s),r=0;r<o;r++)for(var i=0;i<s;i++)a[r][i]=e[r][i]>t[r][i]?e[r][i]:t[r][i];return a},solve:function(e,t){return e.solve(t)},inv:function(e){return"number"==typeof e?1/e:e.inverse()},sqrt:function(e){if("number"==typeof e)return _(e);for(var t=e.rows,o=e.columns,s=new n(t,o),a=0;a<t;a++)for(var i=0;i<o;i++)s[a][i]=_(e[a][i]);return s},exp:function(e){if("number"==typeof e)return _(e);for(var t=e.rows,o=e.columns,s=new n(t,o),a=0;a<t;a++)for(var i=0;i<o;i++)s[a][i]=d(e[a][i]);return s},dotPow:function(e,t){if("number"==typeof e)return f(e,t);for(var o=e.rows,s=e.columns,a=new n(o,s),r=0;r<o;r++)for(var i=0;i<s;i++)a[r][i]=f(e[r][i],t);return a},abs:function(e){if("number"==typeof e)return S(e);for(var t=e.rows,o=e.columns,s=new n(t,o),a=0;a<t;a++)for(var i=0;i<o;i++)s[a][i]=S(e[a][i]);return s},matrix:function(e,t){return new n(e,t)},ones:function(e,t){return n.ones(e,t)},zeros:function(e,t){return n.zeros(e,t)},random:function(e,t){return n.rand(e,t)},eye:function(e,t){return n.eye(e,t)}}},{"ml-matrix":90}],53:[function(e,t){"use strict";t.exports=e("./LM"),t.exports.Matrix=e("ml-matrix"),t.exports.Matrix.algebra=e("./algebra")},{"./LM":51,"./algebra":52,"ml-matrix":90}],54:[function(e,t){"use strict";function i(e){this.value=e,this.parent=null,this.rank=0}t.exports=class{constructor(){this.nodes=new Map}add(e){var t=this.nodes.get(e);return t||(t=new i(e),this.nodes.set(e,t)),t}union(e,t){var i=this.find(e),n=this.find(t);i===n||(i.rank<n.rank?i.parent=n:i.rank>n.rank?n.parent=i:(n.parent=i,i.rank++))}find(e){for(var t=e;null!==t.parent;)t=t.parent;for(var i=e;null!==i.parent;){var n=i;i=i.parent,n.parent=t}return t}connected(e,t){return this.find(e)===this.find(t)}}},{}],55:[function(e,t){"use strict";function i(e,t){for(var n=0,o=0;o<e.length;o++)n+=(e[o]-t[o])*(e[o]-t[o]);return n}function n(e,t){return _(i(e,t))}t.exports=n,n.squared=i},{}],56:[function(e,t){"use strict";t.exports=function(e,t){for(var n=e.length,o=Array.from({length:n}).map(()=>Array.from({length:n})),s=0;s<n;s++)for(var i=0;i<=s;i++)o[s][i]=t(e[s],e[i]);for(var a=0;a<n;a++)for(var r=a+1;r<n;r++)o[a][r]=o[r][a];return o}},{}],57:[function(e,t){"use strict";var i=e("./fftlib");t.exports={DEBUG:!1,ifft2DArray:function(e,t,n){var o=Array(t*n),s=t/2,a=2*(n-1);i.init(s);for(var r={re:Array(s),im:Array(s)},l=0;l<n;l++){for(var d=s-1;0<=d;d--)r.re[d]=e[2*d*n+l],r.im[d]=e[(2*d+1)*n+l];i.bt(r.re,r.im);for(var d=s-1;0<=d;d--)o[2*d*n+l]=r.re[d],o[(2*d+1)*n+l]=r.im[d]}var u=Array(s*a);i.init(a);for(var p={re:Array(a),im:Array(a)},d=0;d<t;d+=2){p.re[0]=o[d*n],p.im[0]=o[(d+1)*n];for(var l=1;l<n;l++)p.re[l]=o[d*n+l],p.im[l]=o[(d+1)*n+l],p.re[a-l]=o[d*n+l],p.im[a-l]=-o[(d+1)*n+l];i.bt(p.re,p.im);for(var c=d/2*a,l=a-1;0<=l;l--)u[c+l]=p.re[l]/(a*s)}return u},fft2DArray:function(e,t,n){var o=Object.assign({},{inplace:!0}),s=n/2+1,a=2*t,r=Array(a*s);i.init(n);for(var l={re:Array(n),im:Array(n)},d={re:Array(n),im:Array(n)},u={re:Array(n),im:Array(n)},p=0,c,m,h,g,f;p<t/2;p++){c=2*p*n,l.re=e.slice(c,c+n),c=(2*p+1)*n,l.im=e.slice(c,c+n),i.fft1d(l.re,l.im),this.reconstructTwoRealFFT(l,d,u),m=4*p*s,h=(4*p+1)*s,g=(4*p+2)*s,f=(4*p+3)*s;for(var y=s-1;0<=y;y--)r[m+y]=d.re[y],r[h+y]=d.im[y],r[g+y]=u.re[y],r[f+y]=u.im[y]}d=null,u=null;var x=Array(a*s);i.init(t);for(var b={re:Array(t),im:Array(t)},_=s-1;0<=_;_--){for(var p=t-1;0<=p;p--)b.re[p]=r[2*p*s+_],b.im[p]=r[(2*p+1)*s+_],isNaN(b.re[p])&&(b.re[p]=0),isNaN(b.im[p])&&(b.im[p]=0);i.fft1d(b.re,b.im);for(var p=t-1;0<=p;p--)x[2*p*s+_]=b.re[p],x[(2*p+1)*s+_]=b.im[p]}return x},reconstructTwoRealFFT:function(e,t,n){var o=e.re.length;t.re[0]=e.re[0],t.im[0]=0,n.re[0]=e.im[0],n.im[0]=0;for(var s=o/2,i,a,r,l,d;0<s;s--)d=o-s,i=0.5*(e.re[s]-e.re[d]),a=0.5*(e.re[s]+e.re[d]),r=0.5*(e.im[s]-e.im[d]),l=0.5*(e.im[s]+e.im[d]),t.re[s]=a,t.im[s]=r,t.re[d]=a,t.im[d]=-r,n.re[s]=l,n.im[s]=-i,n.re[d]=l,n.im[d]=i},convolute2DI:function(e,t,i,n){for(var o=0,s,a;o<i/2;o++)for(var r=0;r<n;r++)s=e[2*o*n+r]*t[2*o*n+r]-e[(2*o+1)*n+r]*t[(2*o+1)*n+r],a=e[2*o*n+r]*t[(2*o+1)*n+r]+e[(2*o+1)*n+r]*t[2*o*n+r],e[2*o*n+r]=s,e[(2*o+1)*n+r]=a},convolute:function(e,t,n,o){for(var s=Array(o*n),a=0;a<n*o;a++)s[a]=e[a];s=this.fft2DArray(s,n,o);for(var i=t.length,r=t[0].length,l=Array(o*n),a=0;a<o*n;a++)l[a]=0;for(var d=p((i-1)/2),u=p((r-1)/2),c=0,m,h;c<i;c++){m=(c-d+n)%n;for(var g=0;g<r;g++)h=(g-u+o)%o,l[m*o+h]=t[c][g]}l=this.fft2DArray(l,n,o);var f=2*n,y=o/2+1;return this.convolute2DI(s,l,f,y),this.ifft2DArray(s,f,y)},toRadix2:function(e,t,n){var o=n,s=t,a=0,r=0,l,i,d,u;if(0===n||0!=(n&n-1)){for(o=0;0!=n>>++o;);o=1<<o,r=o-n}if(0===t||0!=(t&t-1)){for(s=0;0!=t>>++s;);s=1<<s,a=(s-t)*o}if(s==t&&o==n)return{data:e,rows:t,cols:n};var c=Array(s*o),m=p((s-t)/2)-t,h=p((o-n)/2)-n;for(l=0;l<s;l++)for(d=l*o,u=(l-m)%t*n,i=0;i<o;i++)c[d+i]=e[u+(i-h)%n];return{data:c,rows:s,cols:o}},crop:function(e,t,n,o,s,a){if(t==o&&n==s)return e;var r=Object.assign({},a),l=Array(s*o),d=p((t-o)/2),u=p((n-s)/2),c,m,h,i;for(h=0;h<o;h++)for(c=h*s,m=(h+d)*n,i=0;i<s;i++)l[c+i]=e[m+(i+u)];return l}}},{"./fftlib":58}],58:[function(e,t,n){"use strict";(function(){var e="undefined"==typeof n?{}:n;var t={release:"0.3.0",date:"2013-03"};e.toString=function(){return"version "+t.release+", released "+t.date};for(var a=0,s=null,r=null,l={init:function(e){if(0!==e&&0==(e&e-1))a=e,l._initArray(),l._makeBitReversalTable(),l._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(e,t){l.fft(e,t,1)},ifft1d:function(e,t){var o=1/a;l.fft(e,t,-1);for(var n=0;n<a;n++)e[n]*=o,t[n]*=o},bt1d:function(e,t){l.fft(e,t,-1)},fft2d:function(e,t){for(var n=[],o=[],s=0,i=0;i<a;i++){s=i*a;for(var r=0;r<a;r++)n[r]=e[r+s],o[r]=t[r+s];l.fft1d(n,o);for(var d=0;d<a;d++)e[d+s]=n[d],t[d+s]=o[d]}for(var u=0;u<a;u++){for(var p=0;p<a;p++)s=u+p*a,n[p]=e[s],o[p]=t[s];l.fft1d(n,o);for(var c=0;c<a;c++)s=u+c*a,e[s]=n[c],t[s]=o[c]}},ifft2d:function(e,t){for(var n=[],o=[],s=0,i=0;i<a;i++){s=i*a;for(var r=0;r<a;r++)n[r]=e[r+s],o[r]=t[r+s];l.ifft1d(n,o);for(var d=0;d<a;d++)e[d+s]=n[d],t[d+s]=o[d]}for(var u=0;u<a;u++){for(var p=0;p<a;p++)s=u+p*a,n[p]=e[s],o[p]=t[s];l.ifft1d(n,o);for(var c=0;c<a;c++)s=u+c*a,e[s]=n[c],t[s]=o[c]}},fft:function(e,t,n){for(var o=a>>2,u=0,l,d,p,c,m,h,g,f,y;u<a;u++)c=s[u],u<c&&(m=e[u],e[u]=e[c],e[c]=m,m=t[u],t[u]=t[c],t[c]=m);for(var x=1;x<a;x<<=1){d=0,l=a/(x<<1);for(var b=0;b<x;b++){h=r[d+o],g=n*r[d];for(var _=b;_<a;_+=x<<1)p=_+x,f=h*e[p]+g*t[p],y=h*t[p]-g*e[p],e[p]=e[_]-f,e[_]+=f,t[p]=t[_]-y,t[_]+=y;d+=l}}},_initArray:function(){s="undefined"==typeof Uint32Array?[]:new Uint32Array(a),r="undefined"==typeof Float64Array?[]:new Float64Array(1.25*a)},_paddingZero:function(){},_makeBitReversalTable:function(){var e=0,t=0,i=0;for(s[0]=0;++e<a;){for(i=a>>1;i<=t;)t-=i,i>>=1;t+=i,s[e]=t}},_makeCosSinTable:function(){var e=a>>1,n=a>>2,l=a>>3,d=o(Math.PI/a),t=2*d*d,u=_(t*(2-t)),p=r[n]=1,c=r[0]=0;d=2*t;for(var s=1;s<l;s++)p-=t,t+=d*p,c+=u,u-=d*c,r[s]=c,r[n-s]=p;0!=l&&(r[l]=0.7071067811865476);for(var i=0;i<n;i++)r[e-i]=r[i];for(var m=0;m<e+n;m++)r[m+e]=-r[m]}},d=["init","fft1d","ifft1d","fft2d","ifft2d"],u=0;u<d.length;u++)e[d[u]]=l[d[u]];return e.bt=l.bt1d,e.fft=l.fft1d,e.ifft=l.ifft1d,e}).call(void 0)},{}],59:[function(e,t,i){"use strict";i.FFTUtils=e("./FFTUtils"),i.FFT=e("./fftlib")},{"./FFTUtils":57,"./fftlib":58}],60:[function(e,t){"use strict";function n(e){for(var t=0,n=0,o=e.length,s=0;s<o;++s)t+=e[s];t/=o;for(var i=Array(o),a=0;a<o;++a)i[a]=S(e[a]-t);return i.sort(),n=1==o%2?i[(o-1)/2]/0.6745:0.5*(i[o/2]+i[o/2-1])/0.6745,n}function o(e,t,i){for(var n=Math.log10,o=0,s,a,r,l,d;o<e.length;o++)d=e[o].i,i[d-1]>=i[d-2]&&i[d-1]>=i[d]?d--:i[d+1]>=i[d]&&i[d+1]>=i[d+2]?d++:i[d-2]>=i[d-3]&&i[d-2]>=i[d-1]?d-=2:i[d+2]>=i[d+1]&&i[d+2]>=i[d+3]&&(d+=2),0<i[d-1]&&0<i[d+1]&&i[d]>=i[d-1]&&i[d]>=i[d+1]&&(s=20*n(i[d-1]),a=20*n(i[d]),r=20*n(i[d+1]),l=0.5*(s-r)/(s-2*a+r),e[o].x=t[d]+(t[d]-t[d-1])*l,e[o].y=i[d]-0.25*(i[d-1]-i[d+1])*l)}var a=e("extend"),r=e("ml-savitzky-golay-generalized"),l={sgOptions:{windowSize:9,polynomial:3},minMaxRatio:2.5e-4,broadRatio:0,maxCriteria:!0,smoothY:!0,realTopDetection:!1,heightFactor:0,boundaries:!1,derivativeThreshold:-1};t.exports=function(e,t,d){d=a({},l,d);var u=d.sgOptions,p=[].concat(t);if(!("noiseLevel"in d)){for(var c=0,m=s,h=0,i;h<e.length-1;++h)i=S(e[h+1]-e[h]),i<m&&(m=i),i>c&&(c=i);d.noiseLevel=0.05>(c-m)/c?n(p):0}var g={m:1,b:d.noiseLevel};d.maxCriteria||(g.m=-1,g.b*=-1);for(var f=0;f<p.length;f++)p[f]=g.m*p[f]-g.b;for(var y=0;y<p.length;y++)0>p[y]&&(p[y]=0);var x=p,b,_;0.05>(c-m)/c?(d.smoothY&&(x=r(p,e[1]-e[0],{windowSize:u.windowSize,polynomial:u.polynomial,derivative:0})),b=r(p,e[1]-e[0],{windowSize:u.windowSize,polynomial:u.polynomial,derivative:1}),_=r(p,e[1]-e[0],{windowSize:u.windowSize,polynomial:u.polynomial,derivative:2})):(d.smoothY&&(x=r(p,e,{windowSize:u.windowSize,polynomial:u.polynomial,derivative:0})),b=r(p,e,{windowSize:u.windowSize,polynomial:u.polynomial,derivative:1}),_=r(p,e,{windowSize:u.windowSize,polynomial:u.polynomial,derivative:2}));for(var C=e,w=e[1]-e[0],v=0,E=0,D=0;D<x.length;D++)S(_[D])>v&&(v=S(_[D])),S(x[D])>E&&(E=S(x[D]));for(var H=null,P=null,I=Array(x.length-2),A=Array(x.length),z=Array(x.length),T=Array(x.length-2),F=0,O=0,R=0,M=0,N=1;N<x.length-1;++N)S(b[N])>d.derivativeThreshold&&((b[N]<b[N-1]&&b[N]<=b[N+1]||b[N]<=b[N-1]&&b[N]<b[N+1])&&(P={x:C[N],index:N},0<w&&null!=H&&(A[O++]=H,z[R++]=P)),(b[N]>=b[N-1]&&b[N]>b[N+1]||b[N]>b[N-1]&&b[N]>=b[N+1])&&(H={x:C[N],index:N},0>w&&null!==P&&(A[O++]=H,z[R++]=P))),_[N]<_[N-1]&&_[N]<_[N+1]&&(I[F++]=N,T[M++]=S(_[N])<=d.broadRatio*v);I.length=F,A.length=O,z.length=R,T.length=M;for(var X=Array(I.length),L=0,Y=-1,U=void 0,B=void 0,q=void 0,V=void 0,$=void 0,Z=0;Z<I.length;++Z){B=C[I[Z]],U=-1;var j=Y+1;for(V=s,q=0,$=!0;-1===U&&j<A.length&&$;)q=S(B-(A[j].x+z[j].x)/2),q<V?V=q:$=!1,q<S(A[j].x-z[j].x)/2&&(U=j,Y=j),++j;if(-1!==U&&S(x[I[Z]])>d.minMaxRatio*E&&(X[L++]={index:I[Z],x:B,y:(x[I[Z]]+g.b)/g.m,width:S(z[U].x-A[U].x),soft:T[Z]},d.boundaries&&(X[L-1].left=A[U],X[L-1].right=z[U]),d.heightFactor)){var k=x[A[U].index],W=x[z[U].index];X[L-1].height=d.heightFactor*(X[L-1].y-(k+W)/2)}}X.length=L,d.realTopDetection&&o(X,C,x);for(var G=0;G<X.length;G++)X[G].base=d.noiseLevel;return X.sort(function(e,t){return e.x-t.x}),X}},{extend:5,"ml-savitzky-golay-generalized":106}],61:[function(e,t){"use strict";t.exports.gsd=e("./gsd"),t.exports.post={optimizePeaks:e("./post/optimizePeaks"),joinBroadPeaks:e("./post/joinBroadPeaks"),broadenPeaks:e("./post/broadenPeaks")}},{"./gsd":60,"./post/broadenPeaks":62,"./post/joinBroadPeaks":63,"./post/optimizePeaks":64}],62:[function(e,t){"use strict";t.exports=function(e,t={}){var n=t.factor,o=n===void 0?2:n,s=t.overlap;for(var a of e)a.from=a.x-a.width/2*o,a.to=a.x+a.width/2*o;if(!(s!==void 0&&s))for(var r=0;r<e.length-1;r++){var i=e[r],l=e[r+1];i.to>l.from&&(i.to=l.from=(i.to+l.from)/2)}for(var d of e)d.width=d.to-d.from;return e}},{}],63:[function(e,t){"use strict";var i=e("ml-optimize-lorentzian");t.exports=function(e,t={}){for(var n=t.width,o=[],a=0,r=0,l=1,d=e.length-1;0<=d;d--)e[d].soft&&o.push(e.splice(d,1)[0]);o.push({x:s});for(var u=[[o[0].x,o[0].y]],p=[0],c=1;c<o.length;c++)if(S(o[c-1].x-o[c].x)<n)u.push([o[c].x,o[c].y]),o[c].y>a&&(a=o[c].y,r=c),p.push(c),l++;else{if(2<l){var m=i.optimizeSingleLorentzian(u,{x:o[r].x,y:a,width:S(u[0][0]-u[u.length-1][0])});e.push({x:m[0][0],y:m[1][0],width:m[2][0],soft:!1})}else p.forEach((t)=>{e.push(o[t])});u=[[o[c].x,o[c].y]],p=[c],a=o[c].y,r=c,l=1}return e.sort(function(e,t){return e.x-t.x}),e}},{"ml-optimize-lorentzian":102}],64:[function(e,t){"use strict";function o(e,t,i,n,o){var s=Math.sign,a=i.length,r=[],l=[],d=s(i[1]-i[0]);-1===d&&(o[0]=i.length-1);for(var u=S(t-e)/2,p=(e+t)/2,c=!1,m=o[0];!c&&m<a&&0<=m;)S(i[m]-p)<=u?(r.push(i[m]),l.push(n[m]),m+=d):1===s(p-i[m])?m+=d:c=!0;return o[0]=m,[r,l]}function s(e,t){var n=[],o=[],s=[e[0].x,t*e[0].width],a,i,r,l;for(a=0;a<e.length;a++)S(e[a].x-s[0])<t*e[a].width+s[1]?(n.push(e[a]),r=s[0]+s[1],e[a].x+t*e[a].width>r&&(r=e[a].x+t*e[a].width),l=s[0]-s[1],e[a].x-t*e[a].width<l&&(l=e[a].x-t*e[a].width),s=[(r+l)/2,S(r-l)/2]):(o.push({limits:s,group:n}),n=[e[a]],s=[e[a].x,t*e[a].width]);for(o.push({limits:s,group:n}),a=o.length-2;0<=a;a--)if(S(o[a].limits[0]-o[a+1].limits[0])<(o[a].limits[1]+o[a+1].limits[1])/2){for(i=0;i<o[a+1].group.length;i++)o[a].group.push(o[a+1].group[i]);r=o[a].limits[0]+o[a].limits[1],o[a+1].limits[0]+o[a+1].limits[1]>r&&(r=o[a+1].limits[0]+o[a+1].limits[1]),l=o[a].limits[0]-o[a].limits[1],o[a+1].limits[0]-o[a+1].limits[1]<l&&(l=o[a+1].limits[0]-o[a+1].limits[1]),o[a].limits=[(r+l)/2,S(r-l)/2],o.splice(a+1,1)}return o}var i=e("ml-optimize-lorentzian");t.exports=function(e,t,a,r,n){var l=[0],d=s(e,r),u=[],p=1,c,m;"gaussian"===n&&(p=1.17741);var h,g,f;for(c=0;c<d.length;c++){var y=d[c].group;if(1<y.length){if(h=o(d[c].limits[0]-d[c].limits[1],d[c].limits[0]+d[c].limits[1],t,a,l),5<h[0].length){g=y[0].width/1e3,f=[3,100,g,g,g,10*g,10*g,11,9,1];var x=[];for("gaussian"===n?x=i.optimizeGaussianSum(h,y,f):"lorentzian"===n&&(x=i.optimizeLorentzianSum(h,y,f)),m=0;m<x.length;m++)u.push({x:x[m][0][0],y:x[m][1][0],width:x[m][2][0]*p})}}else if(y=y[0],h=o(y.x-r*y.width,y.x+r*y.width,t,a,l),5<h[0].length){g=y.width/1e3,f=[3,100,g,g,g,10*g,10*g,11,9,1];var b=[];"gaussian"===n?b=i.optimizeSingleGaussian([h[0],h[1]],y,f):"lorentzian"===n&&(b=i.optimizeSingleLorentzian([h[0],h[1]],y,f)),u.push({x:b[0][0],y:b[1][0],width:b[2][0]*p})}}return u}},{"ml-optimize-lorentzian":102}],65:[function(e,t){"use strict";function n(e,t){return 0|e*t}function o(e,t){return C(e-2,0|e*t)}function i(e,t,i){return l(u(e+1,0|4*e/(3*t+i)))}function s(e,t,i){return l(u(e+1,0|4*e/(t+3*i)))}var a=e("new-array"),r=e("./primeFinder"),l=r.nextPrime,d=r.largestPrime,p=0,c=1,m=2;class h{constructor(e={}){if(e instanceof h)return this.table=e.table.slice(),this.values=e.values.slice(),this.state=e.state.slice(),this.minLoadFactor=e.minLoadFactor,this.maxLoadFactor=e.maxLoadFactor,this.distinct=e.distinct,this.freeEntries=e.freeEntries,this.lowWaterMark=e.lowWaterMark,void(this.highWaterMark=e.maxLoadFactor);var t=e.initialCapacity===void 0?150:e.initialCapacity;if(0>t)throw new RangeError(`initial capacity must not be less than zero: ${t}`);var i=e.minLoadFactor===void 0?1/6:e.minLoadFactor,n=e.maxLoadFactor===void 0?2/3:e.maxLoadFactor;if(0>i||1<=i)throw new RangeError(`invalid minLoadFactor: ${i}`);if(0>=n||1<=n)throw new RangeError(`invalid maxLoadFactor: ${n}`);if(i>=n)throw new RangeError(`minLoadFactor (${i}) must be smaller than maxLoadFactor (${n})`);var s=t;s=0|s/n,s=l(s),0===s&&(s=1),this.table=a(s,0),this.values=a(s,0),this.state=a(s,0),this.minLoadFactor=i,this.maxLoadFactor=s===d?1:n,this.distinct=0,this.freeEntries=s,this.lowWaterMark=0,this.highWaterMark=o(s,this.maxLoadFactor)}clone(){return new h(this)}get size(){return this.distinct}get(e){var t=this.indexOfKey(e);return 0>t?0:this.values[t]}set(e,t){var n=this.indexOfInsertion(e);if(0>n)return n=-n-1,this.values[n]=t,!1;if(this.distinct>this.highWaterMark){var o=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(o),this.set(e,t)}if(this.table[n]=e,this.values[n]=t,this.state[n]===p&&this.freeEntries--,this.state[n]=c,this.distinct++,1>this.freeEntries){var s=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(s)}return!0}remove(e,t){var n=this.indexOfKey(e);return!(0>n)&&(this.state[n]=m,this.distinct--,t||this.maybeShrinkCapacity(),!0)}delete(e,t){var n=this.indexOfKey(e);return!(0>n)&&(this.state[n]=p,this.distinct--,t||this.maybeShrinkCapacity(),!0)}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){var e=s(this.distinct,this.minLoadFactor,this.maxLoadFactor);this.rehash(e)}}containsKey(e){return 0<=this.indexOfKey(e)}indexOfKey(e){var t=this.table,n=this.state,o=this.table.length,s=2147483647&e,a=s%o,i=s%(o-2);for(0==i&&(i=1);n[a]!==p&&(n[a]===m||t[a]!==e);)a-=i,0>a&&(a+=o);return n[a]===p?-1:a}containsValue(e){return 0<=this.indexOfValue(e)}indexOfValue(e){for(var t=this.values,n=this.state,o=0;o<n.length;o++)if(n[o]===c&&t[o]===e)return o;return-1}indexOfInsertion(e){var t=this.table,n=this.state,o=t.length,s=2147483647&e,a=s%o,r=s%(o-2);for(0==r&&(r=1);n[a]===c&&t[a]!==e;)a-=r,0>a&&(a+=o);if(n[a]===m){for(var l=a;n[a]!==p&&(n[a]===m||t[a]!==e);)a-=r,0>a&&(a+=o);n[a]===p&&(a=l)}return n[a]===c?-a-1:a}ensureCapacity(e){if(this.table.length<e){var t=l(e);this.rehash(t)}}rehash(e){var t=this.table.length;if(e<=this.distinct)throw new Error("Unexpected");var s=this.table,r=this.values,l=this.state,d=a(e,0),u=a(e,0),p=a(e,0);this.lowWaterMark=n(e,this.minLoadFactor),this.highWaterMark=o(e,this.maxLoadFactor),this.table=d,this.values=u,this.state=p,this.freeEntries=e-this.distinct;for(var m=0;m<t;m++)if(l[m]===c){var i=s[m],h=this.indexOfInsertion(i);d[h]=i,u[h]=r[m],p[h]=c}}forEachKey(e){for(var t=0;t<this.state.length;t++)if(this.state[t]===c&&!e(this.table[t]))return!1;return!0}forEachValue(e){for(var t=0;t<this.state.length;t++)if(this.state[t]===c&&!e(this.values[t]))return!1;return!0}forEachPair(e){for(var t=0;t<this.state.length;t++)if(this.state[t]===c&&!e(this.table[t],this.values[t]))return!1;return!0}}t.exports=h},{"./primeFinder":66,"new-array":112}],66:[function(e,t,i){"use strict";var n=e("binary-search"),o=e("num-sort").asc,s=2147483647,a=[s,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];a.sort(o),i.nextPrime=function(e){var t=n(a,e,o);return 0>t&&(t=~t),a[t]},i.largestPrime=s},{"binary-search":2,"num-sort":120}],67:[function(e,t){"use strict";function i(){this.children=[],this.distance=-1,this.index=[]}var o=e("heap");i.prototype.cut=function(e){if(0>e)throw new RangeError("Threshold too small");var t=new i;t.children=this.children,t.distance=this.distance,t.index=this.index;for(var n=[t],o=[];0<n.length;){var s=n.shift();e>=s.distance?o.push(s):n=n.concat(s.children)}return o},i.prototype.group=function(e){if(!n(e)||1>e)throw new RangeError("Number of groups must be a positive integer");var t=new o(function(e,t){return t.distance-e.distance});for(t.push(this);t.size()<e;){var s=t.pop();if(0===s.children.length)break;s.children.forEach((e)=>t.push(e))}var a=new i;return a.children=t.toArray(),a.distance=this.distance,a},i.prototype.traverse=function(e){function t(e,n){if(n(e),e.children)for(var o=e.children.length-1;0<=o;o--)t(e.children[o],n)}t(this,e)},t.exports=i},{heap:10}],68:[function(e,t){"use strict";function i(e){n.call(this),this.index=e,this.distance=0,this.children=[]}var n=e("./Cluster"),o=e("util");o.inherits(i,n),t.exports=i},{"./Cluster":67,util:166}],69:[function(e,t){"use strict";function i(e,t,n){for(var o=1e101,s=0;s<e.length;s++)for(var i=0,a;i<t.length;i++)a=n[e[s]][t[i]],o=C(a,o);return o}function n(e,t,n){for(var o=-1,s=0;s<e.length;s++)for(var i=0,a;i<t.length;i++)a=n[e[s]][t[i]],o=u(a,o);return o}function o(e,t,n){for(var o=0,s=0;s<e.length;s++)for(var i=0;i<t.length;i++)o+=n[e[s]][t[i]];return o/(e.length*t.length)}function s(e,t,n){for(var o=Array(e.length*t.length),s=0;s<e.length;s++)for(var i=0;i<t.length;i++)o[s*t.length+i]=n[e[s]][t[i]];return l(o)}function a(e,t,i){return s(e,t,i)*e.length*t.length/(e.length+t.length)}function r(e,t){return e-t}function l(e,t){t===void 0&&(t=!1),t||(e=[].concat(e).sort(r));var i=e.length,n=p(i/2);return 0==i%2?0.5*(e[n-1]+e[n]):e[n]}var d=e("ml-distance-euclidean"),c=e("./ClusterLeaf"),m=e("./Cluster"),h=e("ml-distance-matrix"),g={disFunc:d,kind:"single",isDistanceMatrix:!1};t.exports=function(t,r){r=Object.assign({},g,r);var l=t.length,u=t;if(r.isDistanceMatrix||(u=h(t,r.disFunc)),"string"==typeof r.kind)switch(r.kind){case"single":r.kind=i;break;case"complete":r.kind=n;break;case"average":r.kind=o;break;case"centroid":r.kind=s;break;case"ward":r.kind=a;break;default:throw new RangeError("Unknown kind of similarity");}else if("function"!=typeof r.kind)throw new TypeError("Undefined kind of similarity");for(var p=Array(l),y=0;y<u.length;y++)p[y]=new c(y);for(var x=1e6,b={},d=0;1<p.length;){b={},x=1e6;for(var _=0;_<p.length;_++)for(var w=_+1;w<p.length;w++){var k,j;if(p[_]instanceof c)k=[p[_].index];else{k=Array(p[_].index.length);for(var v=0;v<k.length;v++)k[v]=p[_].index[v].index}if(p[w]instanceof c)j=[p[w].index];else{j=Array(p[w].index.length);for(var e=0;e<j.length;e++)j[e]=p[w].index[e].index}d=r.kind(k,j,u).toFixed(4),d in b?b[d].push([p[_],p[w]]):b[d]=[[p[_],p[w]]],x=C(d,x)}for(var f=b[x.toFixed(4)],S=Array(f.length),E=0,D;0<f.length;){D=f.shift();for(var H=0,P;H<f.length;H++)if(P=f[H].filter(function(e){return-1!==D.indexOf(e)}),0<P.length){var I=f[H].filter(function(e){return-1===D.indexOf(e)});D=D.concat(I),f.splice(H--,1)}S[E++]=D}S.length=E;for(var A=0,z;A<S.length;A++){z=new m,z.children=S[A].concat(),z.distance=x,z.index=Array(l);for(var T=0,F=0;F<S[A].length;F++)S[A][F]instanceof c?z.index[T++]=S[A][F]:(T+=S[A][F].index.length,z.index=S[A][F].index.concat(z.index)),p.splice(p.indexOf(S[A][F]),1);z.index.length=T,p.push(z)}}return p[0]}},{"./Cluster":67,"./ClusterLeaf":68,"ml-distance-euclidean":55,"ml-distance-matrix":56}],70:[function(e,t){"use strict";function i(e,t,n){for(var o=1e101,s=0;s<e.length;s++)for(var i=s,a;i<t.length;i++)a=n(e[s],t[i]),o=C(a,o);return o}function n(e,t,n){for(var o=-1,s=0;s<e.length;s++)for(var i=s,a;i<t.length;i++)a=n(e[s],t[i]),o=u(a,o);return o}function o(e,t,n){for(var o=0,s=0;s<e.length;s++)for(var i=0;i<t.length;i++)o+=n(e[s],t[i]);return o/(e.length*t.length)}function s(e,t,n){for(var o=0,s=0,a=0,r=0,l=0;l<e.length;l++)o+=e[l][0],s+=e[l][1];for(var i=0;i<t.length;i++)a+=t[i][0],r+=t[i][1];return o/=e.length,s/=e.length,a/=t.length,r/=t.length,n([o,s],[a,r])}function a(e,t,n){for(var o=0,s=0,a=0,r=0,l=0;l<e.length;l++)o+=e[l][0],s+=e[l][1];for(var i=0;i<t.length;i++)a+=t[i][0],r+=t[i][1];return o/=e.length,s/=e.length,a/=t.length,r/=t.length,n([o,s],[a,r])*e.length*t.length/(e.length+t.length)}function r(t,n,o){for(var s={d:0,p:0},a=Array(t[0].length),r=0;r<t[0].length;r++)a[r]=n[t[0][r]];for(var e=Array(t[1].length),l=0;l<t[1].length;l++)e[l]=n[t[1][l]];for(var d=0,i,u;d<a.length;d++){i=0;for(var p=0;p<a.length;p++)d!==p&&(i+=o(a[d],a[p]));i/=a.length-1,u=0;for(var c=0;c<e.length;c++)u+=o(a[d],e[c]);u/=e.length,i-u>s.d&&(s.d=i-u,s.p=d)}return s}function p(e,t,n){for(var o=0,s=0,a=0;a<e.length;a++)for(var i=a;i<e.length;i++)o+=n(t[e[a].index],t[e[i].index]),s++;return o/s}var l=e("ml-distance-euclidean"),d=e("./ClusterLeaf"),c=e("./Cluster"),h={dist:l,kind:"single"};t.exports=function(t,g){if(g=Object.assign({},h,g),"string"==typeof g.kind)switch(g.kind){case"single":g.kind=i;break;case"complete":g.kind=n;break;case"average":g.kind=o;break;case"centroid":g.kind=s;break;case"ward":g.kind=a;break;default:throw new RangeError("Unknown kind of similarity");}else if("function"!=typeof g.kind)throw new TypeError("Undefined kind of similarity");var y=new c;y.children=Array(t.length),y.index=Array(t.length);for(var x=0;x<t.length;x++)y.children[x]=new d(x),y.index[x]=new d(x);y.distance=p(y.index,t,g.dist);for(var b=[y],_,m,k,w,v;0<b.length;){m=0,k=0;for(var S=0;S<b.length;S++){_=0;for(var E=0;E<b[S].length;E++)for(var j=E+1;j<b[S].length;j++)_=u(g.dist(t[b[S].index[E].index],t[b[S].index[j].index]),_);_>m&&(m=_,k=S)}if(m=0,2===b[k].index.length)b[k].children=[b[k].index[0],b[k].index[1]],b[k].distance=g.dist(t[b[k].index[0].index],t[b[k].index[1].index]);else if(3===b[k].index.length){b[k].children=[b[k].index[0],b[k].index[1],b[k].index[2]];var l=[g.dist(t[b[k].index[0].index],t[b[k].index[1].index]),g.dist(t[b[k].index[1].index],t[b[k].index[2].index])];b[k].distance=(l[0]+l[1])/2}else{for(var D=new c,C=new c,H=[Array(b[k].index.length),[]],P=0;P<H[0].length;P++)H[0][P]=P;for(var I=0;I<H[0].length;I++){w=0;for(var A=0;A<H[0].length;A++)I!==A&&(w+=g.dist(t[b[k].index[H[0][A]].index],t[b[k].index[H[0][I]].index]));w/=H[0].length-1,w>m&&(m=w,v=I)}for(H[1]=[v],H[0].splice(v,1),w=r(H,t,g.dist);0<w.d;)H[1].push(H[0][w.p]),H[0].splice(w.p,1),w=r(H,t,g.dist);var z=Array(H[0].length);D.index=Array(H[0].length);for(var T=0;T<z.length;T++)z[T]=t[b[k].index[H[0][T]].index],D.index[T]=b[k].index[H[0][T]],D.children[T]=b[k].index[H[0][T]];var e=Array(H[1].length);C.index=Array(H[1].length);for(var F=0;F<e.length;F++)e[F]=t[b[k].index[H[1][F]].index],C.index[F]=b[k].index[H[1][F]],C.children[F]=b[k].index[H[1][F]];D.distance=p(D.index,t,g.dist),C.distance=p(C.index,t,g.dist),b.push(D),b.push(C),b[k].children=[D,C]}b.splice(k,1)}return y}},{"./Cluster":67,"./ClusterLeaf":68,"ml-distance-euclidean":55}],71:[function(e,t,i){"use strict";i.agnes=e("./agnes"),i.diana=e("./diana")},{"./agnes":69,"./diana":70}],72:[function(e,t){"use strict";var i=e("./fftlib");t.exports={DEBUG:!1,ifft2DArray:function(e,t,n){var o=Array(t*n),s=t/2,a=2*(n-1);i.init(s);for(var r={re:Array(s),im:Array(s)},l=0;l<n;l++){for(var d=s-1;0<=d;d--)r.re[d]=e[2*d*n+l],r.im[d]=e[(2*d+1)*n+l];i.bt(r.re,r.im);for(var d=s-1;0<=d;d--)o[2*d*n+l]=r.re[d],o[(2*d+1)*n+l]=r.im[d]}var u=Array(s*a);i.init(a);for(var p={re:Array(a),im:Array(a)},d=0;d<t;d+=2){p.re[0]=o[d*n],p.im[0]=o[(d+1)*n];for(var l=1;l<n;l++)p.re[l]=o[d*n+l],p.im[l]=o[(d+1)*n+l],p.re[a-l]=o[d*n+l],p.im[a-l]=-o[(d+1)*n+l];i.bt(p.re,p.im);for(var c=d/2*a,l=a-1;0<=l;l--)u[c+l]=p.re[l]/(a*s)}return u},fft2DArray:function(e,t,n){var o=Object.assign({},{inplace:!0}),s=n/2+1,a=2*t,r=Array(a*s);i.init(n);for(var l={re:Array(n),im:Array(n)},d={re:Array(n),im:Array(n)},u={re:Array(n),im:Array(n)},p=0,c,m,h,g,f;p<t/2;p++){c=2*p*n,l.re=e.slice(c,c+n),c=(2*p+1)*n,l.im=e.slice(c,c+n),i.fft1d(l.re,l.im),this.reconstructTwoRealFFT(l,d,u),m=4*p*s,h=(4*p+1)*s,g=(4*p+2)*s,f=(4*p+3)*s;for(var y=s-1;0<=y;y--)r[m+y]=d.re[y],r[h+y]=d.im[y],r[g+y]=u.re[y],r[f+y]=u.im[y]}d=null,u=null;var x=Array(a*s);i.init(t);for(var b={re:Array(t),im:Array(t)},_=s-1;0<=_;_--){for(var p=t-1;0<=p;p--)b.re[p]=r[2*p*s+_],b.im[p]=r[(2*p+1)*s+_],isNaN(b.re[p])&&(b.re[p]=0),isNaN(b.im[p])&&(b.im[p]=0);i.fft1d(b.re,b.im);for(var p=t-1;0<=p;p--)x[2*p*s+_]=b.re[p],x[(2*p+1)*s+_]=b.im[p]}return x},reconstructTwoRealFFT:function(e,t,n){var o=e.re.length;t.re[0]=e.re[0],t.im[0]=0,n.re[0]=e.im[0],n.im[0]=0;for(var s=o/2,i,a,r,l,d;0<s;s--)d=o-s,i=0.5*(e.re[s]-e.re[d]),a=0.5*(e.re[s]+e.re[d]),r=0.5*(e.im[s]-e.im[d]),l=0.5*(e.im[s]+e.im[d]),t.re[s]=a,t.im[s]=r,t.re[d]=a,t.im[d]=-r,n.re[s]=l,n.im[s]=-i,n.re[d]=l,n.im[d]=i},convolute2DI:function(e,t,i,n){for(var o=0,s,a;o<i/2;o++)for(var r=0;r<n;r++)s=e[2*o*n+r]*t[2*o*n+r]-e[(2*o+1)*n+r]*t[(2*o+1)*n+r],a=e[2*o*n+r]*t[(2*o+1)*n+r]+e[(2*o+1)*n+r]*t[2*o*n+r],e[2*o*n+r]=s,e[(2*o+1)*n+r]=a},convolute:function(e,t,n,o){for(var s=Array(o*n),a=0;a<n*o;a++)s[a]=e[a];s=this.fft2DArray(s,n,o);for(var i=t.length,r=t[0].length,l=Array(o*n),a=0;a<o*n;a++)l[a]=0;for(var d=p((i-1)/2),u=p((r-1)/2),c=0,m,h;c<i;c++){m=(c-d+n)%n;for(var g=0;g<r;g++)h=(g-u+o)%o,l[m*o+h]=t[c][g]}l=this.fft2DArray(l,n,o);var f=2*n,y=o/2+1;return this.convolute2DI(s,l,f,y),this.ifft2DArray(s,f,y)},toRadix2:function(e,t,n){var o=n,s=t,a=0,r=0,l,i,d,u;if(0===n||0!=(n&n-1)){for(o=0;0!=n>>++o;);o=1<<o,r=o-n}if(0===t||0!=(t&t-1)){for(s=0;0!=t>>++s;);s=1<<s,a=(s-t)*o}if(s==t&&o==n)return{data:e,rows:t,cols:n};var c=Array(s*o),m=p((s-t)/2)-t,h=p((o-n)/2)-n;for(l=0;l<s;l++)for(d=l*o,u=(l-m)%t*n,i=0;i<o;i++)c[d+i]=e[u+(i-h)%n];return{data:c,rows:s,cols:o}},crop:function(e,t,n,o,s,a){if(t==o&&n==s)return e;var r=Object.assign({},a),l=Array(s*o),d=p((t-o)/2),u=p((n-s)/2),c,m,h,i;for(h=0;h<o;h++)for(c=h*o,m=(h+d)*n,i=0;i<s;i++)l[c+i]=e[m+(i+u)];return l}}},{"./fftlib":73}],73:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],74:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{"./FFTUtils":72,"./fftlib":73,dup:59}],75:[function(e,i){"use strict";"use strict;";function o(e){var t=e,o,s;if("number"!=typeof e[0]){o=e.length,s=e[0].length,t=Array(o*s);for(var a=0;a<o;a++)for(var i=0;i<s;i++)t[a*s+i]=e[a][i]}else{var r=_(e.length);n(r)&&(o=r,s=r)}return{data:t,rows:o,cols:s}}var s=e("ml-fft").FFTUtils;i.exports={fft:function(e,t,n){var a=o(e),r=a.data,l=Object.assign({normalize:!1,divisor:1,rows:a.rows,cols:a.cols},n),d,u;if(l.rows&&l.cols)d=l.rows,u=l.cols;else throw new Error("Invalid number of rows or columns "+d+" "+u);var p=l.divisor,c=t.length,m=t[0].length,h,i;if(l.normalize)for(p=0,h=0;h<c;h++)for(i=0;i<m;i++)p+=t[h][i];if(0===p)throw new RangeError("convolution: The divisor is equal to zero");var g=s.toRadix2(r,d,u),f=s.convolute(g.data,t,g.rows,g.cols);if(f=s.crop(f,g.rows,g.cols,d,u),0!=p)for(h=0;h<f.length;h++)f[h]/p;return f},direct:function(e,t,n){var s=o(e),a=s.data,r=Object.assign({normalize:!1,divisor:1,rows:s.rows,cols:s.cols},n),l,d;if(r.rows&&r.cols)l=r.rows,d=r.cols;else throw new Error("Invalid number of rows or columns "+l+" "+d);var u=r.divisor,c=t.length,m=t[0].length,h,i,g,f,y,x,b,_,C;if(r.normalize)for(u=0,h=0;h<c;h++)for(i=0;i<m;i++)u+=t[h][i];if(0===u)throw new RangeError("convolution: The divisor is equal to zero");var k=Array(l*d),w=p(c/2),j=p(m/2);for(f=0;f<l;f++)for(g=0;g<d;g++){for(x=0,i=0;i<c;i++)for(h=0;h<m;h++)b=t[c-i-1][m-h-1],_=(f+i-w+l)%l,C=(g+h-j+d)%d,y=_*d+C,x+=a[y]*b;y=f*d+g,k[y]=x/u}return k},kernelFactory:{LoG:function(e,n,o){var s=1e3;o&&o.factor&&(s=o.factor);var a=Array(n),r,i,l,u;s*=-1;var p=(n-1)/2;for(r=0;r<n;r++)for(a[r]=Array(n),u=(r-p)*(r-p),i=0;i<n;i++)l=-((i-p)*(i-p)+u)/(2*e*e),a[r][i]=t(s*(1+l)*d(l));return a}},matrix2Array:o}},{"ml-fft":74}],76:[function(e,t){"use strict";var n=e("ml-disjoint-set"),o=[-1,0],s=[0,-1],a=[null,null],r=[-1,-1,0,1],l=[0,-1,-1,-1],d=[null,null,null,null];t.exports=function(e,t,u,p){p=p||{};var c=p.neighbours||8,m,h,g;if(8===c)m=r,h=l,g=d;else if(4===c)m=o,h=s,g=a;else throw new RangeError("unsupported neighbours count: "+c);for(var f=e.length,y=Array(f),x=new Int16Array(f),b=new n,_=1,C=0,w;C<u;C++)for(var j=0,i;j<t;j++)if(i=null,w=j+C*t,e[w]){for(var v=0;v<g.length;v++){var k=j+m[v],S=C+h[v];if(0<=k&&0<=S&&k<t&&S<u){var E=y[k+S*t];E?(g[v]=E,(!i||g[v].value<i.value)&&(i=g[v])):g[v]=null}}if(!i)y[w]=b.add(_++);else{y[w]=i;for(var v=0;v<g.length;v++)g[v]&&g[v]!==i&&b.union(i,g[v])}}for(var C=0;C<u;C++)for(var j=0;j<t;j++)w=j+C*t,e[w]&&(x[w]=b.find(y[w]).value);return x}},{"ml-disjoint-set":54}],77:[function(e,t){"use strict";function n(e,t,n,o){var s={},a,r,l,d;for(d=0;d<e.length;d++)0!=e[d]&&(r=d%o,a=(d-r)/o,s[e[d]]?(l=s[e[d]],l.x+=r*t[d],l.y+=a*t[d],l.z+=t[d],r<l.minX&&(l.minX=r),r>l.maxX&&(l.maxX=r),a<l.minY&&(l.minY=a),a>l.maxY&&(l.maxY=a)):s[e[d]]={x:r*t[d],y:a*t[d],z:t[d],minX:r,maxX:r,minY:a,maxY:a});var i=Object.keys(s),u=Array(i.length);for(d=0;d<i.length;d++)u[d]=s[i[d]],u[d].x/=u[d].z,u[d].y/=u[d].z;return u}var i=e("ml-stat").array,o=e("ml-matrix-convolution"),s=e("./ccLabeling"),a=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];t.exports={findPeaks2DRegion:function(e,t){var r=Object.assign({},{nStdev:3,kernel:a},t),l=o.matrix2Array(e),d=l.data,u;l.rows&&l.cols&&(r.rows=l.rows,r.cols=l.cols);var i=r.rows,p=r.cols;if(!i||!p)throw new Error("Invalid number of rows or columns "+i+" "+p);var c=r.kernel,m=r.filteredData;m||(m=o.fft(d,c,r));var h=r.nStdev,g=0;for(u=p*i-2;0<=u;u--)g+=f(m[u]-m[u+1],2);g=-_(g),g*=h/i;var y=Array(p*i);for(u=p*i-1;0<=u;u--)y[u]=0;var x=0;for(u=m.length-1;0<=u;u--)m[u]<g&&(y[u]=1,x++);var b=s(y,p,i,{neighbours:8}),C=n(b,d,i,p);return 0<C.length,C},findPeaks2DMax:function(e,t){var n=Object.assign({},{nStdev:3,kernel:a},t),s=o.matrix2Array(e),r=s.data;s.rows&&s.cols&&(n.rows=s.rows,n.cols=s.cols);var l=n.rows,d=n.cols;if(!l||!d)throw new Error("Invalid number of rows or columns "+l+" "+d);var u=n.kernel,c=n.filteredData;c||(c=o.fft(r,u,n));for(var m=n.nStdev,h=0,g=d*l-2;0<=g;g--)h+=f(c[g]-c[g+1],2);h=-_(h),h*=m/l;for(var i=[],y=0,g=0,x,b;g<c.length;g++)c[g]<h&&(x=p(g/d),b=g%d,0<x&&x+1<l&&b+1<d&&0<b&&c[g]<c[g+1]&&c[g]<c[g-1]&&(y=(x-1)*d+b,c[g]<c[y-1]&&c[g]<c[y]&&c[g]<c[y+1]&&(y=(x+1)*d+b,c[g]<c[y-1]&&c[g]<c[y]&&c[g]<c[y+1]&&i.push({x:b,y:x,z:r[g]}))));return i}}},{"./ccLabeling":76,"ml-matrix-convolution":75,"ml-stat":110}],78:[function(e,t){"use strict";function i(e){for(var t=Array(e[0].length),n=0;n<t.length;++n)t[n]=Array(e.length);for(n=0;n<e.length;++n)for(var i=0;i<e[0].length;++i)t[i][n]=e[n][i];return t}var n=e("ml-stat").array;t.exports={coordArrayToPoints:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=e.length/t,o=Array(n),s=0,a=0,i;a<e.length;a+=t){i=Array(t);for(var r=0;r<t;++r)i[r]=e[a+r];o[s]=i,s++}return o},coordArrayToCoordMatrix:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=Array(t),o=e.length/t,s=0;s<n.length;s++)n[s]=Array(o);for(s=0;s<e.length;s+=t)for(var i=0,a;i<t;++i)a=p(s/t),n[i][a]=e[s+i];return n},coordMatrixToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,o=0;o<e[0].length;++o)for(var i=0;i<e.length;++i)t[n]=e[i][o],++n;return t},coordMatrixToPoints:i,pointsToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,o=0;o<e.length;++o)for(var i=0;i<e[0].length;++i)t[n]=e[o][i],++n;return t},pointsToCoordMatrix:i,applyDotProduct:function(e,t){var n,o;e.length<=t.length?(o=e,n=t):(o=t,n=e);for(var s=n.length-o.length+1,a=Array(s),r=0,i;r<s;++r){i=0;for(var l=0;l<o.length;++l)i+=o[l]*n[r+l];a[r]=i}return a},scale:function(e,t){var o=t.inPlace?e:Array(e.length);var s=t.max,a=t.min;if("number"==typeof s){if("number"==typeof a)for(var r=n.minMax(e),l=(s-a)/(r.max-r.min),d=0;d<o.length;d++)o[d]=(e[d]-r.min)*l+a;else for(var i=n.max(e),l=s/i,d=0;d<o.length;d++)o[d]=e[d]*l;}else if("number"==typeof a)for(var i=n.min(e),l=a/i,d=0;d<o.length;d++)o[d]=e[d]*l;return o}}},{"ml-stat":110}],79:[function(e,t,i){"use strict";function n(e,t,n,o,s){function l(e,t,i,n){return(n-t)/(i-e)}var d=e.length,u=(o-n)/(s-1),p=n-u/2,c=Array(s),m=e[1]-e[0],h=e[e.length-1]-e[e.length-2],g=p,f=p+u,y=a,x=0,b=e[0]-m,_=0,C=0,k=0,w=0,v=0,S=0,E=0,i=0;main:for(;;){for(;0<=b-f;){var j=r(0,f-y,k,x);if(S=C+j,c[i]=(S-v)/u,i++,i===s)break main;g=f,f+=u,v=S}y<=g&&g<=b&&(j=r(0,g-y,k,x),v=C+j),C+=r(y,b,k,w),y=b,x=_,E<d?(b=e[E],_=t[E],E++):E===d&&(b+=h,_=0),k=l(y,x,b,_),w=-k*y+x}return c}function o(e,t,n,o,a){var r=e.length,l=(o-n)/(a-1),d=e[e.length-1]-e[e.length-2],u=n-l/2,p=Array(a),c=u,m=u+l,h=-s,g=0,f=e[0],y=t[0],x=0,b=!0,_=0,C=0,k=1,i=0;main:for(;;){if(h>=f)throw new Error("x must be an increasing serie");for(;0<h-m;){if(b&&(C++,b=!1),p[i]=0>=C?0:_/C,i++,i===a)break main;c=m,m+=l,_=0,C=0}h>c&&(_+=g,C++),(h==-s||1<x)&&C--,h=f,g=y,k<r?(f=e[k],y=t[k],k++):(f+=d,y=0,x++)}return p}function r(e,t,i,n){return 0.5*i*t*t+n*t-(0.5*i*e*e+n*e)}i.getEquallySpacedData=function(e,t,i){1<e.length&&e[0]>e[1]&&(e=e.slice().reverse(),t=t.slice().reverse());var s=e.length;if(s!==t.length)throw new RangeError("the x and y vector doesn't have the same size.");i===void 0&&(i={});var a=i.from===void 0?e[0]:i.from;if(isNaN(a)||!isFinite(a))throw new RangeError("'From' value must be a number");var r=i.to===void 0?e[e.length-1]:i.to;if(isNaN(r)||!isFinite(r))throw new RangeError("'To' value must be a number");var l=a>r;if(l){var d=a;a=r,r=d}var u=i.numberOfPoints===void 0?100:i.numberOfPoints;if(isNaN(u)||!isFinite(u))throw new RangeError("'Number of points' value must be a number");if(1>u)throw new RangeError("the number of point must be higher than 1");var p="slot"===i.variant?"slot":"smooth",c="slot"==p?o(e,t,a,r,u):n(e,t,a,r,u);return l?c.reverse():c},i.integral=r},{}],80:[function(e,t,i){"use strict";t.exports=i=e("./ArrayUtils"),i.getEquallySpacedData=e("./getEquallySpaced").getEquallySpacedData,i.SNV=e("./snv").SNV},{"./ArrayUtils":78,"./getEquallySpaced":79,"./snv":81}],81:[function(e,t,i){arguments[4][50][0].apply(i,arguments)},{dup:50,"ml-stat":110}],82:[function(e,t,i){"use strict";function n(e){function t(e,t){if(e.rows!==t.rows||e.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal")}function n(e,t){return e-t}function y(e,t){for(var i in t)e=e.replace(new RegExp("%"+i+"%","g"),t[i]);return e}e===void 0&&(e=Object);class x extends e{static get[Symbol.species](){return this}static from1DArray(e,t,i){if(e*t!==i.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(e,t),o=0;o<e;o++)for(var s=0;s<t;s++)n.set(o,s,i[o*t+s]);return n}static rowVector(e){for(var t=new this(1,e.length),n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){for(var t=new this(e.length,1),n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static empty(e,t){return new this(e,t)}static zeros(e,t){return this.empty(e,t).fill(0)}static ones(e,t){return this.empty(e,t).fill(1)}static rand(e,t,n){n===void 0&&(n=Math.random);for(var o=this.empty(e,t),s=0;s<e;s++)for(var i=0;i<t;i++)o.set(s,i,n());return o}static randInt(e,t,n,o){n===void 0&&(n=1e3),o===void 0&&(o=Math.random);for(var s=this.empty(e,t),a=0;a<e;a++)for(var i=0,r;i<t;i++)r=p(o()*n),s.set(a,i,r);return s}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);for(var o=C(e,t),s=this.zeros(e,t),a=0;a<o;a++)s.set(a,a,n);return s}static diag(e,t,n){var o=e.length;t===void 0&&(t=o),n===void 0&&(n=t);for(var s=C(o,t,n),a=this.zeros(t,n),r=0;r<s;r++)a.set(r,r,e[r]);return a}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,o=e.columns,s=new this(n,o),a=0;a<n;a++)for(var i=0;i<o;i++)s.set(a,i,C(e.get(a,i),t.get(a,i)));return s}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,o=e.columns,s=new this(n,o),a=0;a<n;a++)for(var i=0;i<o;i++)s.set(a,i,u(e.get(a,i),t.get(a,i)));return s}static checkMatrix(e){return x.isMatrix(e)?e:new this(e)}static isMatrix(e){return null!=e&&"Matrix"===e.klass}get size(){return this.rows*this.columns}apply(e){if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=this.rows,n=this.columns,o=0;o<t;o++)for(var i=0;i<n;i++)e.call(this,o,i);return this}to1DArray(){for(var e=Array(this.size),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e[t*this.columns+i]=this.get(t,i);return e}to2DArray(){for(var e=Array(this.rows),t=0;t<this.rows;t++){e[t]=Array(this.columns);for(var i=0;i<this.columns;i++)e[t][i]=this.get(t,i)}return e}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var e=0;e<this.rows;e++)for(var t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e,t){e=e||1,t=t||1;for(var n=new this.constructor[Symbol.species](this.rows*e,this.columns*t),o=0;o<e;o++)for(var i=0;i<t;i++)n.setSubMatrix(this,this.rows*o,this.columns*i);return n}fill(e){for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,e);return this}neg(){return this.mulS(-1)}getRow(e){r.checkRowIndex(this,e);for(var t=Array(this.columns),n=0;n<this.columns;n++)t[n]=this.get(e,n);return t}getRowVector(e){return this.constructor.rowVector(this.getRow(e))}setRow(e,t){r.checkRowIndex(this,e),t=r.checkRowVector(this,t);for(var n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){r.checkRowIndex(this,e),r.checkRowIndex(this,t);for(var n=0,i;n<this.columns;n++)i=this.get(e,n),this.set(e,n,this.get(t,n)),this.set(t,n,i);return this}getColumn(e){r.checkColumnIndex(this,e);for(var t=Array(this.rows),n=0;n<this.rows;n++)t[n]=this.get(n,e);return t}getColumnVector(e){return this.constructor.columnVector(this.getColumn(e))}setColumn(e,t){r.checkColumnIndex(this,e),t=r.checkColumnVector(this,t);for(var n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){r.checkColumnIndex(this,e),r.checkColumnIndex(this,t);for(var n=0,i;n<this.rows;n++)i=this.get(n,e),this.set(n,e,this.get(n,t)),this.set(n,t,i);return this}addRowVector(e){e=r.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)+e[i]);return this}subRowVector(e){e=r.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)-e[i]);return this}mulRowVector(e){e=r.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e[i]);return this}divRowVector(e){e=r.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)/e[i]);return this}addColumnVector(e){e=r.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)+e[t]);return this}subColumnVector(e){e=r.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)-e[t]);return this}mulColumnVector(e){e=r.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e[t]);return this}divColumnVector(e){e=r.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)/e[t]);return this}mulRow(e,t){r.checkRowIndex(this,e);for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){r.checkColumnIndex(this,e);for(var n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(){for(var e=this.get(0,0),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i));return e}maxIndex(){for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}min(){for(var e=this.get(0,0),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i));return e}minIndex(){for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}maxRow(e){r.checkRowIndex(this,e);for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){r.checkRowIndex(this,e);for(var t=this.get(e,0),n=[e,0],o=1;o<this.columns;o++)this.get(e,o)>t&&(t=this.get(e,o),n[1]=o);return n}minRow(e){r.checkRowIndex(this,e);for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){r.checkRowIndex(this,e);for(var t=this.get(e,0),n=[e,0],o=1;o<this.columns;o++)this.get(e,o)<t&&(t=this.get(e,o),n[1]=o);return n}maxColumn(e){r.checkColumnIndex(this,e);for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){r.checkColumnIndex(this,e);for(var t=this.get(0,e),n=[0,e],o=1;o<this.rows;o++)this.get(o,e)>t&&(t=this.get(o,e),n[0]=o);return n}minColumn(e){r.checkColumnIndex(this,e);for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){r.checkColumnIndex(this,e);for(var t=this.get(0,e),n=[0,e],o=1;o<this.rows;o++)this.get(o,e)<t&&(t=this.get(o,e),n[0]=o);return n}diag(){for(var e=C(this.rows,this.columns),t=Array(e),n=0;n<e;n++)t[n]=this.get(n,n);return t}sum(e){return"row"===e?r.sumByRow(this):"column"===e?r.sumByColumn(this):r.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var e=1,t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e*=this.get(t,i);return e}cumulativeSum(){for(var e=0,t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e+=this.get(t,i),this.set(t,i,e);return this}dot(e){x.isMatrix(e)&&(e=e.to1DArray());var t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");for(var n=0,o=0;o<t.length;o++)n+=t[o]*e[o];return n}mmul(e){e=this.constructor.checkMatrix(e),this.columns!==e.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var t=this.rows,o=this.columns,n=e.columns,a=new this.constructor[Symbol.species](t,n),r=Array(o),l=0;l<n;l++){for(var d=0;d<o;d++)r[d]=e.get(d,l);for(var u=0,i;u<t;u++){for(i=0,d=0;d<o;d++)i+=this.get(u,d)*r[d];a.set(u,l,i)}}return a}strassen2x2(e){var t=new this.constructor[Symbol.species](2,2),i=this.get(0,0),n=e.get(0,0),o=this.get(0,1),s=e.get(0,1),a=this.get(1,0),r=e.get(1,0),l=this.get(1,1),d=e.get(1,1),u=(i+l)*(n+d),p=(a+l)*n,c=i*(s-d),m=l*(r-n),h=(i+o)*d;return t.set(0,0,u+m-h+(o-l)*(r+d)),t.set(0,1,c+h),t.set(1,0,p+m),t.set(1,1,u-p+c+(a-i)*(n+s)),t}strassen3x3(e){var t=new this.constructor[Symbol.species](3,3),i=this.get(0,0),n=this.get(0,1),o=this.get(0,2),s=this.get(1,0),a=this.get(1,1),r=this.get(1,2),l=this.get(2,0),d=this.get(2,1),u=this.get(2,2),p=e.get(0,0),c=e.get(0,1),m=e.get(0,2),h=e.get(1,0),g=e.get(1,1),f=e.get(1,2),y=e.get(2,0),x=e.get(2,1),b=e.get(2,2),_=(i-s)*(-c+g),C=(-i+s+a)*(p-c+g),k=(s+a)*(-p+c),w=i*p,j=(-i+l+d)*(p-m+f),v=(-i+l)*(m-f),S=(l+d)*(-p+m),E=(-o+d+u)*(g+y-x),D=(o-u)*(g-x),H=o*y,P=(d+u)*(-y+x),I=(-o+a+r)*(f+y-b),A=(o-r)*(f-b),z=(a+r)*(-y+b);return t.set(0,0,w+H+n*h),t.set(0,1,(i+n+o-s-a-d-u)*g+C+k+w+E+H+P),t.set(0,2,w+j+S+(i+n+o-a-r-l-d)*f+H+I+z),t.set(1,0,_+a*(-p+c+h-g-f-y+b)+C+w+H+I+A),t.set(1,1,_+C+k+w+r*x),t.set(1,2,H+I+A+z+s*m),t.set(2,0,w+j+v+d*(-p+m+h-g-f-y+x)+E+D+H),t.set(2,1,E+D+H+P+l*c),t.set(2,2,w+j+v+S+u*b),t}mmulStrassen(e){function t(e,t,i){var n=e.rows,o=e.columns;if(n===t&&o===i)return e;var s=x.zeros(t,i);return s=s.setSubMatrix(e,0,0),s}function i(e,n,o,s){if(512>=o||512>=s)return e.mmul(n);1==o%2&&1==s%2?(e=t(e,o+1,s+1),n=t(n,o+1,s+1)):1==o%2?(e=t(e,o+1,s),n=t(n,o+1,s)):1==s%2&&(e=t(e,o,s+1),n=t(n,o,s+1));var a=parseInt(e.rows/2),r=parseInt(e.columns/2),l=e.subMatrix(0,a-1,0,r-1),d=n.subMatrix(0,a-1,0,r-1),u=e.subMatrix(0,a-1,r,e.columns-1),p=n.subMatrix(0,a-1,r,n.columns-1),c=e.subMatrix(a,e.rows-1,0,r-1),m=n.subMatrix(a,n.rows-1,0,r-1),h=e.subMatrix(a,e.rows-1,r,e.columns-1),g=n.subMatrix(a,n.rows-1,r,n.columns-1),f=i(x.add(l,h),x.add(d,g),a,r),y=i(x.add(c,h),d,a,r),b=i(l,x.sub(p,g),a,r),_=i(h,x.sub(m,d),a,r),C=i(x.add(l,u),g,a,r),k=i(x.sub(c,l),x.add(d,p),a,r),w=i(x.sub(u,h),x.add(m,g),a,r),j=x.add(f,_);j.sub(C),j.add(w);var v=x.add(b,C),S=x.add(y,_),E=x.sub(f,y);E.add(b),E.add(k);var D=x.zeros(2*j.rows,2*j.columns);return D=D.setSubMatrix(j,0,0),D=D.setSubMatrix(v,j.rows,0),D=D.setSubMatrix(S,0,j.columns),D=D.setSubMatrix(E,j.rows,j.columns),D.subMatrix(0,o-1,0,s-1)}var n=this.clone(),o=n.rows,s=n.columns,a=e.rows,l=e.columns;s!==a&&console.warn(`Multiplying ${o} x ${s} and ${a} x ${l} matrix: dimensions do not match.`);var d=u(o,a),r=u(s,l);return n=t(n,d,r),e=t(e,d,r),i(n,e,d,r)}scaleRows(e,t){if(e=void 0===e?0:e,t=void 0===t?1:t,e>=t)throw new RangeError("min should be strictly smaller than max");for(var n=this.constructor.empty(this.rows,this.columns),o=0,i;o<this.rows;o++)i=s.scale(this.getRow(o),{min:e,max:t}),n.setRow(o,i);return n}scaleColumns(e,t){if(e=void 0===e?0:e,t=void 0===t?1:t,e>=t)throw new RangeError("min should be strictly smaller than max");for(var n=this.constructor.empty(this.rows,this.columns),o=0,i;o<this.columns;o++)i=s.scale(this.getColumn(o),{min:e,max:t}),n.setColumn(o,i);return n}kroneckerProduct(e){e=this.constructor.checkMatrix(e);for(var t=this.rows,o=this.columns,n=e.rows,s=e.columns,a=new this.constructor[Symbol.species](t*n,o*s),r=0;r<t;r++)for(var i=0;i<o;i++)for(var d=0;d<n;d++)for(var u=0;u<s;u++)a[n*r+d][s*i+u]=this.get(r,i)*e.get(d,u);return a}transpose(){for(var e=new this.constructor[Symbol.species](this.columns,this.rows),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e.set(i,t,this.get(t,i));return e}sortRows(e){e===void 0&&(e=n);for(var t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e){e===void 0&&(e=n);for(var t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,o){r.checkRange(this,e,t,n,o);for(var s=new this.constructor[Symbol.species](t-e+1,o-n+1),a=e;a<=t;a++)for(var i=n;i<=o;i++)s[a-e][i-n]=this.get(a,i);return s}subMatrixRow(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||0>t||t>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var o=new this.constructor[Symbol.species](e.length,n-t+1),s=0;s<e.length;s++)for(var i=t;i<=n;i++){if(0>e[s]||e[s]>=this.rows)throw new RangeError("Row index out of range: "+e[s]);o.set(s,i-t,this.get(e[s],i))}return o}subMatrixColumn(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||0>t||t>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var o=new this.constructor[Symbol.species](n-t+1,e.length),s=0;s<e.length;s++)for(var i=t;i<=n;i++){if(0>e[s]||e[s]>=this.columns)throw new RangeError("Column index out of range: "+e[s]);o.set(i-t,s,this.get(i,e[s]))}return o}setSubMatrix(e,t,n){e=this.constructor.checkMatrix(e);var o=t+e.rows-1,s=n+e.columns-1;r.checkRange(this,t,o,n,s);for(var a=0;a<e.rows;a++)for(var i=0;i<e.columns;i++)this[t+a][n+i]=e.get(a,i);return this}selection(e,t){for(var n=r.checkIndices(this,e,t),o=new this.constructor[Symbol.species](e.length,t.length),s=0,i;s<n.row.length;s++){i=n.row[s];for(var a=0,l;a<n.column.length;a++)l=n.column[a],o[s][a]=this.get(i,l)}return o}trace(){for(var e=C(this.rows,this.columns),t=0,n=0;n<e;n++)t+=this.get(n,n);return t}transposeView(){return new l(this)}rowView(e){return r.checkRowIndex(this,e),new d(this,e)}columnView(e){return r.checkColumnIndex(this,e),new h(this,e)}flipRowView(){return new g(this)}flipColumnView(){return new f(this)}subMatrixView(e,t,i,n){return new c(this,e,t,i,n)}selectionView(e,t){return new m(this,e,t)}det(){if(this.isSquare()){var e,t,i,n;if(2===this.columns)return e=this.get(0,0),t=this.get(0,1),i=this.get(1,0),n=this.get(1,1),e*n-t*i;if(3===this.columns){var s,a,r;return s=this.selectionView([1,2],[1,2]),a=this.selectionView([1,2],[0,2]),r=this.selectionView([1,2],[0,1]),e=this.get(0,0),t=this.get(0,1),i=this.get(0,2),e*s.det()-t*a.det()+i*r.det()}return new o(this).determinant}throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(e){void 0===e&&(e=Number.EPSILON);for(var t=new a(this,{autoTranspose:!0}),n=t.leftSingularVectors,o=t.rightSingularVectors,r=t.diagonal,s=0;s<r.length;s++)r[s]=S(r[s])>e?1/r[s]:0;return r=this.constructor[Symbol.species].diag(r),o.mmul(r.mmul(n.transposeView()))}}x.prototype.klass="Matrix",x.random=x.rand,x.diagonal=x.diag,x.prototype.diagonal=x.prototype.diag,x.identity=x.eye,x.prototype.negate=x.prototype.neg,x.prototype.tensorProduct=x.prototype.kroneckerProduct,x.prototype.determinant=x.prototype.det;var b=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,_=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,k=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,w=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,j=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,v=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,E=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,D=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,H=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,P=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,I=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,A=D,z=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],T;for(var i of z){var F=eval(y(b,{name:i[1],op:i[0]})),O=eval(y(_,{name:i[1]+"S",op:i[0]})),R=eval(y(k,{name:i[1]+"M",op:i[0]})),M=eval(y(w,{name:i[1]}));for(T=1;T<i.length;T++)x.prototype[i[T]]=F,x.prototype[i[T]+"S"]=O,x.prototype[i[T]+"M"]=R,x[i[T]]=M}var N=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(e){N.push(["Math."+e,e])});for(var X of N){var L=eval(y(j,{name:X[1],method:X[0]})),Y=eval(y(v,{name:X[1]}));for(T=1;T<X.length;T++)x.prototype[X[T]]=L,x[X[T]]=Y}var U=[["Math.pow",1,"pow"]];for(var B of U){var q="arg0";for(T=1;T<B[1];T++)q+=`, arg${T}`;if(1!==B[1]){var V=eval(y(E,{name:B[2],method:B[0],args:q})),$=eval(y(D,{name:B[2],args:q}));for(T=2;T<B.length;T++)x.prototype[B[T]]=V,x[B[T]]=$}else{var Z={name:B[2],args:q,method:B[0]},W=eval(y(I,Z)),G=eval(y(H,Z)),J=eval(y(P,Z)),K=eval(y(A,Z));for(T=2;T<B.length;T++)x.prototype[B[T]]=W,x.prototype[B[T]+"M"]=J,x.prototype[B[T]+"S"]=G,x[B[T]]=K}}return x}t.exports=n;var o=e("./dc/lu"),a=e("./dc/svd"),s=e("ml-array-utils"),r=e("./util"),l=e("./views/transpose"),d=e("./views/row"),c=e("./views/sub"),m=e("./views/selection"),h=e("./views/column"),g=e("./views/flipRow"),f=e("./views/flipColumn")},{"./dc/lu":85,"./dc/svd":87,"./util":93,"./views/column":95,"./views/flipColumn":96,"./views/flipRow":97,"./views/row":98,"./views/selection":99,"./views/sub":100,"./views/transpose":101,"ml-array-utils":80}],83:[function(e,t){"use strict";function n(e){if(!(this instanceof n))return new n(e);if(e=o.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");var t=e,a=t.rows,r=new o(a,a),l=!0,p,i,c;for(i=0;i<a;i++){var m=r[i],h=0;for(c=0;c<i;c++){var d=r[c],g=0;for(p=0;p<c;p++)g+=d[p]*m[p];m[c]=g=(t[i][c]-g)/r[c][c],h+=g*g}for(h=t[i][i]-h,l&=0<h,r[i][i]=_(u(h,0)),c=i+1;c<a;c++)r[i][c]=0}if(!l)throw new Error("Matrix is not positive definite");this.L=r}var o=e("../matrix").Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(e){e=o.checkMatrix(e);var t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");var s=e.columns,a=e.clone(),r,i,l;for(l=0;l<n;l++)for(i=0;i<s;i++){for(r=0;r<l;r++)a[l][i]-=a[r][i]*t[l][r];a[l][i]/=t[l][l]}for(l=n-1;0<=l;l--)for(i=0;i<s;i++){for(r=l+1;r<n;r++)a[l][i]-=a[r][i]*t[r][l];a[l][i]/=t[l][l]}return a}},t.exports=n},{"../matrix":91}],84:[function(e,t){"use strict";function o(t,u){if(u=Object.assign({},g,u),!(this instanceof o))return new o(t,u);if(t=p.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");var c=t.columns,n=h(c,c,0),m=Array(c),d=Array(c),e=t,f=!1,y,i;if(f=!!u.assumeSymmetric||t.isSymmetric(),f){for(y=0;y<c;y++)for(i=0;i<c;i++)n[y][i]=e.get(y,i);s(c,d,m,n),a(c,d,m,n)}else{var x=h(c,c,0),b=Array(c);for(i=0;i<c;i++)for(y=0;y<c;y++)x[y][i]=e.get(y,i);r(c,x,b,n),l(c,d,m,n,x)}this.n=c,this.e=d,this.d=m,this.V=n}function s(t,n,e,o){var s,a,r,l,i,d,u,p;for(i=0;i<t;i++)e[i]=o[t-1][i];for(l=t-1;0<l;l--){for(p=0,r=0,d=0;d<l;d++)p+=S(e[d]);if(0===p)for(n[l]=e[l-1],i=0;i<l;i++)e[i]=o[l-1][i],o[l][i]=0,o[i][l]=0;else{for(d=0;d<l;d++)e[d]/=p,r+=e[d]*e[d];for(s=e[l-1],a=_(r),0<s&&(a=-a),n[l]=p*a,r-=s*a,e[l-1]=s-a,i=0;i<l;i++)n[i]=0;for(i=0;i<l;i++){for(s=e[i],o[i][l]=s,a=n[i]+o[i][i]*s,d=i+1;d<=l-1;d++)a+=o[d][i]*e[d],n[d]+=o[d][i]*s;n[i]=a}for(s=0,i=0;i<l;i++)n[i]/=r,s+=n[i]*e[i];for(u=s/(r+r),i=0;i<l;i++)n[i]-=u*e[i];for(i=0;i<l;i++){for(s=e[i],a=n[i],d=i;d<=l-1;d++)o[d][i]-=s*n[d]+a*e[d];e[i]=o[l-1][i],o[l][i]=0}}e[l]=r}for(l=0;l<t-1;l++){if(o[t-1][l]=o[l][l],o[l][l]=1,r=e[l+1],0!==r){for(d=0;d<=l;d++)e[d]=o[d][l+1]/r;for(i=0;i<=l;i++){for(a=0,d=0;d<=l;d++)a+=o[d][l+1]*o[d][i];for(d=0;d<=l;d++)o[d][i]-=a*e[d]}}for(d=0;d<=l;d++)o[d][l+1]=0}for(i=0;i<t;i++)e[i]=o[t-1][i],o[t-1][i]=0;o[t-1][t-1]=1,n[0]=0}function a(t,n,e,o){var a,d,h,i,g,y,l,x,p,b,_,c,C,k,w,j,v;for(h=1;h<t;h++)n[h-1]=n[h];n[t-1]=0;var E=0,f=0,D=2.220446049250313e-16;for(y=0;y<t;y++){for(f=u(f,S(e[y])+S(n[y])),l=y;l<t&&!(S(n[l])<=D*f);)l++;if(l>y){v=0;do{for(++v,a=e[y],x=(e[y+1]-a)/(2*n[y]),p=m(x,1),0>x&&(p=-p),e[y]=n[y]/(x+p),e[y+1]=n[y]*(x+p),b=e[y+1],d=a-e[y],h=y+2;h<t;h++)e[h]-=d;for(E+=d,x=e[l],_=1,c=_,C=_,k=n[y+1],w=0,j=0,h=l-1;h>=y;h--)for(C=c,c=_,j=w,a=_*n[h],d=_*x,p=m(x,n[h]),n[h+1]=w*p,w=n[h]/p,_=x/p,x=_*e[h]-w*a,e[h+1]=d+w*(_*a+w*e[h]),g=0;g<t;g++)d=o[g][h+1],o[g][h+1]=w*o[g][h]+_*d,o[g][h]=_*o[g][h]-w*d;x=-w*j*C*k*n[y]/b,n[y]=w*x,e[y]=_*x}while(S(n[y])>D*f)}e[y]+=E,n[y]=0}for(h=0;h<t-1;h++){for(g=h,x=e[h],i=h+1;i<t;i++)e[i]<x&&(g=i,x=e[i]);if(g!==h)for(e[g]=e[h],e[h]=x,i=0;i<t;i++)x=o[i][h],o[i][h]=o[i][g],o[i][g]=x}}function r(e,t,n,o){var s=0,a=e-1,r,l,d,u,i,p,c;for(p=s+1;p<=a-1;p++){for(c=0,u=p;u<=a;u++)c+=S(t[u][p-1]);if(0!==c){for(d=0,u=a;u>=p;u--)n[u]=t[u][p-1]/c,d+=n[u]*n[u];for(l=_(d),0<n[p]&&(l=-l),d-=n[p]*l,n[p]-=l,i=p;i<e;i++){for(r=0,u=a;u>=p;u--)r+=n[u]*t[u][i];for(r/=d,u=p;u<=a;u++)t[u][i]-=r*n[u]}for(u=0;u<=a;u++){for(r=0,i=a;i>=p;i--)r+=n[i]*t[u][i];for(r/=d,i=p;i<=a;i++)t[u][i]-=r*n[i]}n[p]=c*n[p],t[p][p-1]=c*l}}for(u=0;u<e;u++)for(i=0;i<e;i++)o[u][i]=u===i?1:0;for(p=a-1;p>=s+1;p--)if(0!==t[p][p-1]){for(u=p+1;u<=a;u++)n[u]=t[u][p-1];for(i=p;i<=a;i++){for(l=0,u=p;u<=a;u++)l+=n[u]*o[u][i];for(l=l/n[p]/t[p][p-1],u=p;u<=a;u++)o[u][i]+=l*n[u]}}}function l(o,a,e,d,h){var g=o-1,n=0,f=o-1,b=2.220446049250313e-16,v=0,E=0,D=0,p=0,H=0,P=0,I=0,A=0,T,i,j,k,l,m,t,w,x,y,F,O,R,M,N;for(T=0;T<o;T++)for((T<n||T>f)&&(e[T]=h[T][T],a[T]=0),i=u(T-1,0);i<o;i++)E+=S(h[T][i]);for(;g>=n;){for(k=g;k>n&&(P=S(h[k-1][k-1])+S(h[k][k]),0===P&&(P=E),!(S(h[k][k-1])<b*P));)k--;if(k===g)h[g][g]+=v,e[g]=h[g][g],a[g]=0,g--,A=0;else if(k===g-1){if(t=h[g][g-1]*h[g-1][g],D=(h[g-1][g-1]-h[g][g])/2,p=D*D+t,I=_(S(p)),h[g][g]+=v,h[g-1][g-1]=h[g-1][g-1]+v,w=h[g][g],0<=p){for(I=0<=D?D+I:D-I,e[g-1]=w+I,e[g]=e[g-1],0!==I&&(e[g]=w-t/I),a[g-1]=0,a[g]=0,w=h[g][g-1],P=S(w)+S(I),D=w/P,p=I/P,H=_(D*D+p*p),D/=H,p/=H,i=g-1;i<o;i++)I=h[g-1][i],h[g-1][i]=p*I+D*h[g][i],h[g][i]=p*h[g][i]-D*I;for(T=0;T<=g;T++)I=h[T][g-1],h[T][g-1]=p*I+D*h[T][g],h[T][g]=p*h[T][g]-D*I;for(T=n;T<=f;T++)I=d[T][g-1],d[T][g-1]=p*I+D*d[T][g],d[T][g]=p*d[T][g]-D*I}else e[g-1]=w+D,e[g]=w+D,a[g-1]=I,a[g]=-I;g-=2,A=0}else{if(w=h[g][g],x=0,t=0,k<g&&(x=h[g-1][g-1],t=h[g][g-1]*h[g-1][g]),10==A){for(v+=w,T=n;T<=g;T++)h[T][T]-=w;P=S(h[g][g-1])+S(h[g-1][g-2]),w=x=0.75*P,t=-0.4375*P*P}if(30==A&&(P=(x-w)/2,P=P*P+t,0<P)){for(P=_(P),x<w&&(P=-P),P=w-t/((x-w)/2+P),T=n;T<=g;T++)h[T][T]-=P;v+=P,w=x=t=0.964}for(++A,l=g-2;l>=k&&(I=h[l][l],H=w-I,P=x-I,D=(H*P-t)/h[l+1][l]+h[l][l+1],p=h[l+1][l+1]-I-H-P,H=h[l+2][l+1],P=S(D)+S(p)+S(H),D/=P,p/=P,H/=P,l!==k)&&!(S(h[l][l-1])*(S(p)+S(H))<b*(S(D)*(S(h[l-1][l-1])+S(I)+S(h[l+1][l+1]))));)l--;for(T=l+2;T<=g;T++)h[T][T-2]=0,T>l+2&&(h[T][T-3]=0);for(j=l;j<=g-1&&(M=j!==g-1,j!==l&&(D=h[j][j-1],p=h[j+1][j-1],H=M?h[j+2][j-1]:0,w=S(D)+S(p)+S(H),0!==w&&(D/=w,p/=w,H/=w)),0!==w);j++)if(P=_(D*D+p*p+H*H),0>D&&(P=-P),0!==P){for(j===l?k!==l&&(h[j][j-1]=-h[j][j-1]):h[j][j-1]=-P*w,D+=P,w=D/P,x=p/P,I=H/P,p/=D,H/=D,i=j;i<o;i++)D=h[j][i]+p*h[j+1][i],M&&(D+=H*h[j+2][i],h[j+2][i]=h[j+2][i]-D*I),h[j][i]-=D*w,h[j+1][i]=h[j+1][i]-D*x;for(T=0;T<=C(g,j+3);T++)D=w*h[T][j]+x*h[T][j+1],M&&(D+=I*h[T][j+2],h[T][j+2]=h[T][j+2]-D*H),h[T][j]-=D,h[T][j+1]=h[T][j+1]-D*p;for(T=n;T<=f;T++)D=w*d[T][j]+x*d[T][j+1],M&&(D+=I*d[T][j+2],d[T][j+2]=d[T][j+2]-D*H),d[T][j]-=D,d[T][j+1]=d[T][j+1]-D*p}}}if(0!==E){for(g=o-1;0<=g;g--)if(D=e[g],p=a[g],0===p)for(k=g,h[g][g]=1,T=g-1;0<=T;T--){for(t=h[T][T]-D,H=0,i=k;i<=g;i++)H+=h[T][i]*h[i][g];if(0>a[T])I=t,P=H;else if(k=T,0===a[T]?h[T][g]=0===t?-H/(b*E):-H/t:(w=h[T][T+1],x=h[T+1][T],p=(e[T]-D)*(e[T]-D)+a[T]*a[T],m=(w*P-I*H)/p,h[T][g]=m,h[T+1][g]=S(w)>S(I)?(-H-t*m)/w:(-P-x*m)/I),m=S(h[T][g]),1<b*m*m)for(i=T;i<=g;i++)h[i][g]/=m}else if(0>p)for(k=g-1,S(h[g][g-1])>S(h[g-1][g])?(h[g-1][g-1]=p/h[g][g-1],h[g-1][g]=-(h[g][g]-D)/h[g][g-1]):(N=c(0,-h[g-1][g],h[g-1][g-1]-D,p),h[g-1][g-1]=N[0],h[g-1][g]=N[1]),h[g][g-1]=0,h[g][g]=1,T=g-2;0<=T;T--){for(y=0,F=0,i=k;i<=g;i++)y+=h[T][i]*h[i][g-1],F+=h[T][i]*h[i][g];if(t=h[T][T]-D,0>a[T])I=t,H=y,P=F;else if(k=T,0===a[T]?(N=c(-y,-F,t,p),h[T][g-1]=N[0],h[T][g]=N[1]):(w=h[T][T+1],x=h[T+1][T],O=(e[T]-D)*(e[T]-D)+a[T]*a[T]-p*p,R=2*(e[T]-D)*p,0===O&&0===R&&(O=b*E*(S(t)+S(p)+S(w)+S(x)+S(I))),N=c(w*H-I*y+p*F,w*P-I*F-p*y,O,R),h[T][g-1]=N[0],h[T][g]=N[1],S(w)>S(I)+S(p)?(h[T+1][g-1]=(-y-t*h[T][g-1]+p*h[T][g])/w,h[T+1][g]=(-F-t*h[T][g]-p*h[T][g-1])/w):(N=c(-H-x*h[T][g-1],-P-x*h[T][g],I,p),h[T+1][g-1]=N[0],h[T+1][g]=N[1])),m=u(S(h[T][g-1]),S(h[T][g])),1<b*m*m)for(i=T;i<=g;i++)h[i][g-1]=h[i][g-1]/m,h[i][g]/=m}for(T=0;T<o;T++)if(T<n||T>f)for(i=T;i<o;i++)d[T][i]=h[T][i];for(i=o-1;i>=n;i--)for(T=n;T<=f;T++){for(I=0,j=n;j<=C(i,f);j++)I+=d[T][j]*h[j][i];d[T][i]=I}}}function c(e,t,i,n){var o,s;return S(i)>S(n)?(o=n/i,s=i+o*n,[(e+o*t)/s,(t-o*e)/s]):(o=i/n,s=n+o*i,[(o*e+t)/s,(o*t-e)/s])}var p=e("../matrix").Matrix,i=e("./util"),m=i.hypotenuse,h=i.getFilled2DArray,g={assumeSymmetric:!1};o.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return p.isMatrix(this.V)||(this.V=new p(this.V)),this.V},get diagonalMatrix(){var t=this.n,n=this.e,e=this.d,o=new p(t,t),s,i;for(s=0;s<t;s++){for(i=0;i<t;i++)o[s][i]=0;o[s][s]=e[s],0<n[s]?o[s][s+1]=n[s]:0>n[s]&&(o[s][s-1]=n[s])}return o}},t.exports=o},{"../matrix":91,"./util":88}],85:[function(e,t){"use strict";function n(e){if(!(this instanceof n))return new n(e);e=o.Matrix.checkMatrix(e);var a=e.clone(),r=a.rows,l=a.columns,d=Array(r),u=1,c,i,m,h,p,s,t,g,f,y;for(c=0;c<r;c++)d[c]=c;for(f=Array(r),i=0;i<l;i++){for(c=0;c<r;c++)f[c]=a[c][i];for(c=0;c<r;c++){for(g=a[c],y=C(c,i),p=0,m=0;m<y;m++)p+=g[m]*f[m];g[i]=f[c]-=p}for(h=i,c=i+1;c<r;c++)S(f[c])>S(f[h])&&(h=c);if(h!==i){for(m=0;m<l;m++)s=a[h][m],a[h][m]=a[i][m],a[i][m]=s;t=d[h],d[h]=d[i],d[i]=t,u=-u}if(i<r&&0!==a[i][i])for(c=i+1;c<r;c++)a[c][i]/=a[i][i]}this.LU=a,this.pivotVector=d,this.pivotSign=u}var o=e("../matrix");n.prototype={isSingular:function(){for(var e=this.LU,t=e.columns,i=0;i<t;i++)if(0===e[i][i])return!0;return!1},get determinant(){var e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,i=e.columns,n=0;n<i;n++)t*=e[n][n];return t},get lowerTriangularMatrix(){for(var e=this.LU,t=e.rows,n=e.columns,s=new o.Matrix(t,n),a=0;a<t;a++)for(var i=0;i<n;i++)s[a][i]=a>i?e[a][i]:a===i?1:0;return s},get upperTriangularMatrix(){for(var e=this.LU,t=e.rows,n=e.columns,s=new o.Matrix(t,n),a=0;a<t;a++)for(var i=0;i<n;i++)s[a][i]=a<=i?e[a][i]:0;return s},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(e){e=o.Matrix.checkMatrix(e);var t=this.LU,n=t.rows;if(n!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var s=e.columns,a=e.subMatrixRow(this.pivotVector,0,s-1),r=t.columns,l,i,d;for(d=0;d<r;d++)for(l=d+1;l<r;l++)for(i=0;i<s;i++)a[l][i]-=a[d][i]*t[l][d];for(d=r-1;0<=d;d--){for(i=0;i<s;i++)a[d][i]/=t[d][d];for(l=0;l<d;l++)for(i=0;i<s;i++)a[l][i]-=a[d][i]*t[l][d]}return a}},t.exports=n},{"../matrix":91}],86:[function(e,t){"use strict";function o(e){if(!(this instanceof o))return new o(e);e=a.checkMatrix(e);var t=e.clone(),r=e.rows,l=e.columns,d=Array(l),u,i,p,c;for(p=0;p<l;p++){var m=0;for(u=p;u<r;u++)m=n(m,t[u][p]);if(0!==m){for(0>t[p][p]&&(m=-m),u=p;u<r;u++)t[u][p]/=m;for(t[p][p]+=1,i=p+1;i<l;i++){for(c=0,u=p;u<r;u++)c+=t[u][p]*t[u][i];for(c=-c/t[p][p],u=p;u<r;u++)t[u][i]+=c*t[u][p]}}d[p]=-m}this.QR=t,this.Rdiag=d}var a=e("../matrix").Matrix,n=e("./util").hypotenuse;o.prototype={solve:function(e){e=a.checkMatrix(e);var t=this.QR,o=t.rows;if(e.rows!==o)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r=e.columns,l=e.clone(),d=t.columns,n,i,u,p;for(u=0;u<d;u++)for(i=0;i<r;i++){for(p=0,n=u;n<o;n++)p+=t[n][u]*l[n][i];for(p=-p/t[u][u],n=u;n<o;n++)l[n][i]+=p*t[n][u]}for(u=d-1;0<=u;u--){for(i=0;i<r;i++)l[u][i]/=this.Rdiag[u];for(n=0;n<u;n++)for(i=0;i<r;i++)l[n][i]-=l[u][i]*t[n][u]}return l.subMatrix(0,d-1,0,r-1)},isFullRank:function(){for(var e=this.QR.columns,t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0},get upperTriangularMatrix(){var e=this.QR,t=e.columns,n=new a(t,t),o,i;for(o=0;o<t;o++)for(i=0;i<t;i++)n[o][i]=o<i?e[o][i]:o===i?this.Rdiag[o]:0;return n},get orthogonalMatrix(){var e=this.QR,t=e.rows,n=e.columns,o=new a(t,n),r,i,l,d;for(l=n-1;0<=l;l--){for(r=0;r<t;r++)o[r][l]=0;for(o[l][l]=1,i=l;i<n;i++)if(0!==e[l][l]){for(d=0,r=l;r<t;r++)d+=e[r][l]*o[r][i];for(d=-d/e[l][l],r=l;r<t;r++)o[r][i]+=d*e[r][l]}}return o}},t.exports=o},{"../matrix":91,"./util":88}],87:[function(e,t){"use strict";function o(h,y){if(!(this instanceof o))return new o(h,y);h=r.Matrix.checkMatrix(h),y=y||{};var x=h.rows,m=h.columns,n=C(x,m),w=!0,v=!0;!1===y.computeLeftSingularVectors&&(w=!1),!1===y.computeRightSingularVectors&&(v=!1);var E=!0===y.autoTranspose,D=!1,H;if(!(x<m))H=h.clone();else if(!E)H=h.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{H=h.transpose(),x=H.rows,m=H.columns,D=!0;var a=w;w=v,v=a}var P=Array(C(x+1,m)),s=d(x,n,0),I=d(m,m,0),A=Array(m),e=Array(x),z=C(x-1,m),T=u(0,C(m-2,x)),F,i,j,k,p,O,R,f,M,N,X,L,Y,U,B,q,V,$,b,c,Z;for(j=0,N=u(z,T);j<N;j++){if(j<z){for(P[j]=0,F=j;F<x;F++)P[j]=l(P[j],H[F][j]);if(0!==P[j]){for(0>H[j][j]&&(P[j]=-P[j]),F=j;F<x;F++)H[F][j]/=P[j];H[j][j]+=1}P[j]=-P[j]}for(i=j+1;i<m;i++){if(j<z&&0!==P[j]){for(p=0,F=j;F<x;F++)p+=H[F][j]*H[F][i];for(p=-p/H[j][j],F=j;F<x;F++)H[F][i]+=p*H[F][j]}A[i]=H[j][i]}if(w&&j<z)for(F=j;F<x;F++)s[F][j]=H[F][j];if(j<T){for(A[j]=0,F=j+1;F<m;F++)A[j]=l(A[j],A[F]);if(0!==A[j]){for(0>A[j+1]&&(A[j]=0-A[j]),F=j+1;F<m;F++)A[F]/=A[j];A[j+1]+=1}if(A[j]=-A[j],j+1<x&&0!==A[j]){for(F=j+1;F<x;F++)e[F]=0;for(i=j+1;i<m;i++)for(F=j+1;F<x;F++)e[F]+=A[i]*H[F][i];for(i=j+1;i<m;i++)for(p=-A[i]/A[j+1],F=j+1;F<x;F++)H[F][i]+=p*e[F]}if(v)for(F=j+1;F<m;F++)I[F][j]=A[F]}}if(k=C(m,x+1),z<m&&(P[z]=H[z][z]),x<k&&(P[k-1]=0),T+1<k&&(A[T]=H[T][k-1]),A[k-1]=0,w){for(i=z;i<n;i++){for(F=0;F<x;F++)s[F][i]=0;s[i][i]=1}for(j=z-1;0<=j;j--)if(0!==P[j]){for(i=j+1;i<n;i++){for(p=0,F=j;F<x;F++)p+=s[F][j]*s[F][i];for(p=-p/s[j][j],F=j;F<x;F++)s[F][i]+=p*s[F][j]}for(F=j;F<x;F++)s[F][j]=-s[F][j];for(s[j][j]=1+s[j][j],F=0;F<j-1;F++)s[F][j]=0}else{for(F=0;F<x;F++)s[F][j]=0;s[j][j]=1}}if(v)for(j=m-1;0<=j;j--){if(j<T&&0!==A[j])for(i=j+1;i<m;i++){for(p=0,F=j+1;F<m;F++)p+=I[F][j]*I[F][i];for(p=-p/I[j+1][j],F=j+1;F<m;F++)I[F][i]+=p*I[F][j]}for(F=0;F<m;F++)I[F][j]=0;I[j][j]=1}for(var g=k-1,W=0,G=2.220446049250313e-16;0<k;){for(j=k-2;-1<=j&&-1!==j;j--)if(S(A[j])<=G*(S(P[j])+S(P[j+1]))){A[j]=0;break}if(j===k-2)X=4;else{for(O=k-1;O>=j&&O!==j;O--)if(p=(O===k?0:S(A[O]))+(O===j+1?0:S(A[O-1])),S(P[O])<=G*p){P[O]=0;break}O===j?X=3:O===k-1?X=1:(X=2,j=O)}switch(j++,X){case 1:{for(R=A[k-2],A[k-2]=0,i=k-2;i>=j;i--)if(p=l(P[i],R),f=P[i]/p,M=R/p,P[i]=p,i!==j&&(R=-M*A[i-1],A[i-1]=f*A[i-1]),v)for(F=0;F<m;F++)p=f*I[F][i]+M*I[F][k-1],I[F][k-1]=-M*I[F][i]+f*I[F][k-1],I[F][i]=p;break}case 2:{for(R=A[j-1],A[j-1]=0,i=j;i<k;i++)if(p=l(P[i],R),f=P[i]/p,M=R/p,P[i]=p,R=-M*A[i],A[i]=f*A[i],w)for(F=0;F<x;F++)p=f*s[F][i]+M*s[F][j-1],s[F][j-1]=-M*s[F][i]+f*s[F][j-1],s[F][i]=p;break}case 3:{for(L=u(u(u(u(S(P[k-1]),S(P[k-2])),S(A[k-2])),S(P[j])),S(A[j])),Y=P[k-1]/L,U=P[k-2]/L,B=A[k-2]/L,q=P[j]/L,V=A[j]/L,$=((U+Y)*(U-Y)+B*B)/2,b=Y*B*(Y*B),c=0,(0!==$||0!==b)&&(c=_($*$+b),0>$&&(c=-c),c=b/($+c)),R=(q+Y)*(q-Y)+c,Z=q*V,i=j;i<k-1;i++){if(p=l(R,Z),f=R/p,M=Z/p,i!==j&&(A[i-1]=p),R=f*P[i]+M*A[i],A[i]=f*A[i]-M*P[i],Z=M*P[i+1],P[i+1]=f*P[i+1],v)for(F=0;F<m;F++)p=f*I[F][i]+M*I[F][i+1],I[F][i+1]=-M*I[F][i]+f*I[F][i+1],I[F][i]=p;if(p=l(R,Z),f=R/p,M=Z/p,P[i]=p,R=f*A[i]+M*P[i+1],P[i+1]=-M*A[i]+f*P[i+1],Z=M*A[i+1],A[i+1]=f*A[i+1],w&&i<x-1)for(F=0;F<x;F++)p=f*s[F][i]+M*s[F][i+1],s[F][i+1]=-M*s[F][i]+f*s[F][i+1],s[F][i]=p}A[k-2]=R,++W;break}case 4:{if(0>=P[j]&&(P[j]=0>P[j]?-P[j]:0,v))for(F=0;F<=g;F++)I[F][j]=-I[F][j];for(;j<g&&!(P[j]>=P[j+1]);){if(p=P[j],P[j]=P[j+1],P[j+1]=p,v&&j<m-1)for(F=0;F<m;F++)p=I[F][j+1],I[F][j+1]=I[F][j],I[F][j]=p;if(w&&j<x-1)for(F=0;F<x;F++)p=s[F][j+1],s[F][j+1]=s[F][j],s[F][j]=p;j++}W=0,k--;break}}}if(D){var J=I;I=s,s=J}this.m=x,this.n=m,this.s=P,this.U=s,this.V=I}var r=e("../matrix"),i=e("./util"),l=i.hypotenuse,d=i.getFilled2DArray;o.prototype={get condition(){return this.s[0]/this.s[C(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var e=u(this.m,this.n)*this.s[0]*2.220446049250313e-16,t=0,n=this.s,o=0,i=n.length;o<i;o++)n[o]>e&&t++;return t},get diagonal(){return this.s},get threshold(){return 2.220446049250313e-16/2*u(this.m,this.n)*this.s[0]},get leftSingularVectors(){return r.Matrix.isMatrix(this.U)||(this.U=new r.Matrix(this.U)),this.U},get rightSingularVectors(){return r.Matrix.isMatrix(this.V)||(this.V=new r.Matrix(this.V)),this.V},get diagonalMatrix(){return r.Matrix.diag(this.s)},solve:function(t){var n=this.threshold,e=this.s.length,o=r.Matrix.zeros(e,e),s;for(s=0;s<e;s++)o[s][s]=S(this.s[s])<=n?0:1/this.s[s];var i=this.U,a=this.rightSingularVectors,l=a.mmul(o),d=a.rows,u=i.length,p=r.Matrix.zeros(d,u),c,m,h;for(s=0;s<d;s++)for(c=0;c<u;c++){for(h=0,m=0;m<e;m++)h+=l[s][m]*i[c][m];p[s][c]=h}return p.mmul(t)},solveForDiagonal:function(e){return this.solve(r.Matrix.diag(e))},inverse:function(){var t=this.V,n=this.threshold,e=t.length,o=t[0].length,s=new r.Matrix(e,this.s.length),a,i;for(a=0;a<e;a++)for(i=0;i<o;i++)s[a][i]=S(this.s[i])>n?t[a][i]/this.s[i]:0;var l=this.U,d=l.length,u=l[0].length,p=new r.Matrix(e,d),c,m;for(a=0;a<e;a++)for(i=0;i<d;i++){for(m=0,c=0;c<u;c++)m+=s[a][c]*l[i][c];p[a][i]=m}return p}},t.exports=o},{"../matrix":91,"./util":88}],88:[function(e,t,i){"use strict";i.hypotenuse=function(e,t){var i;return S(e)>S(t)?(i=t/e,S(e)*_(1+i*i)):0===t?0:(i=e/t,S(t)*_(1+i*i))},i.getEmpty2DArray=function(e,t){for(var n=Array(e),o=0;o<e;o++)n[o]=Array(t);return n},i.getFilled2DArray=function(e,t,n){for(var o=Array(e),s=0;s<e;s++){o[s]=Array(t);for(var i=0;i<t;i++)o[s][i]=n}return o}},{}],89:[function(e,t){"use strict";function i(e){return e=o.checkMatrix(e),n(e,o.eye(e.rows))}function n(e,t){return e=o.checkMatrix(e),t=o.checkMatrix(t),e.isSquare()?new r(e).solve(t):new l(e).solve(t)}var o=e("./matrix").Matrix,s=e("./dc/svd"),a=e("./dc/evd"),r=e("./dc/lu"),l=e("./dc/qr"),d=e("./dc/cholesky");o.inverse=o.inv=i,o.prototype.inverse=o.prototype.inv=function(){return i(this)},o.solve=n,o.prototype.solve=function(e){return n(this,e)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:r,LU:r,QrDecomposition:l,QR:l,CholeskyDecomposition:d,CHO:d,inverse:i,solve:n}},{"./dc/cholesky":83,"./dc/evd":84,"./dc/lu":85,"./dc/qr":86,"./dc/svd":87,"./matrix":91}],90:[function(e,t){"use strict";t.exports=e("./matrix").Matrix,t.exports.Decompositions=t.exports.DC=e("./decompositions")},{"./decompositions":89,"./matrix":91}],91:[function(e,t,i){"use strict";e("./symbol-species");var o=e("./abstractMatrix"),s=e("./util");class a extends o(Array){constructor(e,t){var o;if(1===arguments.length&&"number"==typeof e)return Array(e);if(a.isMatrix(e))return e.clone();if(n(e)&&0<e){if(super(e),n(t)&&0<t)for(o=0;o<e;o++)this[o]=Array(t);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(e)){var i=e;if(e=i.length,t=i[0].length,"number"!=typeof t||0===t)throw new TypeError("Data must be a 2D array with at least one element");for(super(e),o=0;o<e;o++){if(i[o].length!==t)throw new RangeError("Inconsistent array dimensions");this[o]=[].concat(i[o])}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=e,this.columns=t,this}set(e,t,i){return this[e][t]=i,this}get(e,t){return this[e][t]}clone(){for(var e=new this.constructor[Symbol.species](this.rows,this.columns),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e.set(t,i,this.get(t,i));return e}removeRow(e){if(s.checkRowIndex(this,e),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(e,1),this.rows-=1,this}addRow(e,t){return void 0===t&&(t=e,e=this.rows),s.checkRowIndex(this,e,!0),t=s.checkRowVector(this,t,!0),this.splice(e,0,t),this.rows+=1,this}removeColumn(e){if(s.checkColumnIndex(this,e),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var t=0;t<this.rows;t++)this[t].splice(e,1);return this.columns-=1,this}addColumn(e,t){"undefined"==typeof t&&(t=e,e=this.columns),s.checkColumnIndex(this,e,!0),t=s.checkColumnVector(this,t);for(var n=0;n<this.rows;n++)this[n].splice(e,0,t[n]);return this.columns+=1,this}}i.Matrix=a,a.abstractMatrix=o},{"./abstractMatrix":82,"./symbol-species":92,"./util":93}],92:[function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],93:[function(e,t,i){"use strict";var n=e("./matrix");i.checkRowIndex=function(e,t,i){var n=i?e.rows:e.rows-1;if(0>t||t>n)throw new RangeError("Row index out of range")},i.checkColumnIndex=function(e,t,i){var n=i?e.columns:e.columns-1;if(0>t||t>n)throw new RangeError("Column index out of range")},i.checkRowVector=function(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t},i.checkColumnVector=function(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t},i.checkIndices=function(e,t,i){var n=t.some((t)=>{return 0>t||t>=e.rows}),o=i.some((t)=>{return 0>t||t>=e.columns});if(n||o)throw new RangeError("Indices are out of range");if("object"!=typeof t||"object"!=typeof i)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(t)||(t=Array.from(t)),Array.isArray(i)||(t=Array.from(i)),{row:t,column:i}},i.checkRange=function(e,t,i,n,o){if(5!==arguments.length)throw new TypeError("Invalid argument type");var s=Array.from(arguments).slice(1).some(function(e){return"number"!=typeof e});if(s)throw new TypeError("Invalid argument type");if(t>i||n>o||0>t||t>=e.rows||0>i||i>=e.rows||0>n||n>=e.columns||0>o||o>=e.columns)throw new RangeError("Submatrix indices are out of range")},i.getRange=function(e,t){for(var n=Array(t-e+1),o=0;o<n.length;o++)n[o]=e+o;return n},i.sumByRow=function(e){for(var t=n.Matrix.zeros(e.rows,1),o=0;o<e.rows;++o)for(var i=0;i<e.columns;++i)t.set(o,0,t.get(o,0)+e.get(o,i));return t},i.sumByColumn=function(e){for(var t=n.Matrix.zeros(1,e.columns),o=0;o<e.rows;++o)for(var i=0;i<e.columns;++i)t.set(0,i,t.get(0,i)+e.get(o,i));return t},i.sumAll=function(e){for(var t=0,n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)t+=e.get(n,i);return t}},{"./matrix":91}],94:[function(e,t){"use strict";var i=e("../abstractMatrix"),n=e("../matrix");class o extends i(){constructor(e,t,i){super(),this.matrix=e,this.rows=t,this.columns=i}static get[Symbol.species](){return n.Matrix}}t.exports=o},{"../abstractMatrix":82,"../matrix":91}],95:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e,t){super(e,e.rows,1),this.column=t}set(e,t,i){return this.matrix.set(e,this.column,i),this}get(e){return this.matrix.get(e,this.column)}}},{"./base":94}],96:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e){super(e,e.rows,e.columns)}set(e,t,i){return this.matrix.set(e,this.columns-t-1,i),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}},{"./base":94}],97:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e){super(e,e.rows,e.columns)}set(e,t,i){return this.matrix.set(this.rows-e-1,t,i),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}},{"./base":94}],98:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e,t){super(e,1,e.columns),this.row=t}set(e,t,i){return this.matrix.set(this.row,t,i),this}get(e,t){return this.matrix.get(this.row,t)}}},{"./base":94}],99:[function(e,t){"use strict";var i=e("./base"),n=e("../util");t.exports=class extends i{constructor(e,t,i){var o=n.checkIndices(e,t,i);super(e,o.row.length,o.column.length),this.rowIndices=o.row,this.columnIndices=o.column}set(e,t,i){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],i),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}},{"../util":93,"./base":94}],100:[function(e,t){"use strict";var i=e("./base"),n=e("../util");t.exports=class extends i{constructor(e,t,i,o,s){n.checkRange(e,t,i,o,s),super(e,i-t+1,s-o+1),this.startRow=t,this.startColumn=o}set(e,t,i){return this.matrix.set(this.startRow+e,this.startColumn+t,i),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}},{"../util":93,"./base":94}],101:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e){super(e,e.columns,e.rows)}set(e,t,i){return this.matrix.set(t,e,i),this}get(e,t){return this.matrix.get(t,e)}}},{"./base":94}],102:[function(e,t){"use strict";function n(e,t){var n=t.length/3,o=e.rows,s=c.zeros(e.length,1),a,r,i,l;for(r=0;r<n;r++)for(l=f(t[r+2*n][0]/2,2),a=t[r+n][0]*l,i=0;i<o;i++)s[i][0]+=a/(f(e[i][0]-t[r][0],2)+l);return s}function i(e,t){for(var n=t[1][0]*f(t[2][0]/2,2),o=e.rows,s=new c(e.rows,e.columns),a=0;a<o;a++)s[a][0]=n/(f(e[a][0]-t[0][0],2)+f(t[2][0]/2,2));return s}function o(e,t){for(var n=t[2][0]*t[2][0]/2,o=e.rows,s=new c(e.rows,e.columns),a=0;a<o;a++)s[a][0]=t[1][0]*d(-(e[a][0]-t[0][0])*(e[a][0]-t[0][0])/n);return s}function s(e,n,o){o=o||{};var s=r(e,o.percentage||0);if(null===s||3>s[0].rows)return null;var a=s[0],t=s[1],d=s[2],u=a.rows,p=[u/_(t.dot(t))],o=Object.create(o.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),m=S(a[0][0]-a[1][0]),h=new c([[-m/1e4],[-0.001],[-m/1e4]]),g=new c([[n.x],[1],[n.width]]),f=new c([[n.x-m],[0.75],[n.width/4]]),y=new c([[n.x+m],[1.25],[4*n.width]]),x=l.optimize(i,g,a,t,p,h,f,y,[],o);return x=x.p,[x[0],[x[1][0]*d],x[2]]}function a(e,i,n){n=n||{};var s=r(e,n.percentage||0);if(null===s||3>s[0].rows)return null;var a=s[0],t=s[1],d=s[2],u=a.rows,p=[u/_(t.dot(t))],n=Object.create(n.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),m=S(a[0][0]-a[1][0]),h=new c([[-m/1e4],[-0.001],[-m/1e4]]),h=new c([[-S(a[0][0]-a[1][0])/1e3],[-0.001],[-i.width/1e3]]),g=new c([[i.x],[1],[i.width]]),f=new c([[i.x-m],[0.75],[i.width/4]]),y=new c([[i.x+m],[1.25],[4*i.width]]),x=l.optimize(o,g,a,t,p,h,f,y,[],n);return x=x.p,[x[0],[x[1][0]*d],x[2]]}function r(e,n){var o=e.length,s=null,t=null,a=0,r,l,d;if(2==o){var i=e[0].length;if(s=Array(i),t=Array(i),r=e[0],l=e[1],"number"==typeof r[0])for(d=0;d<i;d++)s[d]=r[d],t[d]=l[d],l[d]>a&&(a=l[d]);else if("object"==typeof r[0])for(d=0;d<i;d++)s[d]=r[d][0],t[d]=l[d][0],l[d][0]>a&&(a=l[d][0])}else{var i=o;for(s=Array(i),t=Array(i),d=0;d<i;d++)s[d]=e[d][0],t[d]=e[d][1],t[d]>a&&(a=t[d])}for(d=0;d<i;d++)t[d]/=a;if(n)for(d=i-1;0<=d;d--)t[d]<n&&(t.splice(d,1),s.splice(d,1));return 0<s.length?[new c([s]).transpose(),new c([t]).transpose(),a]:null}var l=e("ml-curve-fitting"),u=l.Matrix.algebra,c=e("ml-matrix");t.exports.optimizeSingleLorentzian=s,t.exports.optimizeLorentzianSum=function(e,o,s){var a=r(e);if(null===a||3>a[0].rows)return null;var d=a[0],t=a[1],p=a[2],m=d.rows,h=[m/u.sqrt(t.dot(t))],s=Object.create(s||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),g=o.length,f=new c(3*g,1),y=new c(3*g,1),x=new c(3*g,1),b=new c(3*g,1),_=S(d[0][0]-d[1][0]),C;for(C=0;C<g;C++)f[C][0]=o[C].x,f[C+g][0]=1,f[C+2*g][0]=o[C].width,y[C][0]=o[C].x-_,y[C+g][0]=0,y[C+2*g][0]=o[C].width/4,x[C][0]=o[C].x+_,x[C+g][0]=1.5,x[C+2*g][0]=4*o[C].width,b[C][0]=-_/1e3,b[C+g][0]=-1e-3,b[C+2*g][0]=-_/1e3;var b=-S(d[0][0]-d[1][0])/1e4,i=l.optimize(n,f,d,t,h,b,y,x,[],s);i=i.p;var k=Array(g);for(C=0;C<g;C++)k[C]=[i[C],[i[C+g][0]*p],i[C+2*g]];return k},t.exports.optimizeSingleGaussian=a,t.exports.optimizeGaussianSum=function(e,o,s){var a=r(e);if(null===a||3>a[0].rows)return null;var d=a[0],t=a[1],p=a[2],m=d.rows,h=new c(m,1),g=m/u.sqrt(t.dot(t)),f;for(f=0;f<m;f++)h[f][0]=g;var s=Object.create(s||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,2]),i=o.length,y=new c(3*i,1),x=new c(3*i,1),b=new c(3*i,1),_=new c(3*i,1),C=S(d[0][0]-d[1][0]);for(f=0;f<i;f++)y[f][0]=o[f].x,y[f+i][0]=o[f].y/p,y[f+2*i][0]=o[f].width,x[f][0]=o[f].x-C,x[f+i][0]=0.8*o[f].y/p,x[f+2*i][0]=o[f].width/2,b[f][0]=o[f].x+C,b[f+i][0]=1.2*o[f].y/p,b[f+2*i][0]=2*o[f].width,_[f][0]=-C/1e3,_[f+i][0]=-1e-3,_[f+2*i][0]=-C/1e3;var k=l.optimize(n,y,d,t,h,_,x,b,[],s);k=k.p;var w=Array(i);for(f=0;f<i;f++)w[f]=[k[f],[k[f+i][0]*p],k[f+2*i]];return w},t.exports.singleGaussian=o,t.exports.singleLorentzian=i,t.exports.optimizeGaussianTrain=function(e,n,o){var s=r(e);if(null===s||3>s[0].rows)return null;for(var l=s[0],t=s[1],d=s[2],u=0,p=l.length,c=[],m=0,i,h,g,d,f;m<n.length;m++){for(i=n[m].x-1.5*n[m].width;l[u++]<i&&u<p;);for(i=n[m].x+1.5*n[m].width,h=[],g=[];l[u]<=i&&u<p;)h.push(l[u][0]),g.push(t[u][0]*d),u++;f=a([h,g],n[m],o),f?c.push({x:f[0][0],y:f[1][0],width:f[2][0],opt:!0}):c.push({x:n[m].x,y:n[m].y,width:n[m].width,opt:!1})}return c},t.exports.optimizeLorentzianTrain=function(e,n,o){var a=r(e);if(null===a||3>a[0].rows)return null;for(var l=a[0],t=a[1],d=a[2],u=0,p=l.length,c=[],m=0,i,h,g,d,f;m<n.length;m++){for(i=n[m].x-1.5*n[m].width;l[u++]<i&&u<p;);for(i=n[m].x+1.5*n[m].width,h=[],g=[];l[u]<=i&&u<p;)h.push(l[u][0]),g.push(t[u][0]*d),u++;f=s([h,g],n[m],o),f?c.push({x:f[0][0],y:f[1][0],width:f[2][0],opt:!0}):c.push({x:n[m].x,y:n[m].y,width:n[m].width,opt:!1})}return c}},{"ml-curve-fitting":53,"ml-matrix":90}],103:[function(t,i,o){"use strict";function n(e,t){return e-t}o.sum=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t},o.max=function(e){for(var t=-Infinity,n=e.length,o=0;o<n;o++)e[o]>t&&(t=e[o]);return t},o.min=function(e){for(var t=Infinity,n=e.length,o=0;o<n;o++)e[o]<t&&(t=e[o]);return t},o.minMax=function(e){for(var t=Infinity,n=-Infinity,o=e.length,s=0;s<o;s++)e[s]<t&&(t=e[s]),e[s]>n&&(n=e[s]);return{min:t,max:n}},o.arithmeticMean=function(e){for(var t=0,n=e.length,o=0;o<n;o++)t+=e[o];return t/n},o.mean=o.arithmeticMean,o.geometricMean=function(e){for(var t=1,n=e.length,o=0;o<n;o++)t*=e[o];return f(t,1/n)},o.logMean=function(e){for(var t=0,n=e.length,o=0;o<n;o++)t+=r(e[o]);return t/n},o.grandMean=function(e,t){for(var o=0,s=0,n=e.length,a=0;a<n;a++)o+=t[a]*e[a],s+=t[a];return o/s},o.truncatedMean=function(e,t,o){o===void 0&&(o=!1),o||(e=e.slice().sort(n));for(var s=e.length,a=p(s*t),r=0,l=a;l<s-a;l++)r+=e[l];return r/(s-2*a)},o.harmonicMean=function(e){for(var t=0,n=e.length,o=0;o<n;o++){if(0===e[o])throw new RangeError("value at index "+o+"is zero");t+=1/e[o]}return n/t},o.contraHarmonicMean=function(e){for(var t=0,n=0,o=e.length,s=0;s<o;s++)t+=e[s]*e[s],n+=e[s];if(0>n)throw new RangeError("sum of values is negative");return t/n},o.median=function(e,t){t===void 0&&(t=!1),t||(e=e.slice().sort(n));var i=e.length,o=p(i/2);return 0==i%2?0.5*(e[o-1]+e[o]):e[o]},o.variance=function(e,t){t===void 0&&(t=!0);for(var n=o.mean(e),s=0,a=e.length,r=0,i;r<a;r++)i=e[r]-n,s+=i*i;return t?s/(a-1):s/a},o.standardDeviation=function(e,t){return _(o.variance(e,t))},o.standardError=function(e){return o.standardDeviation(e)/_(e.length)},o.quartiles=function(t,i){"undefined"==typeof i&&(i=!1),i||(t=t.slice(),t.sort(n));var s=t.length/4,a=t[e(s)-1],r=o.median(t,!0),l=t[e(3*s)-1];return{q1:a,q2:r,q3:l}},o.pooledStandardDeviation=function(e,t){return _(o.pooledVariance(e,t))},o.pooledVariance=function(e,t){"undefined"==typeof t&&(t=!0);for(var n=0,s=0,a=e.length,r=0;r<a;r++){var i=e[r],l=o.variance(i);n+=(i.length-1)*l,s+=t?i.length-1:i.length}return n/s},o.mode=function(e){var t=e.length,n=Array(t),o;for(o=0;o<t;o++)n[o]=0;var i=Array(t),s=0;for(o=0;o<t;o++){var a=i.indexOf(e[o]);0<=a?n[a]++:(i[s]=e[o],n[s]=1,s++)}var r=0,l=0;for(o=0;o<s;o++)n[o]>r&&(r=n[o],l=o);return i[l]},o.covariance=function(e,t,n){"undefined"==typeof n&&(n=!0);var s=o.mean(e),a=o.mean(t);if(e.length!==t.length)throw"Vectors do not have the same dimensions";for(var r=0,d=e.length,l=0;l<d;l++){var i=e[l]-s,u=t[l]-a;r+=i*u}return n?r/(d-1):r/d},o.skewness=function(e,t){"undefined"==typeof t&&(t=!0);for(var n=o.mean(e),s=0,r=0,d=e.length,l=0,i;l<d;l++)i=e[l]-n,s+=i*i,r+=i*i*i;var u=s/d,p=r/d,c=p/f(u,3/2);if(t){var m=_(d*(d-1));return m/(d-2)*c}return c},o.kurtosis=function(e,t){"undefined"==typeof t&&(t=!0);for(var s=o.mean(e),a=e.length,n=0,r=0,l=0,i;l<a;l++)i=e[l]-s,n+=i*i,r+=i*i*i*i;var d=n/a,u=r/a;if(t){var p=n/(a-1),c=r/(p*p);return a*(a+1)/((a-1)*(a-2)*(a-3))*c-3*((a-1)*(a-1)/((a-2)*(a-3)))}return u/(d*d)-3},o.entropy=function(e,t){"undefined"==typeof t&&(t=0);for(var n=0,o=e.length,s=0;s<o;s++)n+=e[s]*r(e[s]+t);return-n},o.weightedMean=function(e,t){for(var n=0,o=e.length,s=0;s<o;s++)n+=e[s]*t[s];return n},o.weightedStandardDeviation=function(e,t){return _(o.weightedVariance(e,t))},o.weightedVariance=function(e,t){for(var n=o.weightedMean(e,t),s=0,r=e.length,l=0,a=0,d=0;d<r;d++){var i=e[d]-n,u=t[d];s+=u*(i*i),a+=u,l+=u*u}return s*(a/(a*a-l))},o.center=function(e,t){"undefined"==typeof t&&(t=!1);var n=e;t||(n=e.slice());for(var s=o.mean(n),a=n.length,r=0;r<a;r++)n[r]-=s},o.standardize=function(e,t,n){"undefined"==typeof t&&(t=o.standardDeviation(e)),"undefined"==typeof n&&(n=!1);for(var s=e.length,a=n?e:Array(s),r=0;r<s;r++)a[r]=e[r]/t;return a},o.cumulativeSum=function(e){var t=e.length,n=Array(t);n[0]=e[0];for(var o=1;o<t;o++)n[o]=n[o-1]+e[o];return n}},{}],104:[function(e,t,i){"use strict";i.array=e("./array"),i.matrix=e("./matrix")},{"./array":103,"./matrix":105}],105:[function(e,t){"use strict";function o(e,t){"undefined"==typeof t&&(t=0);var n=e.length,o=e[0].length,s,a,r,i;if(-1===t){for(s=[0],a=n*o,r=0;r<n;r++)for(i=0;i<o;i++)s[0]+=e[r][i];s[0]/=a}else if(0===t)for(s=Array(o),a=n,i=0;i<o;i++){for(s[i]=0,r=0;r<n;r++)s[i]+=e[r][i];s[i]/=a}else if(1===t)for(s=Array(n),a=o,i=0;i<n;i++){for(s[i]=0,r=0;r<o;r++)s[i]+=e[i][r];s[i]/=a}else throw new Error("Invalid dimension");return s}function n(e,t,n){for(var o=s(e,t,n),a=o.length,r=0;r<a;r++)o[r]=_(o[r]);return o}function s(e,t,n){"undefined"==typeof n&&(n=!0),t=t||o(e);var s=e.length;if(0===s)return[];for(var a=e[0].length,r=Array(a),l=0;l<a;l++){for(var d=0,u=0,p=0,c=0;c<s;c++)p=e[c][l]-t[l],d+=p,u+=p*p;r[l]=n?(u-d*d/s)/(s-1):(u-d*d/s)/s}return r}function i(e,t,n){"undefined"==typeof n&&(n=0),"undefined"==typeof t&&(0===n?t=e.length-1:1===n&&(t=e[0].length-1));var a=o(e,n),r=e.length;if(0===r)return[[]];var l=e[0].length,d,u,i,p,s;if(0===n){for(d=Array(l),u=0;u<l;u++)d[u]=Array(l);for(u=0;u<l;u++)for(i=u;i<l;i++){for(p=0,s=0;s<r;s++)p+=(e[s][i]-a[i])*(e[s][u]-a[u]);p/=t,d[u][i]=p,d[i][u]=p}}else if(1===n){for(d=Array(r),u=0;u<r;u++)d[u]=Array(r);for(u=0;u<r;u++)for(i=u;i<r;i++){for(p=0,s=0;s<l;s++)p+=(e[i][s]-a[i])*(e[u][s]-a[u]);p/=t,d[u][i]=p,d[i][u]=p}}else throw new Error("Invalid dimension");return d}function a(e,t,i){return t=t||o(e),"undefined"==typeof i&&(i=n(e,!0,t)),d(l(e,t,!1),i,!0)}function l(e,t,n){t=t||o(e);var s=e,a=e.length,r,i,l;if(!n)for(s=Array(a),r=0;r<a;r++)s[r]=Array(e[r].length);for(r=0;r<a;r++){var d=s[r];for(i=0,l=d.length;i<l;i++)d[i]=e[r][i]-t[i]}return s}function d(e,t,o){"undefined"==typeof t&&(t=n(e));var s=e,a=e.length,r,i,l;if(!o)for(s=Array(a),r=0;r<a;r++)s[r]=Array(e[r].length);for(r=0;r<a;r++){var d=s[r],u=e[r];for(i=0,l=d.length;i<l;i++)0===t[i]||isNaN(t[i])||(d[i]=u[i]/t[i])}return s}function u(e,t,n){"undefined"==typeof n&&(n=0);var o=e.length;if(0===o)return[];var s=e[0].length,a,r,i,l,d,u;if(0===n){for(a=Array(s),r=0;r<s;r++)a[r]=0;for(r=0;r<o;r++)for(u=e[r],d=t[r],l=0;l<s;l++)a[l]+=u[l]*d}else if(1===n){for(a=Array(o),r=0;r<o;r++)a[r]=0;for(l=0;l<o;l++)for(u=e[l],d=t[l],r=0;r<s;r++)a[l]+=u[r]*d}else throw new Error("Invalid dimension");var p=m.sum(t);if(0!==p)for(r=0,i=a.length;r<i;r++)a[r]/=p;return a}function c(e,t,n,o,a){a=a||0,n=n||u(e,t,a),"undefined"==typeof o&&(o=1);var r=e.length;if(0===r)return[[]];var l=e[0].length,d,p,i,c,m;if(0===a){for(d=Array(l),p=0;p<l;p++)d[p]=Array(l);for(p=0;p<l;p++)for(i=p;i<l;i++){for(m=0,c=0;c<r;c++)m+=t[c]*(e[c][i]-n[i])*(e[c][p]-n[p]);d[p][i]=m*o,d[i][p]=m*o}}else if(1===a){for(d=Array(r),p=0;p<r;p++)d[p]=Array(r);for(p=0;p<r;p++)for(i=p;i<r;i++){for(m=0,c=0;c<l;c++)m+=t[c]*(e[i][c]-n[i])*(e[p][c]-n[p]);d[p][i]=m*o,d[i][p]=m*o}}else throw new Error("Invalid dimension");return d}var m=e("./array");t.exports={entropy:function(e,t){"undefined"==typeof t&&(t=0);for(var n=0,o=e.length,s=e[0].length,a=0;a<o;a++)for(var i=0;i<s;i++)n+=e[a][i]*r(e[a][i]+t);return-n},mean:o,standardDeviation:n,variance:s,median:function(e){for(var t=e.length,n=e[0].length,o=Array(n),s=0,i;s<n;s++){i=Array(t);for(var a=0;a<t;a++)i[a]=e[a][s];i.sort();var r=i.length;o[s]=0==r%2?0.5*(i[r/2]+i[r/2-1]):i[p(r/2)]}return o},mode:function(e){var t=e.length,n=e[0].length,o=Array(n),s,i;for(s=0;s<n;s++){for(var a=Array(t),r=0;r<t;r++)a[r]=0;var l=Array(t),d=0;for(i=0;i<t;i++){var u=l.indexOf(e[i][s]);0<=u?a[u]++:(l[d]=e[i][s],a[d]=1,d++)}var p=0,c=0;for(i=0;i<d;i++)a[i]>p&&(p=a[i],c=i);o[s]=l[c]}return o},skewness:function(e,t){"undefined"==typeof t&&(t=!0);for(var s=o(e),r=e.length,n=s.length,l=Array(n),d=0;d<n;d++){for(var u=0,p=0,c=0,i;c<r;c++)i=e[c][d]-s[d],u+=i*i,p+=i*i*i;var m=u/r,h=p/r,y=h/f(m,3/2);if(t){var g=_(r*(r-1));l[d]=g/(r-2)*y}else l[d]=y}return l},kurtosis:function(e,t){"undefined"==typeof t&&(t=!0);for(var s=o(e),a=e.length,n=e[0].length,r=Array(n),l=0;l<n;l++){for(var d=0,u=0,p=0,i;p<a;p++)i=e[p][l]-s[l],d+=i*i,u+=i*i*i*i;var c=d/a,m=u/a;if(t){var h=d/(a-1),g=u/(h*h);r[l]=a*(a+1)/((a-1)*(a-2)*(a-3))*g-3*((a-1)*(a-1)/((a-2)*(a-3)))}else r[l]=m/(c*c)-3}return r},standardError:function(e){for(var t=e.length,o=n(e),s=o.length,a=Array(s),r=_(t),l=0;l<s;l++)a[l]=o[l]/r;return a},covariance:function(e,t){return i(e,void 0,t)},scatter:i,correlation:function(e){var t=o(e),s=n(e,!0,t),r=a(e,t,s),d=e.length,u=e[0].length,p=Array(u),m,i;for(m=0;m<u;m++)p[m]=Array(u);for(m=0;m<u;m++)for(i=m;i<u;i++){for(var h=0,c=0,g=r.length;c<g;c++)h+=r[c][i]*r[c][m];h/=d-1,p[m][i]=h,p[i][m]=h}return p},zScores:a,center:l,standardize:d,weightedVariance:function(e,t){var n=o(e),s=e.length;if(0===s)return[];for(var r=e[0].length,l=Array(r),d=0;d<r;d++){for(var u=0,p=0,a=0,c=0;c<s;c++){var i=e[c][d]-n[d],m=t[c];u+=m*(i*i),a+=m,p+=m*m}l[d]=u*(a/(a*a-p))}return l},weightedMean:u,weightedCovariance:function(e,t,n,o){o=o||0,n=n||u(e,t,o);for(var s=0,a=0,r=0,i=t.length;r<i;r++)s+=t[r],a+=t[r]*t[r];var l=s/(s*s-a);return c(e,t,n,l,o)},weightedScatter:c}},{"./array":103}],106:[function(e,t){"use strict";function o(e,t,n,o){for(var s=0,a=0,r=t-n;r<t+n;r++)0<=r&&r<e.length-1&&(s+=e[r+1]-e[r],a++);return f(s/a,o)}function a(e,t,i,n){var o=0;return o=0<i?(4*i-2)/(i*(2*t-i+1))*(e*a(e,t,i-1,n)+n*a(e,t,i-1,n-1))-(i-1)*(2*t+i)/(i*(2*t-i+1))*a(e,t,i-2,n):0==i&&0==n?1:0,o}function r(e,t){var i=1;if(e>=t)for(var n=e-t+1;n<=e;n++)i*=n;return i}function i(e,i,t,o,n){for(var s=0,l=0;l<=o;l++)s+=(2*l+1)*(r(2*t,l)/r(2*t+l+1,l+1))*a(e,t,l,0)*a(i,t,l,n);return s}function s(e,o,n){for(var s=Array(e),a=p(e/2),r=-a;r<=a;r++){s[r+a]=Array(e);for(var t=-a;t<=a;t++)s[r+a][t+a]=i(t,r,a,o,n)}return s}var u=e("extend"),l=e("ml-stat"),c={windowSize:9,derivative:0,polynomial:3};t.exports=function(e,t,a){if(a=u({},c,a),0==a.windowSize%2||5>a.windowSize||!n(a.windowSize))throw new RangeError("Invalid window size (should be odd and at least 5 integer number)");if(a.windowSize>e.length)throw new RangeError("Window size is higher than the data length "+a.windowSize+">"+e.length);if(0>a.derivative||!n(a.derivative))throw new RangeError("Derivative should be a positive integer");if(1>a.polynomial||!n(a.polynomial))throw new RangeError("Polynomial should be a positive integer");6<=a.polynomial&&console.warn("You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems");var r=a.windowSize,m=p(r/2),h=e.length,g=Array(h),y=s(r,a.polynomial,a.derivative),x=0,b=!0;"[object Array]"===Object.prototype.toString.call(t)?b=!1:x=f(t,a.derivative);for(var _=0;_<m;_++){for(var i=y[m-_-1],C=y[m+_+1],k=0,w=0,j=0;j<r;j++)k+=i[j]*e[j],w+=C[j]*e[h-r+j-1];b?(g[m-_-1]=k/x,g[h-m+_]=w/x):(x=o(t,m-_-1,m,a.derivative),g[m-_-1]=k/x,x=o(t,h-m+_,m,a.derivative),g[h-m+_]=w/x)}for(var l=y[m],_=r,v;_<h+1;_++){v=0;for(var j=0;j<r;j++)v+=l[j]*e[j+_-r];b||(x=o(t,_-m-1,m,a.derivative)),g[_-m-1]=v/x}return g}},{extend:5,"ml-stat":104}],107:[function(e,t){"use strict";function n(e){var t=_(2*e.length+0.25)-0.5,n=[],o=Array(t),s=t,a=0,i=[];for(a=t-1;0<=a;a--)o[a]=1;for(var l=-1,d=[];0<s;){if(0===d.length){for(i=Array(t),a=0;a<t;a++)i[a]=0;for(n.push(i),l=0;0==o[l];l++);}else l=d.splice(0,1);i[l]=1,o[l]=0,s--;var p=Array(t);for(a=0;a<t;a++){var m=u(l,a),c=C(l,a);p[a]=e[c*(2*t-c-1)/2+m],1==p[a]&&1==o[a]&&0==i[a]&&(d.push(a),i[a]=1)}}return n}var o={threshold:0,out:"assignment"};t.exports=function(e,t){var s=Object.assign({},o,t),a,r,i,l;if("number"==typeof e[0])a=n(e);else if("object"==typeof e[0]){for(var d=e.length,u=Array(d*(d+1)/2),p=0,r=0;r<d;r++)for(var i=r;i<d;i++)u[p++]=e[r][i]>s.threshold?1:0;a=n(u)}if("indexes"===s.out||"values"===s.out){var c=Array(a.length);for(r=0;r<a.length;r++)for(c[r]=[],i=0;i<a[r].length;i++)0!=a[r][i]&&c[r].push(i);if("values"===s.out){var m=Array(c.length);for(r=0;r<c.length;r++)for(m[r]=Array(c[r].length),i=0;i<c[r].length;i++)for(m[r][i]=Array(c[r].length),l=0;l<c[r].length;l++)m[r][i][l]=e[c[r][i]][c[r][l]];return m}return c}return a}},{}],108:[function(e,t,n){"use strict";function o(e,t){for(var n in t)e=e.replace(new RegExp("%"+n+"%","g"),t[n]);return e}var s=e("ml-hash-table");class a{constructor(e,t,n={}){if(e instanceof a){var o=e;return void this._init(o.rows,o.columns,o.elements.clone(),o.threshold)}if(Array.isArray(e)){var r=e;e=r.length,n=t||{},t=r[0].length,this._init(e,t,new s(n),n.threshold);for(var l=0;l<e;l++)for(var i=0,d;i<t;i++)d=r[l][i],this.threshold&&S(d)<this.threshold&&(d=0),0!==d&&this.elements.set(l*t+i,r[l][i])}else this._init(e,t,new s(n),n.threshold)}_init(e,t,i,n){this.rows=e,this.columns=t,this.elements=i,this.threshold=n||0}static eye(e=1,t=e){for(var n=C(e,t),o=new a(e,t,{initialCapacity:n}),s=0;s<n;s++)o.set(s,s,1);return o}clone(){return new a(this)}to2DArray(){for(var e=Array(this.rows),t=0;t<this.rows;t++){e[t]=Array(this.columns);for(var i=0;i<this.columns;i++)e[t][i]=this.get(t,i)}return e}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var e=!0;return this.forEachNonZero((t,i,n)=>{return this.get(i,t)===n?n:(e=!1,!1)}),e}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(e,t){return this.elements.get(e*this.columns+t)}set(e,t,i){return this.threshold&&S(i)<this.threshold&&(i=0),0===i?this.elements.remove(e*this.columns+t):this.elements.set(e*this.columns+t,i),this}mmul(e){this.columns!==e.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var t=this.rows,i=e.columns,n=new a(t,i);return this.forEachNonZero((t,i,o)=>{return e.forEachNonZero((e,s,a)=>{return i===e&&n.set(t,s,n.get(t,s)+o*a),a}),o}),n}kroneckerProduct(e){var t=this.rows,i=this.columns,n=e.rows,o=e.columns,s=new a(t*n,i*o,{initialCapacity:this.cardinality*e.cardinality});return this.forEachNonZero((t,i,a)=>{return e.forEachNonZero((e,r,l)=>{return s.set(n*t+e,o*i+r,a*l),l}),a}),s}forEachNonZero(e){return this.elements.forEachPair((t,n)=>{var o=0|t/this.columns,i=t%this.columns,s=e(o,i,n);return!1!==s&&(this.threshold&&S(s)<this.threshold&&(s=0),s!==n&&(0===s?this.elements.remove(t,!0):this.elements.set(t,s)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){var e=this.cardinality,t=Array(e),n=Array(e),o=Array(e),s=0;return this.forEachNonZero((e,i,a)=>{return t[s]=e,n[s]=i,o[s]=a,s++,a}),{rows:t,columns:n,values:o}}setThreshold(e){return 0!==e&&e!==this.threshold&&(this.threshold=e,this.forEachNonZero((e,t,i)=>i)),this}}a.prototype.klass="Matrix",a.identity=a.eye,a.prototype.tensorProduct=a.prototype.kroneckerProduct,t.exports=a;var r=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,l=`
(function %name%S(value) {
    this.forEachNonZero((i, j, v) => v %op% value);
    return this;
})
`,d=`
(function %name%M(matrix) {
    matrix.forEachNonZero((i, j, v) => {
        this.set(i, j, this.get(i, j) %op% v);
        return v;
    });
    return this;
})
`,u=`
(function %name%(matrix, value) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%(value);
})
`,p=`
(function %name%() {
    this.forEachNonZero((i, j, v) => %method%(v));
    return this;
})
`,c=`
(function %name%(matrix) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%();
})
`,m=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(var h of m)for(var g=1;g<h.length;g++)a.prototype[h[g]]=eval(o(r,{name:h[g],op:h[0]})),a.prototype[h[g]+"S"]=eval(o(l,{name:h[g]+"S",op:h[0]})),a.prototype[h[g]+"M"]=eval(o(d,{name:h[g]+"M",op:h[0]})),a[h[g]]=eval(o(u,{name:h[g]}));var i=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(e){i.push(["Math."+e,e])});for(var f of i)for(var g=1;g<f.length;g++)a.prototype[f[g]]=eval(o(p,{name:f[g],method:f[0]})),a[f[g]]=eval(o(c,{name:f[g]}))},{"ml-hash-table":65}],109:[function(t,i,o){"use strict";function n(e,t){return e-t}o.sum=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t},o.max=function(e){for(var t=e[0],n=e.length,o=1;o<n;o++)e[o]>t&&(t=e[o]);return t},o.min=function(e){for(var t=e[0],n=e.length,o=1;o<n;o++)e[o]<t&&(t=e[o]);return t},o.minMax=function(e){for(var t=e[0],n=e[0],o=e.length,s=1;s<o;s++)e[s]<t&&(t=e[s]),e[s]>n&&(n=e[s]);return{min:t,max:n}},o.arithmeticMean=function(e){for(var t=0,n=e.length,o=0;o<n;o++)t+=e[o];return t/n},o.mean=o.arithmeticMean,o.geometricMean=function(e){for(var t=1,n=e.length,o=0;o<n;o++)t*=e[o];return f(t,1/n)},o.logMean=function(e){for(var t=0,n=e.length,o=0;o<n;o++)t+=r(e[o]);return t/n},o.grandMean=function(e,t){for(var o=0,s=0,n=e.length,a=0;a<n;a++)o+=t[a]*e[a],s+=t[a];return o/s},o.truncatedMean=function(e,t,o){o===void 0&&(o=!1),o||(e=[].concat(e).sort(n));for(var s=e.length,a=p(s*t),r=0,l=a;l<s-a;l++)r+=e[l];return r/(s-2*a)},o.harmonicMean=function(e){for(var t=0,n=e.length,o=0;o<n;o++){if(0===e[o])throw new RangeError("value at index "+o+"is zero");t+=1/e[o]}return n/t},o.contraHarmonicMean=function(e){for(var t=0,n=0,o=e.length,s=0;s<o;s++)t+=e[s]*e[s],n+=e[s];if(0>n)throw new RangeError("sum of values is negative");return t/n},o.median=function(e,t){t===void 0&&(t=!1),t||(e=[].concat(e).sort(n));var i=e.length,o=p(i/2);return 0==i%2?0.5*(e[o-1]+e[o]):e[o]},o.variance=function(e,t){t===void 0&&(t=!0);for(var n=o.mean(e),s=0,a=e.length,r=0,i;r<a;r++)i=e[r]-n,s+=i*i;return t?s/(a-1):s/a},o.standardDeviation=function(e,t){return _(o.variance(e,t))},o.standardError=function(e){return o.standardDeviation(e)/_(e.length)},o.robustMeanAndStdev=function(e){var t=0,o=0,s=e.length,a=0;for(a=0;a<s;a++)t+=e[a];t/=s;var i=Array(s);for(a=0;a<s;a++)i[a]=S(e[a]-t);return i.sort(n),o=1==s%2?i[(s-1)/2]/0.6745:0.5*(i[s/2]+i[s/2-1])/0.6745,{mean:t,stdev:o}},o.quartiles=function(t,i){"undefined"==typeof i&&(i=!1),i||(t=[].concat(t).sort(n));var s=t.length/4,a=t[e(s)-1],r=o.median(t,!0),l=t[e(3*s)-1];return{q1:a,q2:r,q3:l}},o.pooledStandardDeviation=function(e,t){return _(o.pooledVariance(e,t))},o.pooledVariance=function(e,t){"undefined"==typeof t&&(t=!0);for(var n=0,s=0,a=e.length,r=0;r<a;r++){var i=e[r],l=o.variance(i);n+=(i.length-1)*l,s+=t?i.length-1:i.length}return n/s},o.mode=function(e){var t=e.length,n=Array(t),o;for(o=0;o<t;o++)n[o]=0;var i=Array(t),s=0;for(o=0;o<t;o++){var a=i.indexOf(e[o]);0<=a?n[a]++:(i[s]=e[o],n[s]=1,s++)}var r=0,l=0;for(o=0;o<s;o++)n[o]>r&&(r=n[o],l=o);return i[l]},o.covariance=function(e,t,n){"undefined"==typeof n&&(n=!0);var s=o.mean(e),a=o.mean(t);if(e.length!==t.length)throw"Vectors do not have the same dimensions";for(var r=0,d=e.length,l=0;l<d;l++){var i=e[l]-s,u=t[l]-a;r+=i*u}return n?r/(d-1):r/d},o.skewness=function(e,t){"undefined"==typeof t&&(t=!0);for(var n=o.mean(e),s=0,r=0,d=e.length,l=0,i;l<d;l++)i=e[l]-n,s+=i*i,r+=i*i*i;var u=s/d,p=r/d,c=p/f(u,3/2);if(t){var m=_(d*(d-1));return m/(d-2)*c}return c},o.kurtosis=function(e,t){"undefined"==typeof t&&(t=!0);for(var s=o.mean(e),a=e.length,n=0,r=0,l=0,i;l<a;l++)i=e[l]-s,n+=i*i,r+=i*i*i*i;var d=n/a,u=r/a;if(t){var p=n/(a-1),c=r/(p*p);return a*(a+1)/((a-1)*(a-2)*(a-3))*c-3*((a-1)*(a-1)/((a-2)*(a-3)))}return u/(d*d)-3},o.entropy=function(e,t){"undefined"==typeof t&&(t=0);for(var n=0,o=e.length,s=0;s<o;s++)n+=e[s]*r(e[s]+t);return-n},o.weightedMean=function(e,t){for(var n=0,o=e.length,s=0;s<o;s++)n+=e[s]*t[s];return n},o.weightedStandardDeviation=function(e,t){return _(o.weightedVariance(e,t))},o.weightedVariance=function(e,t){for(var n=o.weightedMean(e,t),s=0,r=e.length,l=0,a=0,d=0;d<r;d++){var i=e[d]-n,u=t[d];s+=u*(i*i),a+=u,l+=u*u}return s*(a/(a*a-l))},o.center=function(e,t){"undefined"==typeof t&&(t=!1);var n=e;t||(n=[].concat(e));for(var s=o.mean(n),a=n.length,r=0;r<a;r++)n[r]-=s},o.standardize=function(e,t,n){"undefined"==typeof t&&(t=o.standardDeviation(e)),"undefined"==typeof n&&(n=!1);for(var s=e.length,a=n?e:Array(s),r=0;r<s;r++)a[r]=e[r]/t;return a},o.cumulativeSum=function(e){var t=e.length,n=Array(t);n[0]=e[0];for(var o=1;o<t;o++)n[o]=n[o-1]+e[o];return n}},{}],110:[function(e,t,i){arguments[4][104][0].apply(i,arguments)},{"./array":109,"./matrix":111,dup:104}],111:[function(e,t,o){"use strict";function n(e,t){return e-t}var s=e("./array");o.max=function(e){for(var t=-Infinity,n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)e[n][i]>t&&(t=e[n][i]);return t},o.min=function(e){for(var t=Infinity,n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)e[n][i]<t&&(t=e[n][i]);return t},o.minMax=function(e){for(var t=Infinity,n=-Infinity,o=0;o<e.length;o++)for(var i=0;i<e[o].length;i++)e[o][i]<t&&(t=e[o][i]),e[o][i]>n&&(n=e[o][i]);return{min:t,max:n}},o.entropy=function(e,t){"undefined"==typeof t&&(t=0);for(var n=0,o=e.length,s=e[0].length,a=0;a<o;a++)for(var i=0;i<s;i++)n+=e[a][i]*r(e[a][i]+t);return-n},o.mean=function(e,t){"undefined"==typeof t&&(t=0);var n=e.length,o=e[0].length,s,a,r,i;if(-1===t){for(s=[0],a=n*o,r=0;r<n;r++)for(i=0;i<o;i++)s[0]+=e[r][i];s[0]/=a}else if(0===t)for(s=Array(o),a=n,i=0;i<o;i++){for(s[i]=0,r=0;r<n;r++)s[i]+=e[r][i];s[i]/=a}else if(1===t)for(s=Array(n),a=o,i=0;i<n;i++){for(s[i]=0,r=0;r<o;r++)s[i]+=e[i][r];s[i]/=a}else throw new Error("Invalid dimension");return s},o.sum=function(e,t){"undefined"==typeof t&&(t=0);var n=e.length,o=e[0].length,s,a,i;if(-1===t)for(s=[0],a=0;a<n;a++)for(i=0;i<o;i++)s[0]+=e[a][i];else if(0===t)for(s=Array(o),i=0;i<o;i++)for(s[i]=0,a=0;a<n;a++)s[i]+=e[a][i];else if(1===t)for(s=Array(n),i=0;i<n;i++)for(s[i]=0,a=0;a<o;a++)s[i]+=e[i][a];else throw new Error("Invalid dimension");return s},o.product=function(e,t){"undefined"==typeof t&&(t=0);var n=e.length,o=e[0].length,s,a,i;if(-1===t)for(s=[1],a=0;a<n;a++)for(i=0;i<o;i++)s[0]*=e[a][i];else if(0===t)for(s=Array(o),i=0;i<o;i++)for(s[i]=1,a=0;a<n;a++)s[i]*=e[a][i];else if(1===t)for(s=Array(n),i=0;i<n;i++)for(s[i]=1,a=0;a<o;a++)s[i]*=e[i][a];else throw new Error("Invalid dimension");return s},o.standardDeviation=function(e,t,n){for(var s=o.variance(e,t,n),a=s.length,r=0;r<a;r++)s[r]=_(s[r]);return s},o.variance=function(e,t,n){"undefined"==typeof n&&(n=!0),t=t||o.mean(e);var s=e.length;if(0===s)return[];for(var a=e[0].length,r=Array(a),l=0;l<a;l++){for(var d=0,u=0,p=0,c=0;c<s;c++)p=e[c][l]-t[l],d+=p,u+=p*p;r[l]=n?(u-d*d/s)/(s-1):(u-d*d/s)/s}return r},o.median=function(e){for(var t=e.length,o=e[0].length,s=Array(o),a=0,i;a<o;a++){i=Array(t);for(var r=0;r<t;r++)i[r]=e[r][a];i.sort(n);var l=i.length;s[a]=0==l%2?0.5*(i[l/2]+i[l/2-1]):i[p(l/2)]}return s},o.mode=function(e){var t=e.length,n=e[0].length,o=Array(n),s,i;for(s=0;s<n;s++){for(var a=Array(t),r=0;r<t;r++)a[r]=0;var l=Array(t),d=0;for(i=0;i<t;i++){var u=l.indexOf(e[i][s]);0<=u?a[u]++:(l[d]=e[i][s],a[d]=1,d++)}var p=0,c=0;for(i=0;i<d;i++)a[i]>p&&(p=a[i],c=i);o[s]=l[c]}return o},o.skewness=function(e,t){"undefined"==typeof t&&(t=!0);for(var s=o.mean(e),r=e.length,n=s.length,l=Array(n),d=0;d<n;d++){for(var u=0,p=0,c=0,i;c<r;c++)i=e[c][d]-s[d],u+=i*i,p+=i*i*i;var m=u/r,h=p/r,y=h/f(m,3/2);if(t){var g=_(r*(r-1));l[d]=g/(r-2)*y}else l[d]=y}return l},o.kurtosis=function(e,t){"undefined"==typeof t&&(t=!0);for(var s=o.mean(e),a=e.length,n=e[0].length,r=Array(n),l=0;l<n;l++){for(var d=0,u=0,p=0,i;p<a;p++)i=e[p][l]-s[l],d+=i*i,u+=i*i*i*i;var c=d/a,m=u/a;if(t){var h=d/(a-1),g=u/(h*h);r[l]=a*(a+1)/((a-1)*(a-2)*(a-3))*g-3*((a-1)*(a-1)/((a-2)*(a-3)))}else r[l]=m/(c*c)-3}return r},o.standardError=function(e){for(var t=e.length,n=o.standardDeviation(e),s=n.length,a=Array(s),r=_(t),l=0;l<s;l++)a[l]=n[l]/r;return a},o.covariance=function(e,t){return o.scatter(e,void 0,t)},o.scatter=function(e,t,n){"undefined"==typeof n&&(n=0),"undefined"==typeof t&&(0===n?t=e.length-1:1===n&&(t=e[0].length-1));var a=o.mean(e,n),r=e.length;if(0===r)return[[]];var l=e[0].length,d,u,i,p,s;if(0===n){for(d=Array(l),u=0;u<l;u++)d[u]=Array(l);for(u=0;u<l;u++)for(i=u;i<l;i++){for(p=0,s=0;s<r;s++)p+=(e[s][i]-a[i])*(e[s][u]-a[u]);p/=t,d[u][i]=p,d[i][u]=p}}else if(1===n){for(d=Array(r),u=0;u<r;u++)d[u]=Array(r);for(u=0;u<r;u++)for(i=u;i<r;i++){for(p=0,s=0;s<l;s++)p+=(e[i][s]-a[i])*(e[u][s]-a[u]);p/=t,d[u][i]=p,d[i][u]=p}}else throw new Error("Invalid dimension");return d},o.correlation=function(e){var t=o.mean(e),n=o.standardDeviation(e,!0,t),s=o.zScores(e,t,n),a=e.length,r=e[0].length,d=Array(r),u,i;for(u=0;u<r;u++)d[u]=Array(r);for(u=0;u<r;u++)for(i=u;i<r;i++){for(var p=0,c=0,m=s.length;c<m;c++)p+=s[c][i]*s[c][u];p/=a-1,d[u][i]=p,d[i][u]=p}return d},o.zScores=function(e,t,i){return t=t||o.mean(e),"undefined"==typeof i&&(i=o.standardDeviation(e,!0,t)),o.standardize(o.center(e,t,!1),i,!0)},o.center=function(e,t,n){t=t||o.mean(e);var s=e,a=e.length,r,i,l;if(!n)for(s=Array(a),r=0;r<a;r++)s[r]=Array(e[r].length);for(r=0;r<a;r++){var d=s[r];for(i=0,l=d.length;i<l;i++)d[i]=e[r][i]-t[i]}return s},o.standardize=function(e,t,n){"undefined"==typeof t&&(t=o.standardDeviation(e));var s=e,a=e.length,r,i,l;if(!n)for(s=Array(a),r=0;r<a;r++)s[r]=Array(e[r].length);for(r=0;r<a;r++){var d=s[r],u=e[r];for(i=0,l=d.length;i<l;i++)0===t[i]||isNaN(t[i])||(d[i]=u[i]/t[i])}return s},o.weightedVariance=function(e,t){var n=o.mean(e),s=e.length;if(0===s)return[];for(var r=e[0].length,l=Array(r),d=0;d<r;d++){for(var u=0,p=0,a=0,c=0;c<s;c++){var i=e[c][d]-n[d],m=t[c];u+=m*(i*i),a+=m,p+=m*m}l[d]=u*(a/(a*a-p))}return l},o.weightedMean=function(e,t,n){"undefined"==typeof n&&(n=0);var o=e.length;if(0===o)return[];var a=e[0].length,r,l,i,d,u,p;if(0===n){for(r=Array(a),l=0;l<a;l++)r[l]=0;for(l=0;l<o;l++)for(p=e[l],u=t[l],d=0;d<a;d++)r[d]+=p[d]*u}else if(1===n){for(r=Array(o),l=0;l<o;l++)r[l]=0;for(d=0;d<o;d++)for(p=e[d],u=t[d],l=0;l<a;l++)r[d]+=p[l]*u}else throw new Error("Invalid dimension");var c=s.sum(t);if(0!==c)for(l=0,i=r.length;l<i;l++)r[l]/=c;return r},o.weightedCovariance=function(e,t,n,s){s=s||0,n=n||o.weightedMean(e,t,s);for(var a=0,r=0,l=0,i=t.length;l<i;l++)a+=t[l],r+=t[l]*t[l];var d=a/(a*a-r);return o.weightedScatter(e,t,n,d,s)},o.weightedScatter=function(e,t,n,a,r){r=r||0,n=n||o.weightedMean(e,t,r),"undefined"==typeof a&&(a=1);var l=e.length;if(0===l)return[[]];var d=e[0].length,u,p,i,c,m;if(0===r){for(u=Array(d),p=0;p<d;p++)u[p]=Array(d);for(p=0;p<d;p++)for(i=p;i<d;i++){for(m=0,c=0;c<l;c++)m+=t[c]*(e[c][i]-n[i])*(e[c][p]-n[p]);u[p][i]=m*a,u[i][p]=m*a}}else if(1===r){for(u=Array(l),p=0;p<l;p++)u[p]=Array(l);for(p=0;p<l;p++)for(i=p;i<l;i++){for(m=0,c=0;c<d;c++)m+=t[c]*(e[i][c]-n[i])*(e[p][c]-n[p]);u[p][i]=m*a,u[i][p]=m*a}}else throw new Error("Invalid dimension");return u}},{"./array":109}],112:[function(e,t){"use strict";t.exports=function(e,t){e=e||0;for(var n=Array(e),o=0;o<e;o++)n[o]=t;return n}},{}],113:[function(e,t){"use strict";t.exports=function(e){return"string"==typeof e?(e=e.toLowerCase(),e.includes("zg")?"1d":e.includes("hsqct")||e.includes("invi")&&(e.includes("ml")||e.includes("di"))?"hsqctocsy":e.includes("hsqc")||e.includes("invi")?"hsqc":e.includes("hmbc")||e.includes("inv4")&&e.includes("lp")?"hmbc":e.includes("cosy")?"cosy":e.includes("jres")?"jres":e.includes("tocsy")||e.includes("mlev")||e.includes("dipsi")?"tocsy":e.includes("noesy")?"noesy":e.includes("roesy")?"roesy":e.includes("dept")?"dept":e.includes("jmod")||e.includes("apt")?"aptjmod":""):""}},{}],114:[function(e,t,i){"use strict";function n(e,t,i){i!==void 0&&("string"==typeof i?(i.startsWith("<")&&i.endsWith(">")&&(i=i.substring(1,i.length-2)),e[t]=i.trim()):e[t]=i)}var o=e("jcampconverter"),s=e("spectra-data"),a=e("./getSpectrumType"),r={computeRanges:!1},l={nH:100,thresholdFactor:0.85,clean:0.4,compile:!0,integralType:"sum"};i.parseJcamp=function(e,t){t=Object.assign({},r,t);var d=e.toString(),u=o.convert(d,{keepRecordsRegExp:/.*/,withoutXY:!0}),p={dimension:u.twoD?2:1,nucleus:[],isFid:!1,isFt:!1},c=u.info;if(n(p,"title",c.TITLE),n(p,"solvent",c[".SOLVENTNAME"]),n(p,"pulse",c[".PULSESEQUENCE"]||c[".PULPROG"]||c.$PULPROG),n(p,"experiment",a(p.pulse)),n(p,"temperature",parseFloat(c.$TE||c[".TE"])),n(p,"frequency",parseFloat(c[".OBSERVEFREQUENCY"])),n(p,"type",c.DATATYPE),n(p,"probe",c.$PROBHD),void 0!==c.$FNTYPE&&n(p,"acquisitionMode",parseInt(c.$FNTYPE)),n(p,"expno",parseInt(c.$EXPNO)),p.type&&(0<=p.type.toUpperCase().indexOf("FID")?p.isFid=!0:0<=p.type.toUpperCase().indexOf("SPECTRUM")&&(p.isFt=!0)),1===p.dimension){var m=c[".OBSERVENUCLEUS"];m&&(p.nucleus=[m.replace(/[^A-Za-z0-9]/g,"")])}else{var h=c[".NUCLEUS"];h&&(p.nucleus=h.split(",").map((e)=>e.trim()))}if(0===p.nucleus.length&&(p.nucleus=i.getNucleusFrom2DExperiment(p.experiment)),c.$DATE&&(p.date=new Date(1e3*c.$DATE).toISOString()),t.computeRanges&&p.isFt&&1===p.dimension&&"1H"===p.nucleus[0]){var g=Object.assign({},l,t.ranges);t.removeImpurities&&p.solvent&&(g.removeImpurity={solvent:p.solvent});var f=s.NMR.fromJcamp(d),y=f.getRanges(g);y.forEach(function(e){delete e._highlight,delete e.signalID,e.signal.forEach(function(e){delete e.peak})}),p.range=y}return p},i.getNucleusFrom2DExperiment=function(e){return"string"==typeof e?(e=e.toLowerCase(),e.includes("jres")?["1H"]:e.includes("hmbc")||e.includes("hsqc")?["1H","13C"]:["1H","1H"]):[]},i.getSpectrumType=a},{"./getSpectrumType":113,jcampconverter:16,"spectra-data":153}],115:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("ml-matrix"),s=n(o),a=e("new-array"),r=n(a),l=e("ml-simple-clustering"),d=n(l),u=e("ml-hclust"),p=n(u);class c{constructor(e,t,i){this.chemicalShifts=e,this.couplingConstants=t,this.multiplicity=i,this.nSpins=e.length,this._initConnectivity(),this._initClusters()}static fromSpinusPrediction(e){for(var t=e.split("\n"),n=t.length-1,o=Array(n),a=Array(n),l={},d=s.default.zeros(n,n),u=0,p;u<n;u++)p=t[u].split("\t"),o[u]=+p[2],l[p[0]-1]=u,a[u]=+p[5];for(var m=0;m<n;m++){p=t[m].split("\t");var h=(p.length-4)/3;for(y=0;y<h;y++){var g=p[4+3*y]-1,f=l[g];d[m][f]=+p[6+3*y]}}for(var y=0;y<n;y++)for(var x=y;x<n;x++)d[y][x]=d[x][y];return new c(o,d,(0,r.default)(n,2))}static fromPrediction(e){var t=c.ungroupAtoms(e),n=t.length,o=Array(n),a=s.default.zeros(n,n),r=Array(n),l={},d,i,u;for(d=0;d<n;d++)o[d]=t[d].delta,l[t[d].atomIDs[0]]=d;for(d=0;d<n;d++){for(o[d]=t[d].delta,u=t[d].j,i=0;i<u.length;i++)a[l[t[d].atomIDs[0]]][l[u[i].assignment]]=u[i].coupling,a[l[u[i].assignment]][l[t[d].atomIDs[0]]]=u[i].coupling;r[d]=t[d].integral+1}return new c(o,a,r)}static ungroupAtoms(e){var t=[];return e.forEach((e)=>{var n=e.atomIDs;if(n instanceof Array)for(var o=0;o<n.length;o++){var i=JSON.parse(JSON.stringify(e)),s=[];if(i.atomIDs=[n[o]],i.integral=1,i.j instanceof Array)for(var a=0,r;a<i.j.length;a++)if(r=i.j[a].assignment,r instanceof Array)for(var l=0,d;l<r.length;l++)d=JSON.parse(JSON.stringify(i.j[a])),d.assignment=r[l],s.push(d);i.j=s,delete i.nbAtoms,t.push(i)}}),t}_initClusters(){this.clusters=(0,d.default)(this.connectivity,{out:"indexes"})}_initConnectivity(){for(var e=this.couplingConstants,t=s.default.ones(e.length,e.length),n=0;n<e.length;n++)for(var i=n;i<e[n].length;i++)0===e[n][i]&&(t[n][i]=0,t[i][n]=0);this.connectivity=t}_calculateBetas(e,t){var n=s.default.zeros(e.length,e.length),o,i;for(o=0;o<e.rows;o++)for(i=o;i<e.columns;i++)0==this.chemicalShifts[o]-this.chemicalShifts[i]?o!==i&&0===e[o][i]&&(n[o][i]=1,n[i][o]=1):(n[o][i]=1-S(e[o][i]/((this.chemicalShifts[o]-this.chemicalShifts[i])*t)),n[i][o]=n[o][i]);return n}ensureClusterSize(e){var t=this._calculateBetas(this.couplingConstants,e.frequency||400),n=p.default.agnes(t,{isDistanceMatrix:!0}),o=[];this._splitCluster(n,o,e.maxClusterSize||8,!1);var s=this._mergeClusters(o);this.nClusters=s.length,this.clusters=Array(s.length);for(var a=0;a<this.nClusters;a++){this.clusters[a]=[];for(var r=0;r<this.nSpins;r++)0!==s[a][r]&&(0>s[a][r]?this.clusters[a].push(-(r+1)):this.clusters[a].push(r))}}_splitCluster(e,t,n,o){if(!o&&e.index.length<=n)t.push(this._getMembers(e));else for(var s of e.children)if(!isNaN(s.index)||s.index.length<=n){for(var a=this._getMembers(s),r=0,l=0;l<this.nSpins;l++)if(1===a[l]){r++;for(var i=0;i<this.nSpins;i++)1===this.connectivity[l][i]&&0===a[i]&&(a[i]=-1,r++)}r<=n?t.push(a):isNaN(s.index)?this._splitCluster(s,t,n,!0):(a[s.index]=2,t.push(a))}else this._splitCluster(s,t,n,!1)}_getMembers(e){for(var t=Array(this.nSpins),n=0;n<this.nSpins;n++)t[n]=0;if(!isNaN(e.index))t[1*e.index]=1;else for(var i of e.index)t[1*i.index]=1;return t}_mergeClusters(e){var t=0,n,o,s,i,a,r,l;for(s=e.length-1;0<=s;s--){for(n=e[s],t=n.length,a=0;a<t&&-1!==n[a++];);if(a<t)for(i=e.length-1;i>=s+1;i--){for(o=e[i],a=0,r=0,l=0;a<t;)-1==n[a]*o[a]&&r++,(0!==n[a]||0!==o[a])&&l++,a++;if(0<r&&l<=this.maxClusterSize){for(a=0;a<t;)1===o[a]?n[a]=1:-1===o[a]&&1!==n[a]&&(n[a]=-1),a++;e.splice(i,1),i++}}}return e}}i.default=c},{"ml-hclust":71,"ml-matrix":90,"ml-simple-clustering":107,"new-array":112}],116:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./SpinSystem");Object.defineProperty(i,"SpinSystem",{enumerable:!0,get:function(){return n(o).default}});var s=e("./simulate1D");Object.defineProperty(i,"simulate1D",{enumerable:!0,get:function(){return n(s).default}});var a=e("./simulate2D");Object.defineProperty(i,"simulate2D",{enumerable:!0,get:function(){return n(a).default}})},{"./SpinSystem":115,"./simulate1D":118,"./simulate2D":119}],117:[function(e,t,i){"use strict";function n(e){for(var t=(e-1)/2,n=Array(e),s=Array(e),a=0;a<e;a++)n[a]=e-1-a-t,s[a]=_(t*(t+1)-n[a]*(n[a]+1));var i=o(s,1,e,e);for(a=0;a<e;a++)s[a]=_(t*(t+1)-n[a]*(n[a]-1));var r=o(s,-1,e,e),l=i.clone().add(r).mul(0.5),d=r.clone().mul(-1).add(i).mul(-0.5),u=o(n,0,e,e);return{x:l,y:d,z:u,m:r,p:i}}function o(e,t,o,n){for(var s=new a.default(o,n,{initialCapacity:20}),r=0;r<e.length;r++)0<=r-t&&r-t<o&&r<n&&s.set(r-t,r,e[r]);return s}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){return 2===e?r:n(e)};var s=e("ml-sparse-matrix"),a=function(e){return e&&e.__esModule?e:{default:e}}(s),r=n(2)},{"ml-sparse-matrix":108}],118:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,o,s,a,r){for(var l=0|a*(-t-o)/(s-o),d=r.length,u=0,p=0,c=l-d/2;c<l+d/2;c++)u=0|c,0<=c&&c<a&&(e[u]+=r[p]*n),p++}function s(e,t){e.forEachNonZero((e,i,n)=>{return e>i?0:S(n)<=t?0:n})}function a(e,t,o,s,a){for(var r=1,l=0;l<a.length;l++)r*=o[a[l]];for(var i=new c.default(r,r),d=0;d<a.length;d++){for(var u=a[d],n=(0,y.default)(o[u]),p=void 0,m=void 0,h=1,g=0;g<d;g++)h*=o[a[g]];p=c.default.eye(h),h=1;for(var f=d+1;f<a.length;f++)h*=o[a[f]];m=c.default.eye(h);var x=e[u],b=p.kroneckerProduct(n.z).kroneckerProduct(m);i.add(b.mul(x));for(var _=0,C;_<a.length;_++)if(C=a[_],1===s[u][C]){for(var k=(0,y.default)(o[C]),w=void 0,j=void 0,v=1,S=0;S<_;S++)v*=o[a[S]];w=c.default.eye(v),v=1;for(var E=_+1;E<a.length;E++)v*=o[a[E]];j=c.default.eye(v);var D=p.kroneckerProduct(n.x).kroneckerProduct(m).mmul(w.kroneckerProduct(k.x).kroneckerProduct(j));D.add(p.kroneckerProduct(n.y).kroneckerProduct(m).mul(-1).mmul(w.kroneckerProduct(k.y).kroneckerProduct(j))),D.add(p.kroneckerProduct(n.z).kroneckerProduct(m).mmul(w.kroneckerProduct(k.z).kroneckerProduct(j))),i.add(D.mul(t[u][C]/2))}}return i}function r(e,t,n){for(var o=Array(n),s=0;s<n;s++)o[s]=e+s*((t-e)/(n-1));return o}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var l=t.lineWidth,p=l===void 0?1:l,m=t.nbPoints,f=m===void 0?1024:m,_=t.maxClusterSize,k=_===void 0?10:_,w=t.output,v=w===void 0?"y":w,E=t.frequency,D=E===void 0?400:E,H=t.noiseFactor,P=H===void 0?1:H,I,i;f=+f;var j=t.from*D||0,A=(t.to||10)*D,z=e.chemicalShifts.slice();for(I=0;I<z.length;I++)z[I]*=D;var T=f*p/S(A-j)/2.355,F=20*T,O=0|F,R=Array(O),M=F/2;for(I=0;I<O;I++)R[I]=1e9*d(-((I-M)*(I-M))/(2*(T*T)));for(var b=t.withNoise?[...Array(f)].map(()=>Math.random()*P):Array(f).fill(0),N=e.multiplicity,X=function(){var t=e.clusters[Y];for(U=Array(t.length),I=0;I<t.length;I++)U[I]=0>t[I]?-t[I]-1:t[I];q=1,$=0;var n=[],r=[];if(t.length>k){for(L=0;0>t[L++];);for(L=t[L-1],n.push(-z[L]),I=0;I<t.length;I++)if(0>t[I])for(V=e.couplingConstants[L][U[I]]/2,B=n.length,i=0;i<B;i++)n.push(n[i]+V),n[i]-=V;for(n.sort(g.asc),$=n.length,q=1,I=0;I<$;I++)r.push(1)}else{var l=a(z,e.couplingConstants,N,e.connectivity,U),d=l.rows,m=new u.default.DC.EVD(l),_=m.eigenvectorMatrix,w=m.realEigenvalues,v=new c.default(d,d),E=t.length;for(q=0,Z=0;Z<E;Z++){var D=(0,y.default)(N[U[Z]]),H=1;for(i=0;i<Z;i++)H*=N[U[i]];var P=c.default.eye(H);for(H=1,i=Z+1;i<E;i++)H*=N[U[i]];var T=c.default.eye(H),F=P.kroneckerProduct(D.m).kroneckerProduct(T);0<=t[Z]?(v.add(F.mul(t[Z]+1)),q++):v.add(F.mul(t[Z]))}var O=u.default.zeros(d,d);v.forEachNonZero((e,t,i)=>{if(0<i)for(var n=_[t],o=0;o<n.length;o++)0!==n[o]&&O.set(e,o,O.get(e,o)+n[o]);return i});var M=O.clone();v.forEachNonZero((e,t,i)=>{if(0>i)for(var n=_[t],o=0;o<n.length;o++)0!==n[o]&&M.set(e,o,M.get(e,o)+n[o]);return i});var X=_.transpose();O=X.mmul(O),O=new c.default(O,{threshold:x}),s(O,x),M=X.mmul(M),M=new c.default(M,{threshold:x}),s(M,x),M.forEachNonZero((e,t,i)=>{var o=O.get(e,t);o=C(S(o),S(i)),o*=o,$+=o;var s=w[e]-w[t],a=(0,h.default)(n,s,g.asc);0>a?(n.splice(-1-a,0,s),r.splice(-1-a,0,o)):r[a]+=o})}var W=n.length;if(0<W){q/=$;var G=n[0],J=r[0],K=1;for(I=1;I<W;I++)S(n[I]-G/K)<p/32?(J+=r[I],G+=n[I],K++):(o(b,G/K,J*q,j,A,f,R),G=n[I],J=r[I],K=1);o(b,G/K,J*q,j,A,f,R)}},Y=0;Y<e.clusters.length;Y++){var U,q,$,L,B,V,Z;X()}if("xy"===v)return{x:r(t.from,t.to,f),y:b};if("y"===v)return b;throw new RangeError("wrong output option")};var l=e("ml-matrix"),u=n(l),p=e("ml-sparse-matrix"),c=n(p),m=e("binary-search"),h=n(m),g=e("num-sort"),f=e("./pauli"),y=n(f),x=0.01},{"./pauli":117,"binary-search":2,"ml-matrix":90,"ml-sparse-matrix":108,"num-sort":120}],119:[function(e,i,n){"use strict";function o(e,t,i,n){return(e-t)*(n-1)/(i-t)}function s(e,n){for(var o=4,s=u(0,t(n.x-n.widthX*o)),a=C(e[0].length-1,t(n.x+n.widthX*o)),r=u(0,t(n.y-n.widthY*o)),l=C(e.length-1,t(n.y+n.widthY*o)),p=n.widthX*n.widthX,c=n.widthY*n.widthY,m=r;m<l;m++)for(var h=s;h<a;h++){var i=f(n.x-h,2)/p+f(n.y-m,2)/c,g=1e4*n.z*d(-i);e[m][h]+=g}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=e[0].fromAtomLabel,a=e[0].toLabel,d=t.frequencyX||l[n].frequency,p=t.frequencyY||l[a].frequency,c=t.lineWidthX||l[n].lineWidth,m=t.lineWidthY||l[a].lineWidth,h=t.symmetrize||!1,g=e[0].fromChemicalShift,f=e[0].fromChemicalShift,y=e[0].toChemicalShift,x=e[0].toChemicalShift,b;for(b=1;b<e.length;)g=C(g,e[b].fromChemicalShift),f=u(f,e[b].fromChemicalShift),y=C(y,e[b].toChemicalShift),x=u(x,e[b].toChemicalShift),b++;null===t.firstX||isNaN(t.firstX)||(g=t.firstX),null===t.firstY||isNaN(t.firstY)||(y=t.firstY),null===t.lastX||isNaN(t.lastX)||(f=t.lastX),null===t.lastY||isNaN(t.lastY)||(x=t.lastY);var i=t.nbPointsX||512,_=t.nbPointsY||512,k=new r.default(_,i).fill(0);for(b=0;b<e.length;){var w={x:o(e[b].fromChemicalShift,g,f,i),y:o(e[b].toChemicalShift,y,x,_),z:e[b].fromAtoms.length+e[b].toAtoms.length,widthX:o(c/d+g,g,f,i),widthY:o(m/p+y,y,x,_)};s(k,w),h&&s(k,{x:w.y,y:w.x,z:w.z,widthX:w.widthY,widthY:w.widthX}),b++}return k};var a=e("ml-matrix"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),l={H:{frequency:400,lineWidth:10},C:{frequency:100,lineWidth:10}}},{"ml-matrix":90}],120:[function(e,t,i){"use strict";function n(e){if("number"!=typeof e||o(e))throw new TypeError("Expected a number")}var o=e("number-is-nan");i.asc=function(e,t){return n(e),n(t),e-t},i.desc=function(e,t){return n(e),n(t),t-e}},{"number-is-nan":121}],121:[function(e,t){"use strict";t.exports=Number.isNaN||function(e){return e!==e}},{}],122:[function(e,t){"use strict";var i=e("./lib/utils/common").assign,n=e("./lib/deflate"),o=e("./lib/inflate"),s=e("./lib/zlib/constants"),a={};i(a,n,o,s),t.exports=a},{"./lib/deflate":123,"./lib/inflate":124,"./lib/utils/common":125,"./lib/zlib/constants":128}],123:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=a.assign({level:g,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&16>t.windowBits&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var i=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==c)throw new Error(l[i]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var o;if(o="string"==typeof t.dictionary?r.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=s.deflateSetDictionary(this.strm,o),i!==c)throw new Error(l[i]);this._dict_set=!0}}function o(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg||l[i.err];return i.result}var s=e("./zlib/deflate"),a=e("./utils/common"),r=e("./utils/strings"),l=e("./zlib/messages"),d=e("./zlib/zstream"),u=Object.prototype.toString,p=4,c=0,m=1,h=2,g=-1,f=0,y=8;n.prototype.push=function(e,t){var i=this.strm,n=this.options.chunkSize,o,l;if(this.ended)return!1;l=t===~~t?t:!0===t?p:0,i.input="string"==typeof e?r.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(n),i.next_out=0,i.avail_out=n),o=s.deflate(i,l),o!==m&&o!==c)return this.onEnd(o),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(l===p||l===h))&&("string"===this.options.to?this.onData(r.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&o!==m);return l===p?(o=s.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===c):l!==h||(this.onEnd(c),i.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=n,i.deflate=o,i.deflateRaw=function(e,t){return t=t||{},t.raw=!0,o(e,t)},i.gzip=function(e,t){return t=t||{},t.gzip=!0,o(e,t)}},{"./utils/common":125,"./utils/strings":126,"./zlib/deflate":130,"./zlib/messages":135,"./zlib/zstream":137}],124:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),0<=t.windowBits&&16>t.windowBits&&!(e&&e.windowBits)&&(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var i=s.inflateInit2(this.strm,t.windowBits);if(i!==l.Z_OK)throw new Error(d[i]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function o(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg||d[i.err];return i.result}var s=e("./zlib/inflate"),a=e("./utils/common"),r=e("./utils/strings"),l=e("./zlib/constants"),d=e("./zlib/messages"),u=e("./zlib/zstream"),p=e("./zlib/gzheader"),c=Object.prototype.toString;n.prototype.push=function(e,t){var i=this.strm,n=this.options.chunkSize,o=this.options.dictionary,d=!1,u,p,m,h,g,f;if(this.ended)return!1;p=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,i.input="string"==typeof e?r.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?new Uint8Array(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(n),i.next_out=0,i.avail_out=n),u=s.inflate(i,l.Z_NO_FLUSH),u===l.Z_NEED_DICT&&o&&(f="string"==typeof o?r.string2buf(o):"[object ArrayBuffer]"===c.call(o)?new Uint8Array(o):o,u=s.inflateSetDictionary(this.strm,f)),u===l.Z_BUF_ERROR&&!0==d&&(u=l.Z_OK,d=!1),u!==l.Z_STREAM_END&&u!==l.Z_OK)return this.onEnd(u),this.ended=!0,!1;i.next_out&&(0===i.avail_out||u===l.Z_STREAM_END||0===i.avail_in&&(p===l.Z_FINISH||p===l.Z_SYNC_FLUSH))&&("string"===this.options.to?(m=r.utf8border(i.output,i.next_out),h=i.next_out-m,g=r.buf2string(i.output,m),i.next_out=h,i.avail_out=n-h,h&&a.arraySet(i.output,i.output,m,h,0),this.onData(g)):this.onData(a.shrinkBuf(i.output,i.next_out))),0===i.avail_in&&0===i.avail_out&&(d=!0)}while((0<i.avail_in||0===i.avail_out)&&u!==l.Z_STREAM_END);return u===l.Z_STREAM_END&&(p=l.Z_FINISH),p===l.Z_FINISH?(u=s.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===l.Z_OK):p!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),i.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=n,i.inflate=o,i.inflateRaw=function(e,t){return t=t||{},t.raw=!0,o(e,t)},i.ungzip=o},{"./utils/common":125,"./utils/strings":126,"./zlib/constants":128,"./zlib/gzheader":131,"./zlib/inflate":133,"./zlib/messages":135,"./zlib/zstream":137}],125:[function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var o in i)n(i,o)&&(e[o]=i[o])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,n,o,s){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+o),s);for(var a=0;a<o;a++)e[s+a]=t[n+a]},flattenChunks:function(e){var t,i,n,o,s,a;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(a=new Uint8Array(n),o=0,(t=0,i=e.length);t<i;t++)s=e[t],a.set(s,o),o+=s.length;return a}},a={arraySet:function(e,t,n,o,s){for(var a=0;a<o;a++)e[s+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(o)},{}],126:[function(e,t,i){"use strict";function n(e,t){if(65534>t&&(e.subarray&&a||!e.subarray&&s))return l.apply(null,o.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=l(e[r]);return n}var o=e("./common"),s=!0,a=!0;try{l.apply(null,[0])}catch(e){s=!1}try{l.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var r=new o.Buf8(256),d=0;256>d;d++)r[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;r[254]=r[254]=1,i.string2buf=function(e){var t=e.length,n=0,s,a,r,l,d;for(l=0;l<t;l++)a=e.charCodeAt(l),55296==(64512&a)&&l+1<t&&(r=e.charCodeAt(l+1),56320==(64512&r)&&(a=65536+(a-55296<<10)+(r-56320),l++)),n+=128>a?1:2048>a?2:65536>a?3:4;for(s=new o.Buf8(n),d=0,l=0;d<n;l++)a=e.charCodeAt(l),55296==(64512&a)&&l+1<t&&(r=e.charCodeAt(l+1),56320==(64512&r)&&(a=65536+(a-55296<<10)+(r-56320),l++)),128>a?s[d++]=a:2048>a?(s[d++]=192|a>>>6,s[d++]=128|63&a):65536>a?(s[d++]=224|a>>>12,s[d++]=128|63&a>>>6,s[d++]=128|63&a):(s[d++]=240|a>>>18,s[d++]=128|63&a>>>12,s[d++]=128|63&a>>>6,s[d++]=128|63&a);return s},i.buf2binstring=function(e){return n(e,e.length)},i.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},i.buf2string=function(e,t){var o=t||e.length,s=Array(2*o),a,i,l,d;for(i=0,a=0;a<o;){if(l=e[a++],128>l){s[i++]=l;continue}if(d=r[l],4<d){s[i++]=65533,a+=d-1;continue}for(l&=2===d?31:3===d?15:7;1<d&&a<o;)l=l<<6|63&e[a++],d--;if(1<d){s[i++]=65533;continue}65536>l?s[i++]=l:(l-=65536,s[i++]=55296|1023&l>>10,s[i++]=56320|1023&l)}return n(s,i)},i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return 0>i?t:0===i?t:i+r[e[i]]>t?i:t}},{"./common":125}],127:[function(e,t){"use strict";t.exports=function(e,t,i,o){for(var s=0|65535&e,a=0|65535&e>>>16,r=0;0!==i;){r=2e3<i?2e3:i,i-=r;do s=0|s+t[o++],a=0|a+s;while(--r);s%=65521,a%=65521}return 0|(s|a<<16)}},{}],128:[function(e,t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],129:[function(e,t){"use strict";var n=function(){for(var e=[],t=0,i;256>t;t++){i=t;for(var n=0;8>n;n++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e}();t.exports=function(e,t,o,s){e^=-1;for(var a=s;a<s+o;a++)e=e>>>8^n[255&(e^t[a])];return-1^e}},{}],130:[function(e,t,i){"use strict";function n(e,t){return e.msg=E[t],t}function o(e){return(e<<1)-(4<e?9:0)}function a(e){for(var t=e.length;0<=--t;)e[t]=0}function r(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out);0===i||(w.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function l(e,t){j._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,r(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=255&t>>>8,e.pending_buf[e.pending++]=255&t}function c(e,t,i,n){var o=e.avail_in;return(o>n&&(o=n),0===o)?0:(e.avail_in-=o,w.arraySet(t,e.input,e.next_in,o,i),1===e.state.wrap?e.adler=v(e.adler,t,o,i):2===e.state.wrap&&(e.adler=S(e.adler,t,o,i)),e.next_in+=o,e.total_in+=o,o)}function p(e,t){var i=e.max_chain_length,n=e.strstart,o=e.prev_length,s=e.nice_match,a=e.strstart>e.w_size-W?e.strstart-(e.w_size-W):0,r=e.window,l=e.w_mask,d=e.prev,u=e.strstart+Z,p=r[n+o-1],c=r[n+o],m,h;e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(m=t,r[m+o]!==c||r[m+o-1]!==p||r[m]!==r[n]||r[++m]!==r[n+1])continue;n+=2,m++;do;while(r[++n]===r[++m]&&r[++n]===r[++m]&&r[++n]===r[++m]&&r[++n]===r[++m]&&r[++n]===r[++m]&&r[++n]===r[++m]&&r[++n]===r[++m]&&r[++n]===r[++m]&&n<u);if(h=Z-(u-n),n=u-Z,h>o){if(e.match_start=t,o=h,h>=s)break;p=r[n+o-1],c=r[n+o]}}while((t=d[t&l])>a&&0!=--i);return o<=e.lookahead?o:e.lookahead}function m(e){var t=e.w_size,i,o,n,s,a;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-W)){w.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,o=e.hash_size,i=o;do n=e.head[--i],e.head[i]=n>=t?n-t:0;while(--o);o=t,i=o;do n=e.prev[--i],e.prev[i]=n>=t?n-t:0;while(--o);s+=t}if(0===e.strm.avail_in)break;if(o=c(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=o,e.lookahead+e.insert>=$)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+$-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<$)););}while(e.lookahead<W&&0!==e.strm.avail_in)}function s(e,t){for(var i,n;;){if(e.lookahead<W){if(m(e),e.lookahead<W&&t===D)return ne;if(0===e.lookahead)break}if(i=0,e.lookahead>=$&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-W&&(e.match_length=p(e,i)),!(e.match_length>=$))n=j._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;else if(n=j._tr_tally(e,e.strstart-e.match_start,e.match_length-$),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=$){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;if(n&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=e.strstart<$-1?e.strstart:$-1,t===H?(l(e,!0),0===e.strm.avail_out?se:ae):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:oe}function h(e,t){for(var i,n,o;;){if(e.lookahead<W){if(m(e),e.lookahead<W&&t===D)return ne;if(0===e.lookahead)break}if(i=0,e.lookahead>=$&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=$-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-W&&(e.match_length=p(e,i),5>=e.match_length&&(e.strategy===O||e.match_length===$&&4096<e.strstart-e.match_start)&&(e.match_length=$-1)),e.prev_length>=$&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-$,n=j._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-$),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=$-1,e.strstart++,n&&(l(e,!1),0===e.strm.avail_out))return ne}else if(!e.match_available)e.match_available=1,e.strstart++,e.lookahead--;else if(n=j._tr_tally(e,0,e.window[e.strstart-1]),n&&l(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ne}return e.match_available&&(n=j._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<$-1?e.strstart:$-1,t===H?(l(e,!0),0===e.strm.avail_out?se:ae):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:oe}function g(e,t){for(var i=e.window,n,o,s,a;;){if(e.lookahead<=Z){if(m(e),e.lookahead<=Z&&t===D)return ne;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=$&&0<e.strstart&&(s=e.strstart-1,o=i[s],o===i[++s]&&o===i[++s]&&o===i[++s])){a=e.strstart+Z;do;while(o===i[++s]&&o===i[++s]&&o===i[++s]&&o===i[++s]&&o===i[++s]&&o===i[++s]&&o===i[++s]&&o===i[++s]&&s<a);e.match_length=Z-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=$?(n=j._tr_tally(e,1,e.match_length-$),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=j._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=0,t===H?(l(e,!0),0===e.strm.avail_out?se:ae):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:oe}function f(e,t){for(var i;;){if(0===e.lookahead&&(m(e),0===e.lookahead)){if(t===D)return ne;break}if(e.match_length=0,i=j._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=0,t===H?(l(e,!0),0===e.strm.avail_out?se:ae):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:oe}function y(e,t,i,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=o}function x(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=re[e.level].max_lazy,e.good_match=re[e.level].good_length,e.nice_match=re[e.level].nice_length,e.max_chain_length=re[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=$-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*q),this.dyn_dtree=new w.Buf16(2*(2*U+1)),this.bl_tree=new w.Buf16(2*(2*B+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(V+1),this.heap=new w.Buf16(2*Y+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*Y+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=N,t=e.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?G:te,e.adler=2===t.wrap?0:1,t.last_flush=D,j._tr_init(t),I):n(e,z)}function C(e){var t=_(e);return t===I&&x(e.state),t}function k(e,t,i,o,a,r){if(!e)return z;var l=1;if(t===F&&(t=6),0>o?(l=0,o=-o):15<o&&(l=2,o-=16),1>a||a>L||i!==X||8>o||15<o||0>t||9<t||0>r||r>M)return n(e,z);8===o&&(o=9);var d=new b;return e.state=d,d.strm=e,d.wrap=l,d.gzhead=null,d.w_bits=o,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=a+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+$-1)/$),d.window=new w.Buf8(2*d.w_size),d.head=new w.Buf16(d.hash_size),d.prev=new w.Buf16(d.w_size),d.lit_bufsize=1<<a+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new w.Buf8(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=t,d.strategy=r,d.method=i,C(e)}var w=e("../utils/common"),j=e("./trees"),v=e("./adler32"),S=e("./crc32"),E=e("./messages"),D=0,H=4,P=5,I=0,A=1,z=-2,T=-5,F=-1,O=1,R=2,M=4,N=2,X=8,L=9,Y=256+1+29,U=30,B=19,q=2*Y+1,V=15,$=3,Z=258,W=Z+$+1,G=42,J=69,K=73,Q=91,ee=103,te=113,ie=666,ne=1,oe=2,se=3,ae=4,re;re=[new y(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(1>=e.lookahead){if(m(e),0===e.lookahead&&t===D)return ne;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,l(e,!1),0===e.strm.avail_out))return ne;if(e.strstart-e.block_start>=e.w_size-W&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=0,t===H?(l(e,!0),0===e.strm.avail_out?se:ae):e.strstart>e.block_start&&(l(e,!1),0===e.strm.avail_out)?ne:ne}),new y(4,4,8,4,s),new y(4,5,16,8,s),new y(4,6,32,32,s),new y(4,4,16,16,h),new y(8,16,32,32,h),new y(8,16,128,128,h),new y(8,32,128,256,h),new y(32,128,258,1024,h),new y(32,258,258,4096,h)],i.deflateInit=function(e,t){return k(e,t,X,15,8,0)},i.deflateInit2=k,i.deflateReset=C,i.deflateResetKeep=_,i.deflateSetHeader=function(e,t){return e&&e.state?2===e.state.wrap?(e.state.gzhead=t,I):z:z},i.deflate=function(e,t){var i,l,s,p;if(!e||!e.state||t>P||0>t)return e?n(e,z):z;if(l=e.state,!e.output||!e.input&&0!==e.avail_in||l.status===ie&&t!==H)return n(e,0===e.avail_out?T:z);if(l.strm=e,i=l.last_flush,l.last_flush=t,l.status===G)if(2===l.wrap)e.adler=0,d(l,31),d(l,139),d(l,8),l.gzhead?(d(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),d(l,255&l.gzhead.time),d(l,255&l.gzhead.time>>8),d(l,255&l.gzhead.time>>16),d(l,255&l.gzhead.time>>24),d(l,9===l.level?2:l.strategy>=R||2>l.level?4:0),d(l,255&l.gzhead.os),l.gzhead.extra&&l.gzhead.extra.length&&(d(l,255&l.gzhead.extra.length),d(l,255&l.gzhead.extra.length>>8)),l.gzhead.hcrc&&(e.adler=S(e.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=J):(d(l,0),d(l,0),d(l,0),d(l,0),d(l,0),d(l,9===l.level?2:l.strategy>=R||2>l.level?4:0),d(l,3),l.status=te);else{var c=X+(l.w_bits-8<<4)<<8,m=-1;m=l.strategy>=R||2>l.level?0:6>l.level?1:6===l.level?2:3,c|=m<<6,0!==l.strstart&&(c|=32),c+=31-c%31,l.status=te,u(l,c),0!==l.strstart&&(u(l,e.adler>>>16),u(l,65535&e.adler)),e.adler=1}if(l.status===J)if(l.gzhead.extra){for(s=l.pending;l.gzindex<(65535&l.gzhead.extra.length)&&!(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=S(e.adler,l.pending_buf,l.pending-s,s)),r(e),s=l.pending,l.pending===l.pending_buf_size));)d(l,255&l.gzhead.extra[l.gzindex]),l.gzindex++;l.gzhead.hcrc&&l.pending>s&&(e.adler=S(e.adler,l.pending_buf,l.pending-s,s)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=K)}else l.status=K;if(l.status===K)if(l.gzhead.name){s=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=S(e.adler,l.pending_buf,l.pending-s,s)),r(e),s=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.name.length?255&l.gzhead.name.charCodeAt(l.gzindex++):0,d(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>s&&(e.adler=S(e.adler,l.pending_buf,l.pending-s,s)),0===p&&(l.gzindex=0,l.status=Q)}else l.status=Q;if(l.status===Q)if(l.gzhead.comment){s=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=S(e.adler,l.pending_buf,l.pending-s,s)),r(e),s=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.comment.length?255&l.gzhead.comment.charCodeAt(l.gzindex++):0,d(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>s&&(e.adler=S(e.adler,l.pending_buf,l.pending-s,s)),0===p&&(l.status=ee)}else l.status=ee;if(l.status===ee&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&r(e),l.pending+2<=l.pending_buf_size&&(d(l,255&e.adler),d(l,255&e.adler>>8),e.adler=0,l.status=te)):l.status=te),0!==l.pending){if(r(e),0===e.avail_out)return l.last_flush=-1,I;}else if(0===e.avail_in&&o(t)<=o(i)&&t!==H)return n(e,T);if(l.status===ie&&0!==e.avail_in)return n(e,T);if(0!==e.avail_in||0!==l.lookahead||t!==D&&l.status!==ie){var h=l.strategy===R?f(l,t):l.strategy===3?g(l,t):re[l.level].func(l,t);if((h===se||h===ae)&&(l.status=ie),h===ne||h===se)return 0===e.avail_out&&(l.last_flush=-1),I;if(h===oe&&(t===1?j._tr_align(l):t!==P&&(j._tr_stored_block(l,0,0,!1),t===3&&(a(l.head),0===l.lookahead&&(l.strstart=0,l.block_start=0,l.insert=0))),r(e),0===e.avail_out))return l.last_flush=-1,I}return t===H?0>=l.wrap?A:(2===l.wrap?(d(l,255&e.adler),d(l,255&e.adler>>8),d(l,255&e.adler>>16),d(l,255&e.adler>>24),d(l,255&e.total_in),d(l,255&e.total_in>>8),d(l,255&e.total_in>>16),d(l,255&e.total_in>>24)):(u(l,e.adler>>>16),u(l,65535&e.adler)),r(e),0<l.wrap&&(l.wrap=-l.wrap),0===l.pending?A:I):I},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status,t!==G&&t!==J&&t!==K&&t!==Q&&t!==ee&&t!==te&&t!==ie)?n(e,z):(e.state=null,t===te?n(e,-3):I):z},i.deflateSetDictionary=function(e,t){var i=t.length,o,s,r,n,l,d,u,p;if(!e||!e.state)return z;if(o=e.state,n=o.wrap,2===n||1===n&&o.status!==G||o.lookahead)return z;for(1===n&&(e.adler=v(e.adler,t,i,0)),o.wrap=0,i>=o.w_size&&(0===n&&(a(o.head),o.strstart=0,o.block_start=0,o.insert=0),p=new w.Buf8(o.w_size),w.arraySet(p,t,i-o.w_size,o.w_size,0),t=p,i=o.w_size),l=e.avail_in,d=e.next_in,u=e.input,e.avail_in=i,e.next_in=0,e.input=t,m(o);o.lookahead>=$;){s=o.strstart,r=o.lookahead-($-1);do o.ins_h=(o.ins_h<<o.hash_shift^o.window[s+$-1])&o.hash_mask,o.prev[s&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=s,s++;while(--r);o.strstart=s,o.lookahead=$-1,m(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=$-1,o.match_available=0,e.next_in=d,e.input=u,e.avail_in=l,o.wrap=n,I},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":125,"./adler32":127,"./crc32":129,"./messages":135,"./trees":136}],131:[function(e,t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],132:[function(e,t){"use strict";var i=30;t.exports=function(e,t){var n,o,s,a,r,l,d,u,p,c,m,h,g,f,y,x,b,_,C,k,w,j,v,S,E;n=e.state,o=e.next_in,S=e.input,s=o+(e.avail_in-5),a=e.next_out,E=e.output,r=a-(t-e.avail_out),l=a+(e.avail_out-257),d=n.dmax,u=n.wsize,p=n.whave,c=n.wnext,m=n.window,h=n.hold,g=n.bits,f=n.lencode,y=n.distcode,x=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;top:do{15>g&&(h+=S[o++]<<g,g+=8,h+=S[o++]<<g,g+=8),_=f[h&x];dolen:for(;;){if(C=_>>>24,h>>>=C,g-=C,C=255&_>>>16,0===C)E[a++]=65535&_;else if(16&C){k=65535&_,C&=15,C&&(g<C&&(h+=S[o++]<<g,g+=8),k+=h&(1<<C)-1,h>>>=C,g-=C),15>g&&(h+=S[o++]<<g,g+=8,h+=S[o++]<<g,g+=8),_=y[h&b];dodist:for(;;){if(C=_>>>24,h>>>=C,g-=C,C=255&_>>>16,16&C){if(w=65535&_,C&=15,g<C&&(h+=S[o++]<<g,g+=8,g<C&&(h+=S[o++]<<g,g+=8)),w+=h&(1<<C)-1,w>d){e.msg="invalid distance too far back",n.mode=i;break top}if(h>>>=C,g-=C,C=a-r,w>C){if(C=w-C,C>p&&n.sane){e.msg="invalid distance too far back",n.mode=i;break top}if(j=0,v=m,0===c){if(j+=u-C,C<k){k-=C;do E[a++]=m[j++];while(--C);j=a-w,v=E}}else if(c<C){if(j+=u+c-C,C-=c,C<k){k-=C;do E[a++]=m[j++];while(--C);if(j=0,c<k){C=c,k-=C;do E[a++]=m[j++];while(--C);j=a-w,v=E}}}else if(j+=c-C,C<k){k-=C;do E[a++]=m[j++];while(--C);j=a-w,v=E}for(;2<k;)E[a++]=v[j++],E[a++]=v[j++],E[a++]=v[j++],k-=3;k&&(E[a++]=v[j++],1<k&&(E[a++]=v[j++]))}else{j=a-w;do E[a++]=E[j++],E[a++]=E[j++],E[a++]=E[j++],k-=3;while(2<k);k&&(E[a++]=E[j++],1<k&&(E[a++]=E[j++]))}}else if(0==(64&C)){_=y[(65535&_)+(h&(1<<C)-1)];continue dodist}else{e.msg="invalid distance code",n.mode=i;break top}break}}else if(0==(64&C)){_=f[(65535&_)+(h&(1<<C)-1)];continue dolen}else if(32&C){n.mode=12;break top}else{e.msg="invalid literal/length code",n.mode=i;break top}break}}while(o<s&&a<l);return k=g>>3,o-=k,g-=k<<3,h&=(1<<g)-1,e.next_in=o,e.next_out=a,e.avail_in=o<s?5+(s-o):5-(o-s),e.avail_out=a<l?257+(l-a):257-(a-l),n.hold=h,void(n.bits=g)}},{}],133:[function(e,t,i){"use strict";function o(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=S,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new c.Buf32(ne),t.distcode=t.distdyn=new c.Buf32(oe),t.sane=1,t.back=-1,C):k}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,s(e)):k}function r(e,t){var i,n;return e&&e.state?(n=e.state,0>t?(i=0,t=-t):(i=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||15<t))?k:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,a(e)):k}function d(e,t){var i,o;return e?(o=new n,e.state=o,o.window=null,i=r(e,t),i!==C&&(e.state=null),i):k}function u(e){if(se){var t;for(ae=new c.Buf32(512),re=new c.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(f(y,e.lens,0,288,ae,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;f(x,e.lens,0,32,re,0,e.work,{bits:5}),se=!1}e.lencode=ae,e.lenbits=9,e.distcode=re,e.distbits=5}function p(e,t,i,n){var o=e.state,s;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new c.Buf8(o.wsize)),n>=o.wsize?(c.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(s=o.wsize-o.wnext,s>n&&(s=n),c.arraySet(o.window,t,i-n,s,o.wnext),n-=s,n?(c.arraySet(o.window,t,i-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}var c=e("../utils/common"),m=e("./adler32"),h=e("./crc32"),g=e("./inffast"),f=e("./inftrees"),y=1,x=2,b=4,_=6,C=0,k=-2,w=-3,j=-4,v=8,S=1,E=2,D=3,H=4,P=5,I=6,A=7,z=8,T=9,F=10,O=11,R=12,M=13,N=14,X=15,L=16,Y=17,U=18,B=19,q=20,V=21,$=22,Z=23,W=24,G=25,J=26,K=27,Q=28,ee=29,te=30,ie=31,ne=852,oe=592,se=!0,ae,re;i.inflateReset=a,i.inflateReset2=r,i.inflateResetKeep=s,i.inflateInit=function(e){return d(e,15)},i.inflateInit2=d,i.inflate=function(e,t){var i=0,s=new c.Buf8(4),a=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],r,d,ne,oe,se,ae,re,le,de,ue,pe,ce,me,he,ge,fe,ye,xe,be,_e,Ce,ke,we,je;if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return k;r=e.state,r.mode===R&&(r.mode=M),se=e.next_out,ne=e.output,re=e.avail_out,oe=e.next_in,d=e.input,ae=e.avail_in,le=r.hold,de=r.bits,ue=ae,pe=re,ke=C;inf_leave:for(;;)switch(r.mode){case S:if(0===r.wrap){r.mode=M;break}for(;16>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(2&r.wrap&&35615===le){r.check=0,s[0]=255&le,s[1]=255&le>>>8,r.check=h(r.check,s,2,0),le=0,de=0,r.mode=E;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&le)<<8)+(le>>8))%31){e.msg="incorrect header check",r.mode=te;break}if((15&le)!=v){e.msg="unknown compression method",r.mode=te;break}if(le>>>=4,de-=4,Ce=(15&le)+8,0===r.wbits)r.wbits=Ce;else if(Ce>r.wbits){e.msg="invalid window size",r.mode=te;break}r.dmax=1<<Ce,e.adler=r.check=1,r.mode=512&le?F:R,le=0,de=0;break;case E:for(;16>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(r.flags=le,(255&r.flags)!=v){e.msg="unknown compression method",r.mode=te;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=te;break}r.head&&(r.head.text=1&le>>8),512&r.flags&&(s[0]=255&le,s[1]=255&le>>>8,r.check=h(r.check,s,2,0)),le=0,de=0,r.mode=D;case D:for(;32>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}r.head&&(r.head.time=le),512&r.flags&&(s[0]=255&le,s[1]=255&le>>>8,s[2]=255&le>>>16,s[3]=255&le>>>24,r.check=h(r.check,s,4,0)),le=0,de=0,r.mode=H;case H:for(;16>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}r.head&&(r.head.xflags=255&le,r.head.os=le>>8),512&r.flags&&(s[0]=255&le,s[1]=255&le>>>8,r.check=h(r.check,s,2,0)),le=0,de=0,r.mode=P;case P:if(1024&r.flags){for(;16>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}r.length=le,r.head&&(r.head.extra_len=le),512&r.flags&&(s[0]=255&le,s[1]=255&le>>>8,r.check=h(r.check,s,2,0)),le=0,de=0}else r.head&&(r.head.extra=null);r.mode=I;case I:if(1024&r.flags&&(ce=r.length,ce>ae&&(ce=ae),ce&&(r.head&&(Ce=r.head.extra_len-r.length,!r.head.extra&&(r.head.extra=Array(r.head.extra_len)),c.arraySet(r.head.extra,d,oe,ce,Ce)),512&r.flags&&(r.check=h(r.check,d,ce,oe)),ae-=ce,oe+=ce,r.length-=ce),r.length))break inf_leave;r.length=0,r.mode=A;case A:if(2048&r.flags){if(0===ae)break inf_leave;ce=0;do Ce=d[oe+ce++],r.head&&Ce&&65536>r.length&&(r.head.name+=l(Ce));while(Ce&&ce<ae);if(512&r.flags&&(r.check=h(r.check,d,ce,oe)),ae-=ce,oe+=ce,Ce)break inf_leave}else r.head&&(r.head.name=null);r.length=0,r.mode=z;case z:if(4096&r.flags){if(0===ae)break inf_leave;ce=0;do Ce=d[oe+ce++],r.head&&Ce&&65536>r.length&&(r.head.comment+=l(Ce));while(Ce&&ce<ae);if(512&r.flags&&(r.check=h(r.check,d,ce,oe)),ae-=ce,oe+=ce,Ce)break inf_leave}else r.head&&(r.head.comment=null);r.mode=T;case T:if(512&r.flags){for(;16>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(le!==(65535&r.check)){e.msg="header crc mismatch",r.mode=te;break}le=0,de=0}r.head&&(r.head.hcrc=1&r.flags>>9,r.head.done=!0),e.adler=r.check=0,r.mode=R;break;case F:for(;32>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}e.adler=r.check=o(le),le=0,de=0,r.mode=O;case O:if(0===r.havedict)return e.next_out=se,e.avail_out=re,e.next_in=oe,e.avail_in=ae,r.hold=le,r.bits=de,2;e.adler=r.check=1,r.mode=R;case R:if(t===5||t===_)break inf_leave;case M:if(r.last){le>>>=7&de,de-=7&de,r.mode=K;break}for(;3>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}switch(r.last=1&le,le>>>=1,de-=1,3&le){case 0:r.mode=N;break;case 1:if(u(r),r.mode=q,t===_){le>>>=2,de-=2;break inf_leave}break;case 2:r.mode=Y;break;case 3:e.msg="invalid block type",r.mode=te;}le>>>=2,de-=2;break;case N:for(le>>>=7&de,de-=7&de;32>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if((65535&le)!=(65535^le>>>16)){e.msg="invalid stored block lengths",r.mode=te;break}if(r.length=65535&le,le=0,de=0,r.mode=X,t===_)break inf_leave;case X:r.mode=L;case L:if(ce=r.length,ce){if(ce>ae&&(ce=ae),ce>re&&(ce=re),0===ce)break inf_leave;c.arraySet(ne,d,oe,ce,se),ae-=ce,oe+=ce,re-=ce,se+=ce,r.length-=ce;break}r.mode=R;break;case Y:for(;14>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(r.nlen=(31&le)+257,le>>>=5,de-=5,r.ndist=(31&le)+1,le>>>=5,de-=5,r.ncode=(15&le)+4,le>>>=4,de-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=te;break}r.have=0,r.mode=U;case U:for(;r.have<r.ncode;){for(;3>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}r.lens[a[r.have++]]=7&le,le>>>=3,de-=3}for(;19>r.have;)r.lens[a[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,we={bits:r.lenbits},ke=f(0,r.lens,0,19,r.lencode,0,r.work,we),r.lenbits=we.bits,ke){e.msg="invalid code lengths set",r.mode=te;break}r.have=0,r.mode=B;case B:for(;r.have<r.nlen+r.ndist;){for(;;){if(i=r.lencode[le&(1<<r.lenbits)-1],ge=i>>>24,fe=255&i>>>16,ye=65535&i,ge<=de)break;if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(16>ye)le>>>=ge,de-=ge,r.lens[r.have++]=ye;else{if(16===ye){for(je=ge+2;de<je;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(le>>>=ge,de-=ge,0===r.have){e.msg="invalid bit length repeat",r.mode=te;break}Ce=r.lens[r.have-1],ce=3+(3&le),le>>>=2,de-=2}else if(17===ye){for(je=ge+3;de<je;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}le>>>=ge,de-=ge,Ce=0,ce=3+(7&le),le>>>=3,de-=3}else{for(je=ge+7;de<je;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}le>>>=ge,de-=ge,Ce=0,ce=11+(127&le),le>>>=7,de-=7}if(r.have+ce>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=te;break}for(;ce--;)r.lens[r.have++]=Ce}}if(r.mode===te)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=te;break}if(r.lenbits=9,we={bits:r.lenbits},ke=f(y,r.lens,0,r.nlen,r.lencode,0,r.work,we),r.lenbits=we.bits,ke){e.msg="invalid literal/lengths set",r.mode=te;break}if(r.distbits=6,r.distcode=r.distdyn,we={bits:r.distbits},ke=f(x,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,we),r.distbits=we.bits,ke){e.msg="invalid distances set",r.mode=te;break}if(r.mode=q,t===_)break inf_leave;case q:r.mode=V;case V:if(6<=ae&&258<=re){e.next_out=se,e.avail_out=re,e.next_in=oe,e.avail_in=ae,r.hold=le,r.bits=de,g(e,pe),se=e.next_out,ne=e.output,re=e.avail_out,oe=e.next_in,d=e.input,ae=e.avail_in,le=r.hold,de=r.bits,r.mode===R&&(r.back=-1);break}for(r.back=0;;){if(i=r.lencode[le&(1<<r.lenbits)-1],ge=i>>>24,fe=255&i>>>16,ye=65535&i,ge<=de)break;if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(fe&&0==(240&fe)){for(xe=ge,be=fe,_e=ye;;){if(i=r.lencode[_e+((le&(1<<xe+be)-1)>>xe)],ge=i>>>24,fe=255&i>>>16,ye=65535&i,xe+ge<=de)break;if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}le>>>=xe,de-=xe,r.back+=xe}if(le>>>=ge,de-=ge,r.back+=ge,r.length=ye,0===fe){r.mode=J;break}if(32&fe){r.back=-1,r.mode=R;break}if(64&fe){e.msg="invalid literal/length code",r.mode=te;break}r.extra=15&fe,r.mode=$;case $:if(r.extra){for(je=r.extra;de<je;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}r.length+=le&(1<<r.extra)-1,le>>>=r.extra,de-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Z;case Z:for(;;){if(i=r.distcode[le&(1<<r.distbits)-1],ge=i>>>24,fe=255&i>>>16,ye=65535&i,ge<=de)break;if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(0==(240&fe)){for(xe=ge,be=fe,_e=ye;;){if(i=r.distcode[_e+((le&(1<<xe+be)-1)>>xe)],ge=i>>>24,fe=255&i>>>16,ye=65535&i,xe+ge<=de)break;if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}le>>>=xe,de-=xe,r.back+=xe}if(le>>>=ge,de-=ge,r.back+=ge,64&fe){e.msg="invalid distance code",r.mode=te;break}r.offset=ye,r.extra=15&fe,r.mode=W;case W:if(r.extra){for(je=r.extra;de<je;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}r.offset+=le&(1<<r.extra)-1,le>>>=r.extra,de-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=te;break}r.mode=G;case G:if(0===re)break inf_leave;if(ce=pe-re,r.offset>ce){if(ce=r.offset-ce,ce>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=te;break}ce>r.wnext?(ce-=r.wnext,me=r.wsize-ce):me=r.wnext-ce,ce>r.length&&(ce=r.length),he=r.window}else he=ne,me=se-r.offset,ce=r.length;ce>re&&(ce=re),re-=ce,r.length-=ce;do ne[se++]=he[me++];while(--ce);0===r.length&&(r.mode=V);break;case J:if(0===re)break inf_leave;ne[se++]=r.length,re--,r.mode=V;break;case K:if(r.wrap){for(;32>de;){if(0===ae)break inf_leave;ae--,le|=d[oe++]<<de,de+=8}if(pe-=re,e.total_out+=pe,r.total+=pe,pe&&(e.adler=r.check=r.flags?h(r.check,ne,pe,se-pe):m(r.check,ne,pe,se-pe)),pe=re,(r.flags?le:o(le))!==r.check){e.msg="incorrect data check",r.mode=te;break}le=0,de=0}r.mode=Q;case Q:if(r.wrap&&r.flags){for(;32>de;){if(0===ae)break inf_leave;ae--,le+=d[oe++]<<de,de+=8}if(le!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=te;break}le=0,de=0}r.mode=ee;case ee:ke=1;break inf_leave;case te:ke=w;break inf_leave;case ie:return j;case 32:default:return k;}return(e.next_out=se,e.avail_out=re,e.next_in=oe,e.avail_in=ae,r.hold=le,r.bits=de,(r.wsize||pe!==e.avail_out&&r.mode<te&&(r.mode<K||t!==b))&&p(e,e.output,e.next_out,pe-e.avail_out))?(r.mode=ie,j):(ue-=e.avail_in,pe-=e.avail_out,e.total_in+=ue,e.total_out+=pe,r.total+=pe,r.wrap&&pe&&(e.adler=r.check=r.flags?h(r.check,ne,pe,e.next_out-pe):m(r.check,ne,pe,e.next_out-pe)),e.data_type=r.bits+(r.last?64:0)+(r.mode===R?128:0)+(r.mode===q||r.mode===X?256:0),(0===ue&&0===pe||t===b)&&ke===C&&(ke=-5),ke)},i.inflateEnd=function(e){if(!e||!e.state)return k;var t=e.state;return t.window&&(t.window=null),e.state=null,C},i.inflateGetHeader=function(e,t){var i;return e&&e.state?(i=e.state,0==(2&i.wrap))?k:(i.head=t,t.done=!1,C):k},i.inflateSetDictionary=function(e,t){var i=t.length,n,o,s;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==O)?k:n.mode===O&&(o=1,o=m(o,t,i,0),o!==n.check)?w:(s=p(e,t,i,i),s)?(n.mode=ie,j):(n.havedict=1,C):k},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":125,"./adler32":127,"./crc32":129,"./inffast":132,"./inftrees":134}],134:[function(e,t){"use strict";var i=e("../utils/common"),n=15,o=852,s=592,a=0,r=1,l=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,m,h,g,f,y,x){var b=x.bits,_=0,C=0,k=0,w=0,j=0,v=0,S=0,E=0,D=0,H=0,P=null,I=0,A=new i.Buf16(n+1),z=new i.Buf16(n+1),T=null,F=0,O,R,M,N,X,L,Y,U,B;for(_=0;_<=n;_++)A[_]=0;for(C=0;C<h;C++)A[t[m+C]]++;for(j=b,w=n;1<=w&&0===A[w];w--);if(j>w&&(j=w),0==w)return g[f++]=20971520,g[f++]=20971520,x.bits=1,0;for(k=1;k<w&&0===A[k];k++);for(j<k&&(j=k),E=1,_=1;_<=n;_++)if(E<<=1,E-=A[_],0>E)return-1;if(0<E&&(e===a||1!=w))return-1;for(z[1]=0,_=1;_<n;_++)z[_+1]=z[_]+A[_];for(C=0;C<h;C++)0!==t[m+C]&&(y[z[t[m+C]]++]=C);if(e===a?(P=T=y,L=19):e===r?(P=d,I-=257,T=u,F-=257,L=256):(P=p,T=c,L=-1),H=0,C=0,_=k,X=f,v=j,S=0,M=-1,D=1<<j,N=D-1,e===r&&D>o||e===l&&D>s)return 1;for(;;){Y=_-S,y[C]<L?(U=0,B=y[C]):y[C]>L?(U=T[F+y[C]],B=P[I+y[C]]):(U=96,B=0),O=1<<_-S,R=1<<v,k=R;do R-=O,g[X+(H>>S)+R]=0|(Y<<24|U<<16|B);while(0!==R);for(O=1<<_-1;H&O;)O>>=1;if(0===O?H=0:(H&=O-1,H+=O),C++,0==--A[_]){if(_==w)break;_=t[m+y[C]]}if(_>j&&(H&N)!==M){for(0==S&&(S=j),X+=k,v=_-S,E=1<<v;v+S<w&&(E-=A[v+S],!(0>=E));)v++,E<<=1;if(D+=1<<v,e===r&&D>o||e===l&&D>s)return 1;M=H&N,g[M]=0|(j<<24|v<<16|X-f)}}return 0!==H&&(g[X+H]=0|(4194304|_-S<<24)),x.bits=j,0}},{"../utils/common":125}],135:[function(e,t){"use strict";t.exports={0:"",1:"stream end",2:"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],136:[function(e,t,i){"use strict";function n(e){for(var t=e.length;0<=--t;)e[t]=0}function o(e,t,i,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function r(e){return 256>e?K[e]:K[256+(e>>>7)]}function l(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=255&t>>>8}function d(e,t,i){e.bi_valid>X-i?(e.bi_buf|=65535&t<<e.bi_valid,l(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=i-X):(e.bi_buf|=65535&t<<e.bi_valid,e.bi_valid+=i)}function u(e,t,i){d(e,i[2*t],i[2*t+1])}function s(e,t){var i=0;do i|=1&e,e>>>=1,i<<=1;while(0<--t);return i>>>1}function p(e){16===e.bi_valid?(l(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var i=t.dyn_tree,o=t.max_code,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,r=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,d=t.stat_desc.max_length,u=0,p,c,n,m,h,g;for(m=0;m<=N;m++)e.bl_count[m]=0;for(i[2*e.heap[e.heap_max]+1]=0,p=e.heap_max+1;p<M;p++)(c=e.heap[p],m=i[2*i[2*c+1]+1]+1,m>d&&(m=d,u++),i[2*c+1]=m,!(c>o))&&(e.bl_count[m]++,h=0,c>=l&&(h=r[c-l]),g=i[2*c],e.opt_len+=g*(m+h),a&&(e.static_len+=g*(s[2*c+1]+h)));if(0!=u){do{for(m=d-1;0===e.bl_count[m];)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[d]--,u-=2}while(0<u);for(m=d;0!==m;m--)for(c=e.bl_count[m];0!==c;)(n=e.heap[--p],!(n>o))&&(i[2*n+1]!==m&&(e.opt_len+=(m-i[2*n+1])*i[2*n],i[2*n+1]=m),c--)}}function h(e,t,i){var o=Array(N+1),a=0,r,l;for(r=1;r<=N;r++)o[r]=a=a+i[r-1]<<1;for(l=0;l<=t;l++){var n=e[2*l+1];0!==n&&(e[2*l]=s(o[n]++,n))}}function m(){var e=Array(N+1),t,i,n,a,r;for(n=0,a=0;a<z-1;a++)for(ee[a]=n,t=0;t<1<<V[a];t++)Q[n++]=a;for(Q[n-1]=a,r=0,a=0;16>a;a++)for(te[a]=r,t=0;t<1<<$[a];t++)K[r++]=a;for(r>>=7;a<O;a++)for(te[a]=r<<7,t=0;t<1<<$[a]-7;t++)K[256+r++]=a;for(i=0;i<=N;i++)e[i]=0;for(t=0;143>=t;)G[2*t+1]=8,t++,e[8]++;for(;255>=t;)G[2*t+1]=9,t++,e[9]++;for(;279>=t;)G[2*t+1]=7,t++,e[7]++;for(;287>=t;)G[2*t+1]=8,t++,e[8]++;for(h(G,F+1,e),t=0;t<O;t++)J[2*t+1]=5,J[2*t]=s(t,5);ne=new o(G,V,T+1,F,N),oe=new o(J,$,0,O,N),se=new o([],Z,0,R,L)}function g(e){var t;for(t=0;t<F;t++)e.dyn_ltree[2*t]=0;for(t=0;t<O;t++)e.dyn_dtree[2*t]=0;for(t=0;t<R;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function f(e){8<e.bi_valid?l(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function y(e,t,i,n){f(e),n&&(l(e,i),l(e,~i)),D.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function x(e,t,i,n){var o=2*t,s=2*i;return e[o]<e[s]||e[o]===e[s]&&n[t]<=n[i]}function b(e,t,i){for(var n=e.heap[i],o=i<<1;o<=e.heap_len&&(o<e.heap_len&&x(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!x(t,n,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=n}function _(e,t,i){var n=0,o,s,a,l;if(0!==e.last_lit)do o=e.pending_buf[e.d_buf+2*n]<<8|e.pending_buf[e.d_buf+2*n+1],s=e.pending_buf[e.l_buf+n],n++,0===o?u(e,s,t):(a=Q[s],u(e,a+T+1,t),l=V[a],0!==l&&(s-=ee[a],d(e,s,l)),o--,a=r(o),u(e,a,i),l=$[a],0!==l&&(o-=te[a],d(e,o,l)));while(n<e.last_lit);u(e,Y,t)}function C(e,t){var i=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.elems,r=-1,l,n,d;for(e.heap_len=0,e.heap_max=M,l=0;l<a;l++)0===i[2*l]?i[2*l+1]=0:(e.heap[++e.heap_len]=r=l,e.depth[l]=0);for(;2>e.heap_len;)d=e.heap[++e.heap_len]=2>r?++r:0,i[2*d]=1,e.depth[d]=0,e.opt_len--,s&&(e.static_len-=o[2*d+1]);for(t.max_code=r,l=e.heap_len>>1;1<=l;l--)b(e,i,l);d=a;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=n,i[2*d]=i[2*l]+i[2*n],e.depth[d]=(e.depth[l]>=e.depth[n]?e.depth[l]:e.depth[n])+1,i[2*l+1]=i[2*n+1]=d,e.heap[1]=d++,b(e,i,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],c(e,t),h(i,r,e.bl_count)}function k(e,t,i){var o=-1,s=t[1],a=0,r=7,l=4,d,n;for(0===s&&(r=138,l=3),t[2*(i+1)+1]=65535,d=0;d<=i;d++){if(n=s,s=t[2*(d+1)+1],++a<r&&n===s)continue;else a<l?e.bl_tree[2*n]+=a:0===n?10>=a?e.bl_tree[2*B]++:e.bl_tree[2*q]++:(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*U]++);a=0,o=n,0===s?(r=138,l=3):n===s?(r=6,l=3):(r=7,l=4)}}function w(e,t,i){var o=-1,s=t[1],a=0,r=7,l=4,p,n;for(0===s&&(r=138,l=3),p=0;p<=i;p++){if(n=s,s=t[2*(p+1)+1],++a<r&&n===s)continue;else if(a<l)do u(e,n,e.bl_tree);while(0!=--a);else 0===n?10>=a?(u(e,B,e.bl_tree),d(e,a-3,3)):(u(e,q,e.bl_tree),d(e,a-11,7)):(n!==o&&(u(e,n,e.bl_tree),a--),u(e,U,e.bl_tree),d(e,a-3,2));a=0,o=n,0===s?(r=138,l=3):n===s?(r=6,l=3):(r=7,l=4)}}function j(e){var t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),C(e,e.bl_desc),t=R-1;3<=t&&0===e.bl_tree[2*W[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function v(e,t,i,n){var o;for(d(e,t-257,5),d(e,i-1,5),d(e,n-4,4),o=0;o<n;o++)d(e,e.bl_tree[2*W[o]+1],3);w(e,e.dyn_ltree,t-1),w(e,e.dyn_dtree,i-1)}function S(e){var t=4093624447,i;for(i=0;31>=i;i++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*i])return H;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return P;for(i=32;i<T;i++)if(0!==e.dyn_ltree[2*i])return P;return H}function E(e,t,i,n){d(e,(I<<1)+(n?1:0),3),y(e,t,i,!0)}var D=e("../utils/common"),H=0,P=1,I=0,A=1,z=29,T=256,F=T+1+z,O=30,R=19,M=2*F+1,N=15,X=16,L=7,Y=256,U=16,B=17,q=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(2*(F+2));n(G);var J=Array(2*O);n(J);var K=Array(512);n(K);var Q=Array(258-3+1);n(Q);var ee=Array(z);n(ee);var te=Array(O);n(te);var ie=!1,ne,oe,se;i._tr_init=function(e){ie||(m(),ie=!0),e.l_desc=new a(e.dyn_ltree,ne),e.d_desc=new a(e.dyn_dtree,oe),e.bl_desc=new a(e.bl_tree,se),e.bi_buf=0,e.bi_valid=0,g(e)},i._tr_stored_block=E,i._tr_flush_block=function(e,t,i,n){var o=0,s,a;0<e.level?(e.strm.data_type===2&&(e.strm.data_type=S(e)),C(e,e.l_desc),C(e,e.d_desc),o=j(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=i+5,i+4<=s&&-1!==t?E(e,t,i,n):e.strategy===4||a===s?(d(e,(A<<1)+(n?1:0),3),_(e,G,J)):(d(e,(2<<1)+(n?1:0),3),v(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),_(e,e.dyn_ltree,e.dyn_dtree)),g(e),n&&f(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=255&t>>>8,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(Q[i]+T+1)]++,e.dyn_dtree[2*r(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){d(e,A<<1,3),u(e,Y,G),p(e)}},{"../utils/common":125}],137:[function(e,t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],138:[function(e,t){"use strict";function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===i||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function s(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function a(){h&&f&&(h=!1,f.length?m=f.concat(m):g=-1,m.length&&r())}function r(){if(!h){var e=o(a);h=!0;for(var t=m.length;t;){for(f=m,m=[];++g<t;)f&&f[g].run();g=-1,t=m.length}f=null,h=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var u=t.exports={},p,c;(function(){try{p="function"==typeof setTimeout?setTimeout:i}catch(t){p=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}})();var m=[],h=!1,g=-1,f;u.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||h||o(r)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=d,u.addListener=d,u.once=d,u.off=d,u.removeListener=d,u.removeAllListeners=d,u.emit=d,u.prependListener=d,u.prependOnceListener=d,u.listeners=function(){return[]},u.binding=function(){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],139:[function(e,t,i){"use strict";function n(e,t){var i=o(t);0===i.length&&(i="\u03B4 ");var n=[];for(var a of e)s(a,n,t);return 0<n.length?i+n.join(", "):""}function o(e){var t=[],i=`${c(e.nucleus)} NMR`;return e.solvent&&t.push(p(e.solvent)),e.frequencyObserved&&t.push(`${(1*e.frequencyObserved).toFixed(0)} MHz`),i+=0<t.length?` (${t.join(", ")}):  `:": \u03B4 ",i}function s(e,t,i){var n="",o=[],s=[e.from,e.to];if(Array.isArray(e.signal)&&0<e.signal.length){var r=e.signal;if(1<r.length){!0===i.ascending&&r.sort((e,t)=>{return e.delta-t.delta}),n+=`${C(...s).toFixed(i.nbDecimalDelta)}-${u(...s).toFixed(i.nbDecimalDelta)}`,n+=` (${a(e,i)}`;for(var l of r)o=[],void 0!==l.delta&&(n=m(n),n+=l.delta.toFixed(i.nbDecimalDelta)),d({},l,o,i),0<o.length&&(n+=` (${o.join(", ")})`);n+=")"}else o=[],void 0===r[0].delta?(n+=`${C(...s).toFixed(i.nbDecimalDelta)}-${u(...s).toFixed(i.nbDecimalDelta)}`,d(e,r[0],o,i),0<o.length&&(n+=` (${o})`)):(n+=r[0].delta.toFixed(i.nbDecimalDelta),d(e,r[0],o,i),0<o.length&&(n+=` (${o.join(", ")})`))}else n+=`${C(...s).toFixed(i.nbDecimalDelta)}-${u(...s).toFixed(i.nbDecimalDelta)}`,d(e,[],o,i),0<o.length&&(n+=` (${o.join(", ")})`);t.push(n)}function a(e,t){var i="";return e.pubIntegral?i=e.pubIntegral:e.integral&&(i=e.integral.toFixed(0)+t.nucleus[t.nucleus.length-1]),i}function r(e,t,i){var n=a(e,i);0<n.length&&t.push(n)}function l(e,t){var i=e.multiplicity||(0,y.joinCoupling)(e,0.05);0<i.length&&t.push(i)}function d(e,t,i,n){for(var o of n.format)switch(o.toUpperCase()){case"I":r(e,i,n);break;case"M":l(t,i);break;case"A":f(t,i);break;case"J":g(t,i,n);break;default:throw new Error(`Unknow format letter: ${o}`);}}function p(e){return e.replace(/([0-9]+)/g,"<sub>$1</sub>")}function c(e){return e.replace(/([0-9]+)/g,"<sup>$1</sup>")}function m(e){return!(0<e.length)||e.match(/ $/)||e.match(/\($/)||(e+=", "),e}function h(e){return e=e.replace(/([0-9]+)/g,"<sub>$1</sub>"),e=e.replace(/"([^"]*)"/g,"<i>$1</i>"),e}function g(e,t,i){if(Array.isArray(e.j)&&0<e.j.length){e.j.sort(function(e,t){return t.coupling-e.coupling});var n=[];for(var o of e.j)void 0!==o.coupling&&n.push(o.coupling.toFixed(i.nbDecimalJ));0<n.length&&t.push(`<i>J</i> = ${n.join(", ")} Hz`)}}function f(e,t){e.pubAssignment?t.push(h(e.pubAssignment)):e.assignment&&t.push(h(e.assignment))}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t={}){t.nucleus||(t.nucleus="1H");var i=t.nucleus.toLowerCase().replace(/[0-9]/g,""),o=x[i];t=Object.assign({},o,{ascending:!1,format:"IMJA"},t),e=JSON.parse(JSON.stringify(e)),!0===t.ascending&&e.sort((e,t)=>{var i=C(e.from,e.to),n=C(t.from,t.to);return i-n});var s=n(e,t);return 0<s.length&&(s+="."),s};var y=e("spectra-nmr-utilities"),x={h:{nucleus:"1H",nbDecimalDelta:2,nbDecimalJ:1,observedFrequency:400},c:{nucleus:"13C",nbDecimalDelta:1,nbDecimalJ:1,observedFrequency:100},f:{nucleus:"19F",nbDecimalDelta:2,nbDecimalJ:1,observedFrequency:400}}},{"spectra-nmr-utilities":164}],140:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./range/Ranges");Object.defineProperty(i,"Ranges",{enumerable:!0,get:function(){return n(o).default}});var s=e("./acs/acs.js");Object.defineProperty(i,"getACS",{enumerable:!0,get:function(){return n(s).default}})},{"./acs/acs.js":139,"./range/Ranges":141}],141:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("spectra-nmr-utilities"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o),a=e("ml-stat"),r=e("lodash.round"),l=n(r),d=e("../acs/acs"),p=n(d),c=e("./peak2Vector"),m=n(c);class h extends Array{constructor(e){if(Array.isArray(e)){super(e.length);for(var t=0;t<e.length;t++)this[t]=e[t]}else"number"==typeof e?super(e):super()}static fromSignals(e,t){t=Object.assign({},{lineWidth:1,frequency:400,nucleus:"1H"},t),e=s.group(e,t);var n=e.length,o=Array(n),r,i,a,l,d,p;for(r=0;r<n;r++){if(a=e[r],l=0,p=a.j,p)for(i=0;i<p.length;i++)l+=p[i].coupling;l+=2*t.lineWidth,l/=t.frequency,o[r]={from:a.delta-l,to:a.delta+l,integral:a.nbAtoms,signal:[a]}}for(r=0;r<o.length;r++)for(d=(o[r].from+o[r].to)/2,l=S(o[r].from-o[r].to),i=o.length-1;i>r;i--)S(d-(o[i].from+o[i].to)/2)<=S(l+S(o[i].from-o[i].to))/2&&(o[r].from=C(o[r].from,o[i].from),o[r].to=u(o[r].to,o[i].to),o[r].integral+=o[i].integral,o[i].signal.forEach((e)=>{o[r].signal.push(e)}),o.splice(i,1),i=o.length-1,d=(o[r].from+o[r].to)/2,l=S(o[r].from-o[r].to));return o.sort((e,t)=>{return e.from-t.from}),new h(o)}static fromSpectrum(e,t={}){return e.getRanges(t)}static shouldIntegrate(e){return!e.kind||"solvent"!==e.kind+""&&"reference"!==e.kind+""&&"impurity"!==e.kind+""&&"standard"!==e.kind+""}sumOfIntegrals(e={}){var t=e.sumAll,i=0;for(var n of this)(t!==void 0&&t||h.shouldIntegrate(n))&&(i+=n.integral);return i}updateIntegrals(e={}){var t=e.factor||1,n;if(e.sum){var i=e.sum||1,o=this.sumOfIntegrals();t=i/(o||1)}for(n=0;n<this.length;n++)this[n].integral=(0,l.default)(this[n].integral*t,5);return this}getVector(e){if(this[0].signal[0].peak)return(0,m.default)(this.getPeakList(),e);throw Error("This method is only for signals with peaks")}getPeakList(){if(this[0].signal[0].peak){for(var e=[],t=0,i;t<this.length;t++){i=this[t];for(var n=0;n<i.signal.length;n++)e=e.concat(i.signal[n].peak)}return e}throw Error("This method is only for signals with peaks")}getACS(e){return(0,p.default)(this,e)}toIndex(e={}){var t=[];e.joinCouplings&&this.joinCouplings(e);for(var n of this)if(Array.isArray(n.signal)&&0<n.signal.length){for(var o=n.signal.length,r=Array(o),l=0;l<o;l++)r[l]=n.signal[l].delta;t.push({multiplicity:1<o?"m":n.signal[0].multiplicity||s.joinCoupling(n.signal[0],e.tolerance),delta:a.array.arithmeticMean(r)||0.5*(n.to+n.from),integral:n.integral})}else t.push({delta:0.5*(n.to+n.from),multiplicity:"m"});return t}joinCouplings(e={}){this.forEach((t)=>{t.signal.forEach((t)=>{t.multiplicity=s.joinCoupling(t,e.tolerance)})})}updateMultiplicity(e={}){this.forEach((t)=>{if(t.signal){var i=t.signal;1===i.length?i[0].multiplicity=s.joinCoupling(i[0],e.tolerance):i.forEach((e)=>{e.multiplicity="m"})}})}clone(){var e=JSON.parse(JSON.stringify(this));return new h(e)}}i.default=h},{"../acs/acs":139,"./peak2Vector":142,"lodash.round":41,"ml-stat":110,"spectra-nmr-utilities":164}],142:[function(e,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n={}){function o(e,t,i,n){var o=e*f(i,2)/4;return o/(f(n-t,2)+f(i/2,2))}function r(e,t,i,n){return e*d(-0.5*f((n-t)/(i/2),2))}var l=n.from,u=l===void 0?null:l,p=n.to,c=p===void 0?null:p,m=n.nbPoints,h=m===void 0?1024:m,g=n.functionName,b=g===void 0?"":g,_=n.nWidth,C=_===void 0?4:_,k;if(null===u){u=s;for(var v=0;v<e.length;v++)k=e[v].x-e[v].width*C,k<u&&(u=k)}if(null===c){c=a;for(var i=0;i<e.length;i++)k=e[i].x+e[i].width*C,k>c&&(c=k)}for(var S=Array(h),E=Array(h),D=(c-u)/(h-1),H=0;H<h;H++)S[H]=u+H*D,E[H]=0;var P=e[0].y?"y":"intensity",I;switch(b.toLowerCase()){case"lorentzian":I=o;break;default:I=r;}for(var A=0,z;A<e.length;A++)if(z=e[A],z.x>u&&z.x<c)for(var T=t((z.x-u)/D),F=t(z.width*C/D),w=T-F;w<T+F;w++)0<=w&&w<h&&(E[w]+=I(z[P],S[w],z.width,z.x));return{x:S,y:E}}},{}],143:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("brukerconverter"),s=n(o),a=e("nmr-simulation"),r=e("./SD"),l=n(r),d=e("./filters/Filters.js"),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(d),p=e("./peakPicking/peaks2Ranges"),c=n(p),m=e("./peakPicking/impurities.js"),h=n(m);class g extends l.default{static fromSignals(e,t={}){t=Object.assign({},{nbPoints:16384,maxClusterSize:8,output:"xy"},t);var i=a.SpinSystem.fromPrediction(e);i.ensureClusterSize(t);var n=(0,a.simulate1D)(i,t);return g.fromXY(n.x,n.y,t)}static fromXY(e,t,i){i=Object.assign({},i,{xUnit:"PPM",yUnit:"Intensity",dataType:"NMR SPECTRUM"});var n=l.default.fromXY(e,t,i),o=n.sd.spectra[0];return o.observeFrequency=i.frequency||400,n.putParam("observefrequency",o.observeFrequency),n.putParam(".SOLVENTNAME",i.solvent||"none"),n.putParam("$SW_h",S(o.lastX-o.firstX)*o.observeFrequency),n.putParam("$SW",S(o.lastX-o.firstX)),n.putParam("$TD",o.nbPoints),n.sd.xType=i.nucleus||"1H",new g(n.sd)}static fromBruker(e,t){t=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},t);var i=null;return i=Array.isArray(e)?s.default.converFolder(e,t):s.default.convertZip(e,t),i?i.map(function(e){return new g(e)}):null}getMagnitude(){return u.absoluteValue(this)}getNucleus(e){return e&&0!==e&&1!==e?"":this.sd.xType}getSolventName(){return(this.sd.info[".SOLVENTNAME"]||this.sd.info.$SOLVENT||"").replace("<","").replace(">","")}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}getNMRPeakThreshold(e){return"1H"===e?3:"13C"===e?5:1}fourierTransform(){return u.fourierTransform(this)}postFourierTransform(e){return u.phaseCorrection(0,e)}zeroFilling(e,t){return u.zeroFilling(this,e,t)}brukerFilter(){return u.digitalFilter(this,{brukerFilter:!0})}digitalFilter(e){return u.digitalFilter(this,e)}echoAntiechoFilter(){return this}SNVFilter(){return this}powerFilter(e){var t=this.getMinY();return 1>e&&0>t&&this.YShift(-1*t),this}phaseCorrection(e,t){return u.phaseCorrection(this,e,t)}getRanges(e={}){if(this.ranges)return this.ranges;var t=this.getPeaks(e),i=(0,c.default)(this,t,e);return i}createRanges(e){return this.ranges=null,this.peaks=null,this.ranges=this.getRanges(e),this.ranges}getResidual(e){return this.getImpurity(e,"solvent_residual_peak")}getImpurities(e){return this.getImpurity(e)}getImpurity(e,t=null){e=e.toLowerCase(),"(cd3)2so"===e&&(e="dmso");var i=h.default[e];return t&&(i=i[t.toLocaleLowerCase()]),i}fillImpurity(e,t={}){var i=t.impurity,n=i===void 0?null:i,o=t.value,s=o===void 0?0:o,a=t.error,r=a===void 0?0.025:a,l=this.getImpurities(e,n);if(!l)throw Error("The solvent does not mach with a impurities into the list");var d=this.getPeaks(t);d.forEach((e)=>{for(var t in l)for(var i of t)if(e.width+r>S(i.shift-e.x)){var n=e.x+e.width,o=e.x-e.width;this.fill(n,o,s)}})}}i.default=g},{"./SD":145,"./filters/Filters.js":146,"./peakPicking/impurities.js":157,"./peakPicking/peaks2Ranges":162,brukerconverter:3,"nmr-simulation":116}],144:[function(e,i,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("brukerconverter"),a=o(s),r=e("ml-array-min"),l=o(r),d=e("ml-array-max"),p=o(d),c=e("nmr-simulation"),m=e("./SD"),h=o(m),g=e("./peakPicking/peakPicking2D"),f=o(g),y=e("./peakPicking/peakOptimizer"),x=o(y),b=e("./filters/Filters.js"),_=o(b);class k extends h.default{static fromPrediction(e,t){var i=(0,c.simulate2D)(e,t),n=k.fromMatrix(i,t),o=n.toJcamp({type:"NTUPLES"});return k.fromJcamp(o)}static fromBruker(e,t){t=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},t);var i=null;return i=Array.isArray(e)?a.default.converFolder(e,t):a.default.convertZip(e,t),i?i.map(function(e){return new k(e)}):null}static fromMatrix(e,t){var n={profiling:[],logs:[]},o=[],s=e[0].length;n.spectra=o,n.info={};var a=t.firstY||0,r=t.lastY||e.length-1,d=(r-a)/(e.length-1),c=t.firstX||0,m=t.lastX||s-1,h=t.x;if(!h){h=Array(s);for(var g=0;g<s;g++)h[g]=c+(r-a)/(s-1)*g}var i=t.frequencyX||400,f=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;return e.forEach((e,r)=>{var g={};g.isXYdata=!0,g.nbPoints=s,g.firstX=c,g.firstY=e[0],g.lastX=m,g.lastY=e[g.nbPoints-1],g.xFactor=1,g.yFactor=1,g.deltaX=(g.lastX-g.firstX)/(g.nbPoints-1),g.title=t.title||"spectra-data from matrix",g.dataType=t.dataType||"nD NMR SPECTRUM",g.observeFrequency=i,g.data=[{x:h,y:e}],g.page=a+r*d,n.xType=t.xType||t.nucleusX||"1H",o.push(g),f=C(f,(0,l.default)(e)),b=u(b,(0,p.default)(e))}),n.ntuples=[{units:t.xUnit||"PPM"},{units:t.yUnit||"PPM"},{units:t.zUnit||"Intensity"}],n.info["2D_Y_FREQUENCY"]=t.frequencyY||400,n.info["2D_X_FREQUENCY"]=t.frequencyX||400,n.info.observefrequency=n.info["2D_X_FREQUENCY"],n.info.$BF1=n.info.observefrequency,n.info[".SOLVENTNAME"]=t.solvent||"none",n.info.$SW_h=S(m-c)*i,n.info.$SW=S(m-c),n.info.$TD=s,n.info.firstY=a,n.info.lastY=r,n.minMax={minY:a,maxY:r,minX:c,maxX:m,minZ:f,maxZ:b},n.yType=t.yType||t.nucleusY||"1H",n.twoD=!0,new k(n)}isHomoNuclear(){return this.sd.xType===this.sd.yType}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}observeFrequencyY(){return this.sd.indirectFrequency}getSolventName(){return(this.sd.info[".SOLVENTNAME"]||this.sd.info.$SOLVENT).replace("<","").replace(">","")}getXUnits(){return this.sd.ntuples[1].units}getYUnits(){return this.sd.ntuples[0].units}getZUnits(){return this.sd.ntuples[2].units}getLastY(){return this.sd.minMax.maxY}getFirstY(){return this.sd.minMax.minY}getDeltaY(){return(this.getLastY()-this.getFirstY())/(this.getNbSubSpectra()-1)}getMinZ(){return this.sd.minMax.minZ}getMaxZ(){return this.sd.minMax.maxZ}getZones(e){e=e||{},e.thresholdFactor||(e.thresholdFactor=1);var n=t(255*Math.random());e.idPrefix&&(n=e.idPrefix);for(var o=(0,f.default)(this,e.thresholdFactor),s=0;s<o.length;s++)o[s]._highlight=[`${n}_${s}`],o[s].signalID=`${n}_${s}`;if(e.references&&x.default.alignDimensions(o,e.references),"new"===e.format){for(var i=Array(o.length),a=o.length-1,r;0<=a;a--)r=o[a],i[a]={fromTo:r.fromTo,integral:r.intensity||1,remark:"",signal:[{peak:r.peaks,delta:[r.shiftX,r.shiftY]}],_highlight:r._highlight,signalID:r.signalID};o=i}return this.zones=o,this.zones}getNMRPeakThreshold(e){return"1H"===e?3:"13C"===e?5:1}getNucleus(e){return 1===e?this.sd.xType:2===e?this.sd.yType:this.sd.xType}zeroFilling(e,t){return _.default.zeroFilling(this,e,t)}brukerFilter(){return _.default.digitalFilter(this,{brukerFilter:!0})}digitalFilter(e){return _.default.digitalFilter(this,e)}fourierTransform(){return _.default.fourierTransform(this)}postFourierTransform(e){return _.default.phaseCorrection(0,e)}}n.default=k},{"./SD":145,"./filters/Filters.js":146,"./peakPicking/peakOptimizer":159,"./peakPicking/peakPicking2D":161,brukerconverter:3,"ml-array-max":43,"ml-array-min":45,"nmr-simulation":116}],145:[function(e,i,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("ml-array-utils"),a=o(s),r=e("ml-array-min"),l=o(r),d=e("ml-array-max"),c=o(d),m=e("ml-array-median"),h=o(m),g=e("ml-array-rescale"),f=o(g),y=e("jcampconverter"),x=o(y),b=e("./jcampEncoder/JcampCreator"),_=o(b),k=e("./peakPicking/peakPicking"),w=o(k),j=2;class v{constructor(e){this.sd=e,this.activeElement=0}static fromJcamp(e,t={}){t=Object.assign({},{keepSpectra:!0,keepRecordsRegExp:/^.+$/},t,{xy:!0});var i=x.default.convert(e,t);return new this(i)}static fromXY(e,t,i={}){var n={profiling:[],logs:[],info:{}},o={};return o.isXYdata=!0,o.nbPoints=e.length,o.firstX=e[0],o.firstY=t[0],o.lastX=e[o.nbPoints-1],o.lastY=t[o.nbPoints-1],o.xFactor=1,o.yFactor=1,o.xUnit=i.xUnit,o.yUnit=i.yUnit,o.deltaX=(o.lastX-o.firstX)/(o.nbPoints-1),o.title=i.title||"spectra-data from xy",o.dataType=i.dataType,o.data=[{x:e,y:t}],n.twoD=!1,n.spectra=[o],new this(n)}setActiveElement(e){this.activeElement=e}getActiveElement(){return this.activeElement}getXUnits(){return this.getSpectrum().xUnit}setXUnits(e){this.getSpectrum().xUnit=e}getYUnits(){return this.getSpectrum().yUnit}getSpectraVariable(e){return this.sd.ntuples[e]}getPage(e){return this.sd.spectra[e].page}getNbPoints(e){return this.getSpectrumData(e).y.length}getFirstX(e=this.activeElement){return this.sd.spectra[e].firstX}setFirstX(e,t=this.activeElement){this.sd.spectra[t].firstX=e}getLastX(e=this.activeElement){return this.sd.spectra[e].lastX}setLastX(e,t=this.activeElement){this.sd.spectra[t].lastX=e}getFirstY(e=this.activeElement){return this.sd.spectra[e].firstY}setFirstY(e,t=this.activeElement){this.sd.spectra[t].firstY=e}getLastY(e=this.activeElement){return this.sd.spectra[e].lastY}setLastY(e,t=this.activeElement){this.sd.spectra[t].lastY=e}setDataClass(e){e===j&&(this.getSpectrum().isPeaktable=!0,this.getSpectrum().isXYdata=!1),e===1&&(this.getSpectrum().isXYdata=!0,this.getSpectrum().isPeaktable=!1)}isDataClassPeak(){return!!this.getSpectrum().isPeaktable&&this.getSpectrum().isPeaktable}isDataClassXY(){return!!this.getSpectrum().isXYdata&&this.getSpectrum().isXYdata}setDataType(e){this.getSpectrum().dataType=e}getDataType(){return this.getSpectrum().dataType}getSpectrumData(e=this.activeElement){return this.sd.spectra[e].data[0]}getSpectrum(e=this.activeElement){return this.sd.spectra[e]}getNbSubSpectra(){return this.sd.spectra.length}getXData(e){return this.getSpectrumData(e).x}getYData(e){return this.getSpectrumData(e).y}getX(e){return this.getXData()[e]}getY(e){return this.getYData()[e]}getXYData(e=this.activeElement){return[this.getXData(e),this.getYData(e)]}getTitle(e){return this.getSpectrum(e).title}setTitle(e,t){this.getSpectrum(t).title=e}getMinY(e){return(0,l.default)(this.getYData(e))}getMaxY(e){return(0,c.default)(this.getYData(e))}getMinMaxY(e){return{min:this.getMinY(e),max:this.getMaxY(e)}}getNoiseLevel(e={}){var t=e.from,i=e.to,n=t!==void 0&&i!==void 0?this.getVector({from:t,to:i}):this.getYData(),o=(0,h.default)(n);return o*this.getNMRPeakThreshold(this.getNucleus(1))}arrayPointToUnits(e){return this.getFirstX()-e*(this.getFirstX()-this.getLastX())/(this.getNbPoints()-1)}unitsToArrayPoint(e){if(this.isDataClassXY())return t((this.getFirstX()-e)*(-1/this.getDeltaX()));if(this.isDataClassPeak()){var i=0,n=this.getNbPoints()-1,o=0,s;if(this.getFirstX()>this.getLastX()){if(n=0,o=this.getNbPoints()-1,e>this.getFirstX())return this.getNbPoints();if(e<this.getLastX())return-1}else{if(e<this.getFirstX())return-1;if(e>this.getLastX())return this.getNbPoints()}for(;1<S(n-o);){if(s=t(p((n+o)/2)),this.getX(s)===e)return s;this.getX(s)>e?n=s:o=s}return i=o,S(this.getX(o)-e)>S(this.getX(n)-e)&&(i=n),i}return 0}getDeltaX(){return(this.getLastX()-this.getFirstX())/(this.getNbPoints()-1)}setMinMax(e,t){var i=this.getYData();(0,f.default)(i,{min:e,max:t,output:i}),this.updateFirstLastY()}setMin(e){var t=this.getYData();(0,f.default)(t,{min:e,output:t,autoMinMax:!0}),this.updateFirstLastY()}setMax(e){var t=this.getYData();(0,f.default)(t,{max:e,output:t,autoMinMax:!0}),this.updateFirstLastY()}yShift(e){for(var t=this.getYData(),n=0;n<t.length;n++)t[n]+=e;this.updateFirstLastY(t)}shift(e){for(var t=0;t<this.getNbSubSpectra();t++){this.setActiveElement(t);for(var i=this.getSpectrumData().x,n=this.getNbPoints(),o=0;o<n;o++)i[o]+=e;this.updateFirstLastX(i)}}updateFirstLastY(e){Array.isArray(e)||(e=this.getYData()),this.setFirstY(e[0]),this.setLastY(e[e.length-1])}updateFirstLastX(e){Array.isArray(e)||(e=this.getXData()),this.setFirstX(e[0]),this.setLastX(e[e.length-1])}fill(e,t,n=0){if(e>t){var o=[t,e];e=o[0],t=o[1]}for(var s=this.getActiveElement(),a=0;a<this.getNbSubSpectra();a++){this.setActiveElement(a);var i=this.getFirstX(),r=this.getLastX();if(this.getDeltaX()){var l=[r,i];i=l[0],r=l[1]}if(e>r||t<i)return;e=u(e,i),t=C(t,r);var d=this.unitsToArrayPoint(e),p=this.unitsToArrayPoint(t);if(d>p){var c=[p,d];d=c[0],p=c[1]}for(var m=this.getYData(),h=d;h<=p;h++)m[h]=n;this.updateFirstLastY()}this.setActiveElement(s)}suppressRange(e,t){this.suppressRanges([{from:e,to:t}])}suppressRanges(e=[]){var t=this.getActiveElement();for(var n of e)if(n.active){var o=n.from,s=n.to;if(o===s)return;if(o>s){var a=[s,o];o=a[0],s=a[1]}for(var r=void 0,l=void 0,d=void 0,p=void 0,c=0;c<this.getNbSubSpectra();c++){this.setActiveElement(c),d=this.getXData(),p=this.getYData();var i=this.getFirstX(),m=this.getLastX();if(this.getDeltaX()){var h=[m,i];i=h[0],m=h[1]}if(o>m||s<i)return;if(o=u(o,i),s=C(s,m),r=this.unitsToArrayPoint(o),l=this.unitsToArrayPoint(s),r>l){var g=[l,r];r=g[0],l=g[1]}p.splice(r,l-r+1),d.splice(r,l-r+1),this.updateFirstLastX(),this.updateFirstLastY(),this.setDataClass(j)}}this.setActiveElement(t)}getMaxPeak(){for(var e=this.getSpectraDataY(),t=e[0],n=0,o=0;o<e.length;o++)t<e[o]&&(t=e[o],n=o);return[this.getX(n),t]}getParamDouble(e,t){var i=this.sd.info[e];return i||(i=t),i}getParamString(e,t){var i=this.sd.info[e];return i||(i=t),`${i}`}getParamInt(e,t){var i=this.sd.info[e];return i||(i=t),i}getParam(e,t){var i=this.sd.info[e];return i||(i=t),i}containsParam(e){return!!this.sd.info[e]}getSpectraDataY(){return this.getYData()}getSpectraDataX(){return this.getXData()}resetMinMax(){}putParam(e,t){this.sd.info[e]=t}getArea(e,t){var n=this.unitsToArrayPoint(e),o=this.unitsToArrayPoint(t),s=0;if(n>o){var a=[o,n];n=a[0],o=a[1]}for(var r=n;r<o;r++)s+=this.getY(r);return s*S(this.getDeltaX())}updateIntegrals(e,t={}){e.forEach((e)=>{e.integral=this.getArea(e.from,e.to)}),e.updateIntegrals({sum:t.nH})}getVector(e={}){var t=e.from,i=e.to,n=e.nbPoints,o=e.variant;return n?a.default.getEquallySpacedData(this.getSpectraDataX(),this.getSpectraDataY(),{from:t,to:i,numberOfPoints:n,variant:o}):this.getPointsInWindow(t,i,e)}reduceData(e={}){if(!this.isDataClassXY())throw Error("reduceData can only apply on equidistant data");for(var t=e.from,n=e.to,o=e.nbPoints,s=this.activeElement,r=0;r<this.getNbSubSpectra();r++)if(this.setActiveElement(r),"hz"!==this.getXUnits().toLowerCase())if(e.nbPoints){var i=this.getSpectraDataX(),l=this.getSpectraDataY();if(i[0]>i[1]&&t<n){var d=[n,t];t=d[0],n=d[1]}else if(t>n){var u=[n,t];t=u[0],n=u[1]}l=a.default.getEquallySpacedData(i,l,{from:t,to:n,numberOfPoints:o});var p=(n-t)/(l.length-1);i=Array(l.length).fill(t);for(var c=0;c<l.length;c++)i[c]+=p*c;this.sd.spectra[r].data[0].x=i,this.sd.spectra[r].data[0].y=l,this.setFirstX(i[0]),this.setLastX(i[i.length-1]),this.sd.spectra[r].nbPoints=l.length}else{var m=this.getPointsInWindow(t,n,{outputX:!0});this.sd.spectra[r].data[0]=m,this.setFirstX(m.x[0]),this.setLastX(m.x[m.x.length-1]),this.sd.spectra[r].nbPoints=m.y.length}return this.setActiveElement(s),this}getPointsInWindow(e,t,i={}){if(!this.isDataClassXY())throw Error("getPointsInWindow can only apply on equidistant data");var n=i.outputX,o=this.unitsToArrayPoint(e),s=this.unitsToArrayPoint(t);if(o>s){var a=[s,o];o=a[0],s=a[1]}if(0<=o&&s<=this.getNbPoints()-2){var r=this.getSpectraDataY().slice(o,s+1);if(n!==void 0&&n){var l=this.getSpectraDataX().slice(o,s+1);r={x:l,y:r}}return r}throw Error("values outside this in range")}is2D(){return"undefined"!=typeof this.sd.twoD&&this.sd.twoD}setTotalIntegral(e){this.totalIntegralValue=e}get totalIntegral(){if(this.totalIntegralValue)return this.totalIntegralValue;if(this.molecule){if(this.getNucleus(0).indexOf("H"))return 1*this.mf.replace(/.*H([0-9]+).*/,"$1");if(this.getNucleus(0).indexOf("C"))return 1*this.mf.replace(/.*C([0-9]+).*/,"$1")}else return 100;return 1}setMolfile(e){this.molfile=e}setMF(e){this.mf=e}createPeaks(e={}){return this.peaks=(0,w.default)(this,e),this.peaks}getPeaks(e){var t;return t=this.peaks?this.peaks:(0,w.default)(this,e),t}toJcamp(e={}){var t=new _.default;return t.convert(this,Object.assign({},{yFactor:1,encode:"DIFDUP",type:"SIMPLE"},e))}}n.default=v},{"./jcampEncoder/JcampCreator":154,"./peakPicking/peakPicking":160,jcampconverter:16,"ml-array-max":43,"ml-array-median":44,"ml-array-min":45,"ml-array-rescale":46,"ml-array-utils":49}],146:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./fourierTransform");Object.defineProperty(i,"fourierTransform",{enumerable:!0,get:function(){return n(o).default}});var s=e("./zeroFilling");Object.defineProperty(i,"zeroFilling",{enumerable:!0,get:function(){return n(s).default}});var a=e("./phaseCorrection");Object.defineProperty(i,"phaseCorrection",{enumerable:!0,get:function(){return n(a).default}});var r=e("./digitalFilter");Object.defineProperty(i,"digitalFilter",{enumerable:!0,get:function(){return n(r).default}});var l=e("./absoluteValue");Object.defineProperty(i,"absoluteValue",{enumerable:!0,get:function(){return n(l).default}})},{"./absoluteValue":147,"./digitalFilter":148,"./fourierTransform":149,"./phaseCorrection":150,"./zeroFilling":152}],147:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){if(e.is2D())throw TypeError("The data should be one dimensional");if("ppm"!==e.getXUnits(0).toLowerCase())throw TypeError("NMR data should be in ppm");if("ppm"!==e.getXUnits(1).toLowerCase())throw TypeError("The data has no imaginary part");var t=e.getYData(0),i=e.getYData(1),o=JSON.parse(JSON.stringify(e.sd));return o.spectra.splice(1),o.spectra[0].data[0].y=t.map((e,t)=>{var n=f(i[t],2);return _(n+e*e)}),new n.NMR(o)};var n=e("../index")},{"../index":153}],148:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=e.activeElement,n=0;t.nbPoints?n=t.nbPoints:t.brukerFilter&&(n=0);var s=e.getNbSubSpectra();if(0!==n)for(var a=0;a<s;a++)e.setActiveElement(a),(0,o.default)(e.getYData(),n),t.rotateX&&((0,o.default)(e.getXData(),n),e.setFirstX(e.getX(0)),e.setLastX(e.getX(e.getNbPoints()-1)));return e.setActiveElement(i),e};var n=e("./rotate"),o=function(e){return e&&e.__esModule?e:{default:e}}(n)},{"./rotate":151}],149:[function(e,t,i){"use strict";function n(e,t){var n=e.getParamDouble("$BF1",NaN),o=e.getParamDouble("$SFO1",NaN),s=e.getParamDouble("$SW",NaN),a=1e6*((o-n)/n),r=0.5*s*o/n;e.setDataType(t),e.setFirstX(a+r),e.setLastX(a-r),e.setXUnits("PPM");var l=e.getXData(),d=a+r;r=-2*r/(l.length-1);for(var u=0;u<l.length;u++)l[u]=d,d+=r}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=e.getNbPoints(),i=e.getNbSubSpectra()/2,o="NMR SPECTRUM",a=s.default.FFT;1<i&&(o="nD NMR SPECTRUM"),a.init(t);for(var r=e.getParamDouble("$FCOR",0),l=0;l<i;l++){var d=e.getYData(2*l),u=e.getYData(2*l+1);d[0]*=r,u[0]*=r,a.fft(d,u),d=d.concat(d.slice(0,(t+1)/2)),d.splice(0,(t+1)/2),u=u.concat(u.slice(0,(t+1)/2)),u.splice(0,(t+1)/2),e.setActiveElement(2*l),n(e,o),e.setActiveElement(2*l+1),n(e,o)}if(e.is2D())throw new Error("FT of 2D is not implemented");return e.setActiveElement(0),e};var o=e("ml-fft"),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},{"ml-fft":59}],150:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,n){var s=Number.isFinite;t=s(t)?t:0,n=s(n)?n:0;for(var a=e.getNbPoints(),r=e.getYData(0),l=e.getYData(1),d=n/a,u=2*f(o(d/2),2),p=o(d),c=Math.cos(t),m=o(t),h=0,i,g,y,x,b;h<a;h++)b=a-h-1,b=h,y=r[b]*c-l[b]*m,x=r[b]*m+l[b]*c,r[b]=y,l[b]=x,i=c-(u*c+p*m),g=m-(u*m-p*c),c=i,m=g;return e.resetMinMax(),e.putParam("PHC0",t),e.putParam("PHC1",n),e}},{}],151:[function(e,t,i){"use strict";function n(e,t){return 0>e&&(e+=t),e>=t&&(e-=t),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=e.length;if(t%=i,S(t)>i/2&&(t=0<t?t-i:t+i),0!==t)for(var o=0,s=t,a=i,r=e[o],l=t,d=0<t?1:-1,u;0<a;)s=n(s,i),u=e[s],e[s]=r,s+=t,r=u,a--,s===l&&(s=n(s+d,i),l=s,o=n(s-t,i),r=e[o])}},{}],152:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=e.getNbSubSpectra(),n,o,s,a,r,l;if(0!==t)for(var d=0;d<i;d++){for(e.setActiveElement(d),n=e.getNbPoints(),l=e.getYData(),r=e.getXData(),o=e.getLastX(),s=(o-r[0])/(n-1),a=n;a<t;a++)l.push(0),r.push(o+s);t<n&&(l.splice(t,l.length-1),r.splice(t,r.length-1)),e.setFirstX(r[0]),e.setLastX(r[r.length-1])}return e.setActiveElement(0),e}},{}],153:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./SD");Object.defineProperty(i,"SD",{enumerable:!0,get:function(){return n(o).default}});var s=e("./NMR");Object.defineProperty(i,"NMR",{enumerable:!0,get:function(){return n(s).default}});var a=e("./NMR2D");Object.defineProperty(i,"NMR2D",{enumerable:!0,get:function(){return n(a).default}});var r=e("spectra-data-ranges");Object.defineProperty(i,"Ranges",{enumerable:!0,get:function(){return r.Ranges}}),Object.defineProperty(i,"getACS",{enumerable:!0,get:function(){return r.getACS}})},{"./NMR":143,"./NMR2D":144,"./SD":145,"spectra-data-ranges":140}],154:[function(e,i,n){"use strict";function o(e,n,o,s,a){var d="",u=e.getSpectraVariable(0),c=e.getSpectraVariable(1),m=e.getSpectraVariable(2);d+=`##DATA CLASS= NTUPLES${l}`,d+=`##NUM DIM= 2${l}`;var h=e.getDataType().trim(),g={},f;for(f=0;f<e.getNbSubSpectra();f++)e.setActiveElement(f),g[e.getXUnits()]?g[e.getXUnits()].value++:g[e.getXUnits()]={value:1,index:f};var y=Object.keys(g),x=y[0],b=0;for(f=1;f<y.length;f++)g[y[f]].value>g[x].value&&(x=y[f],b=g[y[f]].index);var _=!1;e.setActiveElement(b);var C=0<=e.getDataType().indexOf("NMR");C&&(d+=`##.OBSERVE FREQUENCY= ${e.getParamDouble("observefrequency",0)}${l}`,d+=`##.OBSERVE NUCLEUS= ^${e.getNucleus()}${l}`,d+=`##$DECIM= ${e.getParamDouble("$DECIM",0)}${l}`,d+=`##$DSPFVS= ${e.getParamDouble("$DSPFVS",0)}${l}`,d+=`##$FCOR= ${p(e.getParamDouble("$FCOR",0))}${l}`,e.containsParam("$SW_h")?d+=`##$SW_h= ${e.getParamDouble("$SW_h",0)}${l}`:e.containsParam("$SW_p")&&(d+=`##$SW_p= ${e.getParamDouble("$SW_p",0)}${l}`),d+=`##$SW= ${e.getParamDouble("$SW",0)}${l}`,d+=`##$TD= ${p(e.getParamDouble("$TD",0))}${l}`,d+=`##$BF1= ${e.getParamDouble("$BF1",0)}${l}`,d+=`##$GRPDLY= ${e.getParamDouble("$GRPDLY",0)}${l}`,d+=`##.DIGITISER RES= ${e.getParamInt(".DIGITISER RES",0)}${l}`,d+=`##.PULSE SEQUENCE= ${e.getParamString(".PULSE SEQUENCE","")}${l}`,d+=`##.SOLVENT NAME= ${e.getSolventName()}${l}`,d+=`##$NUC1= <${e.getNucleus()}>${l}`,d+=e.containsParam("2D_X_FREQUENCY")?`##$SFO1= ${e.getParamDouble("2D_X_FREQUENCY",0)}${l}`:`##$SFO1= ${e.getParamDouble("$SFO1",0)}${l}`,e.containsParam("2D_X_OFFSET")&&(d+=`##$OFFSET= ${e.getParamDouble("2D_X_OFFSET",0)}${l}`),e.is2D()&&(d+=`$$Parameters for 2D NMR Spectrum${l}`,d+=`##$NUC1= <${e.getNucleus(2)}>${l}`,e.containsParam("2D_Y_FREQUENCY")&&(d+=`##$SFO1= ${e.getParamDouble("2D_Y_FREQUENCY",0)}${l}`,d+=`##$SFO2= ${e.getParamDouble("2D_Y_FREQUENCY",0)}${l}`,d+=`##$BF2= ${e.getParamDouble("2D_Y_FREQUENCY",0)}${l}`),e.containsParam("2D_Y_OFFSET")&&(d+=`##$OFFSET= ${e.getParamDouble("2D_Y_OFFSET",0)}${l}`),d+=`$$End of Parameters for 2D NMR Spectrum${l}`)),d+=`##NTUPLES=\t${h}${l}`;var k=1,w=1;if(!e.is2D()&&1<e.getNbSubSpectra()&&C&&(_=!0),_?(d+=`##VAR_NAME=\t${e.getXUnits()},\t${h.substring(4)}/REAL,\t${h.substring(4)}/IMAG${l}`,d+=`##SYMBOL=\tX,\tR,\tI${l}`,d+=`##VAR_TYPE=\tINDEPENDENT,\tDEPENDENT,\tDEPENDENT${l}`,d+="CSV"!==s||"PAC"!==s?`##VAR_FORM=\tAFFN,\tASDF,\tASDF${l}`:`##VAR_FORM=\tAFFN,\tAFFN,\tAFFN${l}`,d+=`##VAR_DIM=\t${e.getNbPoints()},\t${e.getNbPoints()},\t${e.getNbPoints()}${l}`,d+=`##UNITS=\tHZ,\t${e.getYUnits()},\t${m.units}${l}`,d+=`##FACTOR=\t${1/o},\t${1/n},\t${1/n}${l}`,"PPM"===e.getXUnits()&&(k=e.observeFrequencyX()),d+=`##FIRST=\t${e.getFirstX()*k},\t${e.getY(0)},\t0${l}`,d+=`##LAST=\t${e.getLastX()*k},\t${e.getLastY()},\t0${l}`):(k=1,e.is2D()?(d+=`##VAR_NAME=\tFREQUENCY1,\tFREQUENCY2,\tSPECTRUM${l}`,d+=`##SYMBOL=\tF1,\tF2,\tY${l}`,d+=`##.NUCLEUS=\t${e.getNucleus(2)},\t${e.getNucleus(1)}${l}`,d+=`##VAR_TYPE=\tINDEPENDENT,\tINDEPENDENT,\tDEPENDENT${l}`,d+="CSV"!==s||"PAC"!==s?`##VAR_FORM=\tAFFN,\tAFFN,\tASDF${l}`:`##VAR_FORM=\tAFFN,\tAFFN,\tASDF${l}`,d+=`##VAR_DIM=\t${e.getNbSubSpectra()},\t${e.getNbPoints()},\t${e.getNbPoints()}${l}`,d+=`##UNITS=\tHZ,\tHZ,\t${e.getZUnits()}${l}`,"PPM"===e.getXUnits()&&(k=e.getParamDouble("2D_Y_FREQUENCY",1)),"PPM"===e.getYUnits()&&(w=e.getParamDouble("2D_X_FREQUENCY",1)),d+=`##FACTOR=\t1,\t${w/o},\t${1/n}${l}`,d+=`##FIRST=\t${e.getParamDouble("firstY",0)*k},\t${e.getFirstX()*w},\t${e.getY(0)}${l}`,d+=`##LAST=\t${e.getParamDouble("lastY",0)*k},\t${e.getLastX()*w},\t${e.getY(e.getNbPoints()-1)}${l}`):(d+=`##VAR_NAME=\t${u.varname},\t${c.varname},\t${u.varname}${l}`,d+=`##SYMBOL=\t${u.symbol},\t${c.symbol},\t${m.symbol}${l}`,d+=`##VAR_TYPE=\t${u.vartype},\t${c.vartype},\t${m.vartype}${l}`,d+="CSV"!==s||"PAC"!==s?`##VAR_FORM=\tAFFN,\tASDF,\tASDF${l}`:`##VAR_FORM=\tAFFN,\tAFFN,\tAFFN${l}`,d+=`##VAR_DIM=\t${u.vardim},\t${c.vardim},\t${m.vardim}${l}`,d+=`##UNITS=\tHZ,\t${e.getYUnits()},\t${m.units}${l}`,"PPM"===e.getXUnits()&&(k=e.observeFrequencyX()),d+=`##FACTOR=\t${1/o},\t${1/n}${l}`,d+=`##FIRST=\t${u.first*k},\t${c.first},\t${m.first}${l}`,d+=`##LAST=\t${u.last*k},\t${c.last},\t${m.last}${l}`)),null!==a)for(var j=a.length-1;0<=j;j--)e.containsParam(a[j])&&(d+=`##${a[j]}= ${e.getParam(a[j],"")}${l}`);var i=0,v=0,S=1;for(e.is2D()&&C&&(i=e.getParamDouble("firstY",0)*k,v=e.getParamDouble("lastY",0)*k,S=(v-i)/(e.getNbSubSpectra()-1)),f=0;f<e.getNbSubSpectra();f++)if(e.setActiveElement(f),i=e.getParamDouble("firstY",0)*k+S*f,d+=`##PAGE= ${i}${l}`,e.is2D()&&C&&(d+=`##FIRST=\t${e.getParamDouble("firstY",0)*k},\t${e.getFirstX()*w},\t${e.getY(0)}${l}`),d+="##DATA TABLE= ",e.isDataClassPeak()){d+=`(XY..XY), PEAKS${l}`;for(var E=0;E<e.getNbPoints();E++)d+=`${e.getX(E)}, ${e.getY(E)}${l}`}else if(e.isDataClassXY()){d+=C?e.is2D()?`(F2++(Y..Y)), PROFILE${l}`:0==f%2?`(X++(R..R)), XYDATA${l}`:`(X++(I..I)), XYDATA${l}`:`(X++(Y..Y)), XYDATA${l}`;for(var D="",H=Array(e.getNbPoints()),P=H.length-1;0<=P;P--)H[P]=t(e.getY(P)*n);D+=r.default.encode(H,e.getFirstX()*o,e.getDeltaX()*o,s),d+=D+l}return d+=`##END NTUPLES= ${h}${l}`,d+="##END= ",e.setActiveElement(0),d}function s(e,n,o,s,a){var d="";if(e.isDataClassPeak()&&(d+=`##DATA CLASS= PEAK TABLE${l}`),e.isDataClassXY()&&(d+=`##DATA CLASS= XYDATA${l}`),e.setActiveElement(0),0<=e.getDataType().indexOf("NMR")&&(d+=`##.OBSERVE FREQUENCY= ${e.getParamDouble("observefrequency",0)}${l}`,d+=`##.OBSERVE NUCLEUS= ^${e.getNucleus()}${l}`,d+=`##$DECIM= ${t(e.getParamDouble("$DECIM",0))}${l}`,d+=`##$DSPFVS= ${t(e.getParamDouble("$DSPFVS",0))}${l}`,d+=`##$FCOR= ${t(e.getParamDouble("$FCOR",0))}${l}`,d+=`##$SW_h= ${e.getParamDouble("$SW_h",0)}${l}`,d+=`##$SW= ${e.getParamDouble("$SW",0)}${l}`,d+=`##$TD= ${t(e.getParamDouble("$TD",0))}${l}`,d+=`##$GRPDLY= ${e.getParamDouble("$GRPDLY",0)}${l}`,d+=`##$BF1= ${e.getParamDouble("$BF1",0)}${l}`,d+=`##$SFO1= ${e.getParamDouble("$SFO1",0)}${l}`,d+=`##$NUC1= <${e.getNucleus()}>${l}`,d+=`##.SOLVENT NAME= ${e.getSolventName()}${l}`),d+=`##XUNITS=\t${e.getXUnits()}${l}`,d+=`##YUNITS=\t${e.getYUnits()}${l}`,d+=`##NPOINTS=\t${e.getNbPoints()}${l}`,d+=`##FIRSTX=\t${e.getFirstX()}${l}`,d+=`##LASTX=\t${e.getLastX()}${l}`,d+=`##FIRSTY=\t${e.getFirstY()}${l}`,d+=`##LASTY=\t${e.getLastY()}${l}`,e.isDataClassPeak()?(d+=`##XFACTOR=1${l}`,d+=`##YFACTOR=1${l}`):e.isDataClassXY()&&(d+=`##XFACTOR= ${1/o}${l}`,d+=`##YFACTOR= ${1/n}${l}`),d+=`##MAXY= ${e.getMaxY()}${l}`,d+=`##MINY= ${e.getMinY()}${l}`,null!==a)for(var u=a.length-1;0<=u;u--)e.containsParam(a[u])&&(d+=`##${a[u]}= ${e.getParam(a[u],"")}${l}`);if(e.isDataClassPeak()){d+=`##PEAK TABLE= (XY..XY)${l}`;for(var i=0;i<e.getNbPoints();i++)d+=`${e.getX(i)}, ${e.getY(i)}${l}`;d+="##END "}else if(e.isDataClassXY()){d+=`##DELTAX= ${e.getDeltaX()}${l}`,d+=`##XYDATA=(X++(Y..Y))${l}`;for(var p="",c=Array(e.getNbPoints()),m=c.length-1;0<=m;m--)c[m]=t(e.getY(m)*n);p+=r.default.encode(c,e.getFirstX()*o,e.getDeltaX()*o,s),d+=p+l,d+="##END= "}return e.setActiveElement(0),d}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./VectorEncoder"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),l="\r\n",d=`Cheminfo tools ${e("../../package.json").version}`,u={encode:"DIFDUP",yFactor:1,type:"SIMPLE",keep:[]};n.default=class{convert(e,t){t=Object.assign({},u,t);var i=t.encode.toUpperCase().trim(),n=t.yFactor||1,a=2147483648,r=t.type,p=t.keep;(null===r||0===r.length)&&(r="SIMPLE");var c="";e.setActiveElement(0);var m=n/e.getParamDouble("YFACTOR",1),h={};h=e.is2D()?{min:e.getMinZ(),max:e.getMaxZ()}:e.getMinMaxY(),h.max*m>=a&&(m=a/h.max);var g=S(1/e.getDeltaX());return c+=`##TITLE= ${e.getTitle()}${l}`,c+=`##JCAMP-DX= 5.00\t$$${d}${l}`,c+=`##OWNER= ${e.getParamString("##OWNER=","")}${l}`,c+=`##DATA TYPE= ${e.getDataType()}${l}`,"NTUPLES"===r&&(c+=o(e,m,g,i,p)),"SIMPLE"===r&&(c+=s(e,m,g,i,p)),c}}},{"../../package.json":163,"./VectorEncoder":155}],155:[function(t,i){"use strict";function n(e,t,i){return o(e,t,i,",")}function o(t,n,o,s){s||(s=" ");for(var a="",r=0,l=t.length,d;r<l-7;){for(a+=e(n+r*o),d=0;8>d;d++)a+=s+t[r++];a+=c}if(r<l)for(a+=e(n+r*o),d=r;d<l;d++)a+=s+t[d];return a}function s(t,n,o){for(var s="",a=0,r=t.length,l;a<r-7;){for(s+=e(n+a*o),l=0;8>l;l++)s+=0>t[a]?`-${t[a++]}`:`+${t[a++]}`;s+=c}if(a<r)for(s+=e(n+a*o),l=a;l<r;l++)s+=0>t[l]?`-${t[l]}`:`+${t[l]}`;return s}function a(t,n,o){for(var s="",a=0,r=t.length,l;a<r-10;){for(s+=e(n+a*o),l=0;10>l;l++)s+=d(t[a++].toString());s+=c}if(a<r)for(s+=e(n+a*o),l=a;l<r;l++)s+=d(t[l].toString());return s}function r(t,n,o){var s=0,a=0,r=0,l="",m="",h="",g=Array(t.length-1),f;for(f=0;f<g.length;f++)g[f]=t[f+1]-t[f];for(var i=g.length;a<i;)0==r?(m=e(n+a*o)+d(t[a].toString())+u(g[a].toString()),l+=m,r+=m.length):g[a-1]===g[a]?s++:0<s?(s++,m=p(s.toString()),l+=m,r+=m.length,s=0,a--):(m=u(g[a].toString()),m.length+r<b?(l+=m,r+=m.length):(l+=c,h=e(n+a*o)+d(t[a].toString())+m,l+=h,r=h.length)),a++;return 0<s&&(l+=p((s+1).toString())),l+=c+e(n+a*o)+d(t[a].toString()),l}function l(t,n,o){var s=0,a=0,r="",l="",p="",m=Array(t.length-1),h;for(h=0;h<m.length;h++)m[h]=t[h+1]-t[h];for(var i=m.length;s<i;)0==a?(l=e(n+s*o)+d(t[s].toString())+u(m[s].toString()),r+=l,a+=l.length):(l=u(m[s].toString()),l.length+a<b?(r+=l,a+=l.length):(r+=c,p=e(n+s*o)+d(t[s].toString())+l,r+=p,a=p.length)),s++;return r+=c+e(n+s*o)+d(t[s].toString()),r}function d(e){var t="";return"-"===e.charAt(0)?(t+=m[g][e.charAt(1)],2<e.length&&(t+=e.substring(2))):(t+=m[h][e.charAt(0)],1<e.length&&(t+=e.substring(1))),t}function u(e){var t="";return"-"===e.charAt(0)?(t+=m[y][e.charAt(1)],2<e.length&&(t+=e.substring(2))):(t+=m[f][e.charAt(0)],1<e.length&&(t+=e.substring(1))),t}function p(e){var t="";return t+=m[x][e.charAt(0)],1<e.length&&(t+=e.substring(1)),t}var c="\r\n",m=[["0","1","2","3","4","5","6","7","8","9"],["@","A","B","C","D","E","F","G","H","I"],["@","a","b","c","d","e","f","g","h","i"],["%","J","K","L","M","N","O","P","Q","R"],["%","j","k","l","m","n","o","p","q","r"],[" ","S","T","U","V","W","X","Y","Z","s"]],h=1,g=2,f=3,y=4,x=5,b=100;i.exports={encode:function(e,t,i,d){return"FIX"===d?o(e,t,i):"SQZ"===d?a(e,t,i):"DIF"===d?l(e,t,i):"DIFDUP"===d?r(e,t,i):"CSV"===d?n(e,t,i):"PAC"===d?s(e,t,i):l(e,t,i)},fixEncoding:o,commaSeparatedValuesEncoding:n,packedEncoding:s,squeezedEncoding:a,differenceDuplicateEncoding:r,differenceEncoding:l}},{}],156:[function(e,t,i){"use strict";function n(e,t,n){for(var o=t.length,i,s,a;o--;)for(i=e.length;i--;)e[i].asymmetric||(s=n.error+e[i].width,a=S(t[o].shift-e[i].x),a<s&&e.splice(i,1))}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t={}){var i=t.solvent,o=i===void 0?"":i,r=t.error,l=r===void 0?0.025:r;o=o.toLowerCase(),"(cd3)2so"===o&&(o="dmso"),"meod"===o&&(o="cd3od");var d=s.default[o];if(d)for(var u of a){var p=d[u.toLowerCase()];n(e,p,{error:l})}return e};var o=e("./impurities"),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=["solvent_residual_peak","H2O","TMS"]},{"./impurities":157}],157:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={cdcl3:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"ds",shift:7.26}],h2o:[{proton:"H2O",coupling:0,multiplicity:"bs",shift:1.56}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.1}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.17}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.1}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.36}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.28}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.19},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.22}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.98},{proton:"OHc",coupling:0,multiplicity:"s",shift:5.01},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.27},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.43}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.26}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.43}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.73}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.3}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.21},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.48}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.65},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.57},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.39}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.4},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.55}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.09},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3.02},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.94}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:8.02},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.96},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.88}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.62}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.71}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.25},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.72},{proton:"OH",coupling:5,multiplicity:"s,t",shift:1.32}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.05},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.12},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.26}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.14},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.46},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.06}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.76}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.26}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.26}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.65}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.49},{proton:"OH",coupling:0,multiplicity:"s",shift:1.09}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.33}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:7},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.27}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.22},{proton:"CH",coupling:6,multiplicity:"sep",shift:4.04}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.62},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.29},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.68}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.07}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.85},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.76}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.36},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.17},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.25}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.03},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.53}]},"(cd3)2co":{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:2.05}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:2.84}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.96}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.09}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.05}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.36}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.18}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.13},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.13}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.96},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.22},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.41}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:8.02}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.43}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.87}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.63}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.11},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.41}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.56},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.47},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.28}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.28},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.46}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.83}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.96},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.94},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.78}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.52}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.59}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.12},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.57},{proton:"OH",coupling:5,multiplicity:"s,t",shift:3.39}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.05},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.2}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.45},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.96}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.28}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.87},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.29}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.28}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.59}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.31},{proton:"OH",coupling:0,multiplicity:"s",shift:3.12}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.43}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.27}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.1},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.9}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.58},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.35},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.76}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.13}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.79},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.63}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.32},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.5},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.5}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.45}]},dmso:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"quint",shift:2.5}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:3.33}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.91}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.09}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.07}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.37}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.11},{proton:"OHc",coupling:0,multiplicity:"s",shift:4.19}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.11},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.08}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.87},{proton:"OHc",coupling:0,multiplicity:"s",shift:6.65},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.18},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.36}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:8.32}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.4}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.9}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.76}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.09},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.38}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.51},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.38},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.24}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.24},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.43}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.96},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.94},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.78}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.95},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.89},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.73}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.54}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.57}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.06},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.44},{proton:"OH",coupling:5,multiplicity:"s,t",shift:4.63}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.99},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.03},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.17}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.43},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.91}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.34}],"grease^f":[],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.25}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.53}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.16},{proton:"OH",coupling:0,multiplicity:"s",shift:4.01}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.42}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.27}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.04},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.78}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.58},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.39},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.79}],silicone_greasei:[],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.76},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.6}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.3},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.18},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.25}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.93},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.43}]},c6d6:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:7.16}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:0.4}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.55}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.55}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.55}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.15}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.05},{proton:"OHc",coupling:0,multiplicity:"s",shift:1.55}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.07},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.04}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:7.05},{proton:"OHc",coupling:0,multiplicity:"s",shift:4.79},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.24},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.38}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:6.15}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.4}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:2.9}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:4.27}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.11},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.26}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.46},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.34},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.11}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.12},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.33}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.6},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.57},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.05}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.63},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.36},{proton:"CH3",coupling:0,multiplicity:"s",shift:1.86}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.68}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.35}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.34}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.65},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:3.89},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.92}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.58},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:1.81},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.85}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.41}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.92},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.36}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.89},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.24}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.4}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.07}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.94}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.23}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:0.95},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.67}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.53},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:6.66},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:6.98}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.29}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.4},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.57}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.11},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.02},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.13}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.4}]},cd3cn:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:1.94}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:2.13}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.96}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.08}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.96}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.37}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.16},{proton:"OHc",coupling:0,multiplicity:"s",shift:2.18}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.14},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.13}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.97},{proton:"OHc",coupling:0,multiplicity:"s",shift:5.2},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.22},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.39}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.58}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.44}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.81}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.44}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.12},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.42}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.53},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.45},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.29}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.28},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.45}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.96},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.83}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.92},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.89},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.77}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.5}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.6}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.12},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.54},{proton:"OH",coupling:5,multiplicity:"s,t",shift:2.47}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.06},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.2}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.06},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.43},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.96}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.51}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.27}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.89},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.28}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.57}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.28},{proton:"OH",coupling:0,multiplicity:"s",shift:2.16}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.31}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.87},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.29}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.09},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.87}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.57},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.33},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.73}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.08}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.8},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.64}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.33},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.2},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.2}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.45}]},cd3od:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:3.31}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:4.87}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.99}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.15}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.03}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.33}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.4}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.15},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.2}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.92},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.21},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.4}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.9}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.45}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.78}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.49}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.18},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.49}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.61},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.58},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.35}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.35},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.52}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3.31},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.92}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.97},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.99},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.86}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.65}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.66}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.19},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.6}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.01},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.09},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.24}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.12},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.5},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.01}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.59}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.29}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.9},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.29}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.64}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.34}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.34}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.89},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.29}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.5},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.92}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.53},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.44},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.85}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.1}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.87},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.71}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.32},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.16},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.16}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.05},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.58}]},d2o:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:4.79}],h2o:[],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.08}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.22}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.06}],benzene:[],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.24}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.21},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.22}],bhtb:[],chloroform:[],cyclohexane:[],"1,2-dichloroethane":[],dichloromethane:[],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.17},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.56}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.67},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.61},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.37}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.37},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.6}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.08},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3.06},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.9}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.92},{proton:"CH3",coupling:0,multiplicity:"s",shift:3.01},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.85}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.71}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.75}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.17},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.65}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.14},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.24}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.19},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:3.18},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.26}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.65}],"grease^f":[],"n-hexane":[],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.61}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.34}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.4}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.9}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.17},{proton:"CH",coupling:6,multiplicity:"sep",shift:4.02}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.52},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.45},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.87}],silicone_greasei:[],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.88},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.74}],toluene:[],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.99},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.57}]}}},{}],158:[function(i,n,o){"use strict";function s(e,t){var i=e.peaksComp,n=i.length;e.startX=i[0].x/e.observe-i[0].width,e.stopX=i[n-1].x/e.observe+i[n-1].width,e.integralData.from=i[0].x/e.observe-3*i[0].width,e.integralData.to=i[n-1].x/e.observe+3*i[n-1].width,e.maskPattern=e.mask2,e.multiplicity=a(e,t),e.pattern=e.multiplicity}function a(e,t){var n="",o=1,s=[],a;if(t&&0<t.length){for(t.sort(function(e,t){return t-e}),a=0;a<t.length-1;a++)S(t[a]-t[a+1])<0.05?o++:(s.push({coupling:S(t[a]),multiplicity:x[o]}),n+=x[o],o=1);s.push({coupling:S(t[a]),multiplicity:x[o]}),n+=x[o],e.nmrJs=s}else n="s",16<S(e.startX-e.stopX)*e.observe&&(n="br s");return n}function r(e){var t=f(2,e.length),n=[{x:0,intensity:t}],o,i;for(o=0;o<e.length;o++)for(i=n.length-1;0<=i;i--)n.push({x:n[i].x+e[o]/2,intensity:n[i].intensity/2}),n[i].x-=e[o]/2,n[i].intensity/=2;for(n.sort(function(e,t){return e.x-t.x}),i=n.length-2;0<=i;i--)0.1>S(n[i].x-n[i+1].x)&&(n[i].intensity+=n[i+1].intensity,n.splice(i+1,1));return n}function l(t,n){for(var o=e(0.5*t.values.length),s=t.values.length,a=0,r,i;a!==n;){for(i=!1;!i;)if(i=!0,t.currentIndex[t.active]++,t.currentIndex[t.active]>=t.values[t.active].length){if(t.active+1===o)return null;t.currentIndex[t.active]=0,i=!1,t.active++}else t.active=0;for(a=0,r=0;r<o;r++)a+=2*t.values[r][t.currentIndex[r]];0!=t.values.length%2&&(a-=t.values[o-1][t.currentIndex[o-1]])}if(a===n){var l=Array(s);for(r=0;r<o;r++)l[r]=t.values[r][t.currentIndex[r]],l[s-r-1]=t.values[r][t.currentIndex[r]];return l}return null}function d(e){var n=Array(e.length),o=Array(e.length),s,a;n[0]=[1],n[e.length-1]=[1],o[0]=-1,o[e.length-1]=0;for(var r=1;r<e.length-1;r++){s=t(0.85*e[r].intensity),a=t(1.15*e[r].intensity),n[r]=[];for(var i=s;i<=a;i++)n[r].push(i);o[r]=0}return{values:n,currentIndex:o,active:0}}function p(e,t,i){var n=c(e,t,i),o=e.peaksComp,s=e.mask,a=e.delta1;e.delta1=(e.peaks[0].x+e.peaks[e.peaks.length-1].x)/2;var r=c(e,t,i);return e.peaksComp.length>o.length?r:(e.delta1=a,e.peaksComp=o,e.mask=s,n)}function c(t,n,o){var s=Array(t.peaks.length),a,r,l,d,p,h;for(h=0;h<s.length;h++)s[h]={x:t.peaks[h].x*t.observe,intensity:t.peaks[h].intensity,width:t.peaks[h].width};for(h=s.length-2;0<=h;h--)0.25>S(s[h].x-s[h+1].x)&&(s[h].x=s[h].x*s[h].intensity+s[h+1].x*s[h+1].intensity,s[h].intensity+=s[h+1].intensity,s[h].x/=s[h].intensity,s[h].intensity/=2,s[h].width+=s[h+1].width,s.splice(h+1,1));t.peaksComp=s;var i=s.length,f=Array(i);t.mask=f;var y=0,x=s.length-1,k=t.delta1*t.observe,w=[(s[0].x+s[i-1].x)/2,1];n=m(S(k-w[0]));var j=0;for(h=0;h<i;h++)f[h]=!0,j+=t.peaks[h].intensity;for(;y<=x;){if(f[y]=!0,f[x]=!0,y==x)2<i&&S(s[y].x-k)>n&&(f[y]=!1);else if(a=u(s[y].intensity,s[x].intensity),r=C(s[y].intensity,s[x].intensity),d=a/r,d>b)s[y].intensity===r?(f[y]=!1,x++):(f[x]=!1,y--);else{var v=S(s[y].x-k),E=S(s[x].x-k);S(v-E)<n?(l=C(s[y].intensity,s[x].intensity),p=C(s[y].width,s[x].width),s[y].intensity=s[x].intensity=l,s[y].width=s[x].width=p,w=[w[0]+(s[x].x+s[y].x)/2,w[1]+1]):u(v,E)===E?(f[x]=!1,y--):(f[y]=!1,x++)}if(y++,x--,1===o&&(k=g(s,f),isNaN(k)))return 0;n=m(S(k-w[0]/w[1]))}for(h=i-1;0<=h;h--)!1===f[h]&&s.splice(h,1);if(k=g(s),isNaN(k))return 0;t.delta1=k/t.observe;var D=0,H=0;if(1<s.length){for(h=e(s.length/2)-1;0<=h;h--)D+=(3+C(S(s[h].x-k),S(s[s.length-1-h].x-k)))/(3+u(S(s[h].x-k),S(s[s.length-1-h].x-k)))*s[h].intensity,H+=s[h].intensity;D/=H}else 1===s.length&&(D=1);var P=0;for(h=0;h<s.length;h++)P+=s[h].intensity;if(D-=0.12*((j-P)/j),0.8<D&&0.97>D&&2>o)return c(t,_,2);if(1<s.length){var I;for(h=e(s.length/2)-1;0<=h;h--)I=(s[h].x-s[s.length-1-h].x)/2,s[h].x=k+I,s[s.length-1-h].x=k-I}return D}function m(e){var t=2.5*e;return 0.75>t&&(t=0.75),3<t&&(t=3),t}function h(e,t){for(var n=JSON.parse(JSON.stringify(e.peaksComp)),o=0,s=0,a=0;a<n.length;a++)o+=n[a].intensity;o=f(2,t)/o,e.mask2=JSON.parse(JSON.stringify(e.mask));var i=e.mask2.length-1;for(a=n.length-1;0<=a;a--){for(n[a].intensity*=o;0<=i&&!1===e.mask2[i];)i--;0.75>n[a].intensity?(n.splice(a,1),e.mask2[i]=!1):s+=n[a].intensity,i--}for(s=f(2,t)/s,a=n.length-1;0<=a;a--)n[a].intensity*=s;return n}function g(e,t){var n=0,o=0,s,i;if(t)for(s=0;s<e.length;s++)!0===t[s]&&(i=y(e[s]),n+=i,o+=i*e[s].x);else for(s=0;s<e.length;s++)i=y(e[s]),n+=i,o+=i*e[s].x;return o/n}function y(e){return S(1.57*(e.intensity*e.width))}Object.defineProperty(o,"__esModule",{value:!0});var x=["s","d","t","q","quint","h","sept","o","n"],b=1.5,_=1;o.default={compilePattern:function(e){if(e.multiplicity="m",e.symRank=p(e,2.5,1),e.asymmetric=!0,0.95<=e.symRank&&32>e.peaksComp.length){e.asymmetric=!1;var t=1,o=[],a,i,c,n,m,g;for(c=0;9>c;c++){var y=h(e,c),x=!1;if(1===y.length&&0===c)x=!0;else if(1>=y.length)continue;var b=d(y);m=f(2,c);for(var _=null,C=1,k;!x&&null!==(_=l(b,m))&&400>C;){for(k=Array(_.length),t=1,a=0;a<_.length;a++)for(k[a]=Array(_[a]),i=0;i<_[a];i++)k[a][i]=t++;o=[],i=1,o.push(y[1].x-y[0].x),n=y[0].x,k[0].splice(0,1),k[1].splice(0,1),t=1;var w=2;for(g=f(2,c)-1;o.length<c&&w<g&&t<y.length;){for(C+=1,i++;t<y.length&&0===k[t].length;)t++;if(t<y.length){o.push(y[t].x-y[0].x),k[t].splice(0,1),w++;for(var j=2,u;j<=i;j++){for(u=0,a=0;a<j;a++)u+=o[a];for(a=1;a<k.length;a++)if(0.25>S(y[a].x-(n+u))){k[a].splice(0,1),w++;break}}}}var v=r(o);for(x=!0,a=0;a<v.length;a++)v[a].intensity!==_[a]&&(x=!1)}x&&s(e,o)}}for(a=0;a<e.peaksComp.length;a++)e.peaksComp[a].x/=e.observe}}},{}],159:[function(e,t,i){"use strict";function n(e,t,i,n){var o=s(e,t,i,-n[0],!0),a=0,r=null,l=null;0>o&&(r={nucleusX:i.nucleusX,nucleusY:i.nucleusY},r.resolutionX=i.resolutionX,r.resolutionY=i.resolutionY,r.shiftX=i.shiftY,r.shiftY=i.shiftX,r.peaks=[{x:i.shiftY,y:i.shiftX,z:1}],e.push(r),l=[-n[0],n[1]],t.push(l),a++);var u=!1,p=!1,c,m;for(c=e.length-1;0<=c;c--)m=e[c],0===t[c][0]&&(S(m.shiftX-i.shiftX)<d&&(u=!0),S(m.shiftY-i.shiftY)<d&&(p=!0));return!1==u&&(r={nucleusX:i.nucleusX,nucleusY:i.nucleusY},r.resolutionX=i.resolutionX,r.resolutionY=i.resolutionY,r.shiftX=i.shiftX,r.shiftY=i.shiftX,r.peaks=[{x:i.shiftX,y:i.shiftX,z:1}],e.push(r),l=[0,n[1]],t.push(l),a++),!1==p&&(r={nucleusX:i.nucleusX,nucleusY:i.nucleusY},r.resolutionX=i.resolutionX,r.resolutionY=i.resolutionY,r.shiftX=i.shiftY,r.shiftY=i.shiftY,r.peaks=[{x:i.shiftY,y:i.shiftY,z:1}],e.push(r),l=[0,n[1]],t.push(l),a++),a}function o(e,t,n,o){for(var s=0,a=4*n.shiftX,r=[],l=[],u=e.length-1,i;0<=u;u--)i=e[u],0!==t[u][0]&&(S(i.shiftX-n.shiftX)<d?(s++,o&&t[u][1]++,r.push(u),a+=i.shiftX):S(i.shiftY-n.shiftY)<d&&(s++,o&&t[u][1]++,l.push(u),a+=i.shiftY));if(a/=r.length+l.length+4,0<r.length)for(u=r.length-1;0<=u;u--)e[r[u]].shiftX=a;if(0<l.length)for(u=l.length-1;0<=u;u--)e[l[u]].shiftY=a;return n.shiftX=a,n.shiftY=a,s}function s(e,t,n,o,s){for(var a=e.length-1;0<=a;a--)if(t[a][0]===o&&r(n,e[a],s)<u){if(!s){var i=(e[a].shiftX+n.shiftX)/2,l=(e[a].shiftY+n.shiftY)/2;e[a].shiftX=i,e[a].shiftY=l,n.shiftX=i,n.shiftY=l}else{var d=n.shiftX,p=e[a].shiftX;e[a].shiftY=d,n.shiftY=p}return a}return-1}function a(e){for(var t=Array(e.length),n=e.length-1;0<=n;n--)if(t[n]=[0,0],S(e[n].shiftX-e[n].shiftY)<=d){t[n][1]=1;var i=(2*e[n].shiftX+e[n].shiftY)/3;e[n].shiftX=i,e[n].shiftY=i}else t[n][0]=0<e[n].shiftX-e[n].shiftY?1:-1;return t}function r(e,t,i){return i?_(f(e.shiftX-t.shiftY,2)+f(e.shiftY-t.shiftX,2)):_(f(e.shiftX-t.shiftX,2)+f(e.shiftY-t.shiftY,2))}function l(e,t){var n=0,o=0,s,i;for(s=0;s<e.length;s++){var a=e[s];for(i=0;i<t.length;i++)n=(t[i].startX+t[i].stopX)/2,o=S(t[i].startX-t[i].stopX)/2,a.nucleusX===t[i].nucleus&&S(a.shiftX-n)<=o&&a._highlight.push(t[i]._highlight[0]),a.nucleusY===t[i].nucleus&&S(a.shiftY-n)<=o&&a._highlight.push(t[i]._highlight[0])}}Object.defineProperty(i,"__esModule",{value:!0});var d=0.05,u=0.05;i.default={clean:function(e,t){var n=Number.NEGATIVE_INFINITY,o;for(o=e.length-1;0<=o;o--)S(e[o].z)>n&&(n=S(e[o].z));for(n*=t,o=e.length-1;0<=o;o--)S(e[o].z)<n&&e.splice(o,1);return e},enhanceSymmetry:function(e){var t=a(e),r=e,l,i,d,u;for(l=r.length-1;0<=l;l--)u=r[l],1<u.peaks.length&&t[l][1]++,1===t[l][0]&&(d=s(r,t,u,-1,!0),0<=d&&(t[l][1]+=2,t[d][1]+=2));for(l=r.length-1;0<=l;l--)u=r[l],0===t[l][0]&&(i=o(r,t,u,!0),t[l][1]+=i);var p=0;for(l=r.length-1;0<=l;l--)0!==t[l][0]&&2<t[l][1]&&(p++,p+=n(r,t,r[l],t[l])),2<=t[l][1]&&0===t[l][0]&&p++;var c=Array(p);for(p--,l=r.length-1;0<=l;l--)(0!==t[l][0]&&2<t[l][1]||0===t[l][0]&&1<t[l][1])&&(c[p--]=r[l]);return c},alignDimensions:function(e,t){for(var n=0,i;n<t.length;n++)i=t[n],i&&l(e,i)}}},{}],160:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t={}){t=Object.assign({},s,t,{optimize:!1,broadWidth:!1});var i=t,n=i.from,a=i.to,r=i.broadWidth,l=i.optimize,d=i.noiseLevel,u=void 0===d?S(e.getNoiseLevel(t))*t.thresholdFactor:d,p=void 0!==n&&void 0!==a?e.getVector({from:n,to:a,outputX:!0}):e.getSpectrumData(),c=o.default.gsd(p.x,p.y,t);return r&&(c=o.default.post.joinBroadPeaks(c,{width:t.broadWidth})),l&&(c=o.default.post.optimizePeaks(c,p.x,p.y,t)),c.filter((e)=>e.y>=u)};var n=e("ml-gsd"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),s={thresholdFactor:1,minMaxRatio:0.01,broadRatio:2.5e-4,smoothY:!0,widthFactor:4,realTop:!0,functionName:"gaussian",broadWidth:0.25,sgOptions:{windowSize:9,polynomial:3}}},{"ml-gsd":61}],161:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.isHomoNuclear()?1.5:3}function a(e,t,n){var o=t.observeFrequencyX(),a=t.observeFrequencyY(),r=t.getFirstY(),d=t.getDeltaY(),u;for(u=e.length-1;0<=u;u--)e[u].x=t.arrayPointToUnits(e[u].x),e[u].y=r+d*e[u].y,(-1>e[u].y||210<=e[u].y)&&e.splice(u,1);var i=[],p=0;for(n*=n,u=0;u<e.length;u++)for(var c=u;c<e.length;c++)p=f((e[u].x-e[c].x)*o,2)+f((e[u].y-e[c].y)*a,2),p<n?i.push(1):i.push(0);var m=(0,l.default)(i),h=[];if(null!=e)for(var g=0,y;g<m.length;g++){y={nucleusX:t.getNucleus(1),nucleusY:t.getNucleus(2)},y.resolutionX=(t.getLastX()-t.getFirstX())/t.getNbPoints(),y.resolutionY=d;var x=[];y.shiftX=0,y.shiftY=0;for(var b=[s,0],_=[s,0],C=0,k=m[g].length-1;0<=k;k--)1===m[g][k]&&(x.push({x:e[k].x,y:e[k].y,z:e[k].z}),y.shiftX+=e[k].x*e[k].z,y.shiftY+=e[k].y*e[k].z,C+=e[k].z,e[k].x<b[0]&&(b[0]=e[k].x),e[k].x>b[1]&&(b[1]=e[k].x),e[k].y<_[0]&&(_[0]=e[k].y),e[k].y>_[1]&&(_[1]=e[k].y));y.fromTo=[{from:b[0],to:b[1]},{from:_[0],to:_[1]}],y.shiftX/=C,y.shiftY/=C,y.peaks=x,h.push(y)}return h}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){0===t&&(t=1),0>t&&(t=-t);for(var n=e.getNbPoints(),s=e.getNbSubSpectra(),r=Array(n*s),l=e.isHomoNuclear(),d=0,c;d<s;d++){c=e.getYData(d);for(var g=0;g<n;g++)r[d*n+g]=l?0<c[g]?c[g]:0:S(c[g])}var f=o(e);if(l){for(var y=p.FFTUtils.convolute(r,h,s,n),x=u.default.findPeaks2DRegion(r,{filteredData:y,rows:s,cols:n,nStdDev:f*t}),b=u.default.findPeaks2DMax(r,{filteredData:y,rows:s,cols:n,nStdDev:(f+0.5)*t}),_=0;_<x.length;_++)b.push(x[_]);return m.default.enhanceSymmetry(a(b,e,24))}var i=p.FFTUtils.convolute(r,h,s,n),C=u.default.findPeaks2DRegion(r,{filteredData:i,rows:s,cols:n,nStdDev:f*t});return a(m.default.clean(C,0.05),e,24)};var r=e("ml-simple-clustering"),l=n(r),d=e("ml-matrix-peaks-finder"),u=n(d),p=e("ml-fft"),c=e("./peakOptimizer"),m=n(c),h=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]]},{"./peakOptimizer":159,"ml-fft":59,"ml-matrix-peaks-finder":77,"ml-simple-clustering":107}],162:[function(e,i,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n={}){var o=n.nH,s=o===void 0?100:o,r=n.integralType,l=r===void 0?"sum":r,d=n.frequencyCluster,p=d===void 0?16:d,c=n.frequency,m=c===void 0?e.observeFrequencyX():c,h=[],g={x:1e5},f=0,y,i,x,b;for(p/=m,y=0;y<t.length;y++){if(S(t[y].x-g.x)>p)x={nbPeaks:1,units:"PPM",startX:t[y].x-t[y].width,stopX:t[y].x+t[y].width,multiplicity:"",pattern:"",observe:m,nucleus:e.getNucleus(1),integralData:{from:t[y].x-3*t[y].width,to:t[y].x+3*t[y].width},peaks:[{x:t[y].x,intensity:t[y].y,width:t[y].width}]},h.push(x);else{var _=t[y].x+t[y].width;x.stopX=u(x.stopX,_),x.startX=C(x.startX,_),x.nbPeaks++,x.peaks.push({x:t[y].x,intensity:t[y].y,width:t[y].width}),x.integralData.from=C(x.integralData.from,t[y].x-3*t[y].width),x.integralData.to=u(x.integralData.to,t[y].x+3*t[y].width)}g=t[y]}for(y=0;y<h.length;y++){b=h[y].peaks;var k=h[y].integralData,w=0,j=0;for(i=0;i<b.length;i++){var v=a(b[i]);w+=b[i].x*v,j+=v}h[y].delta1=w/j,k.value="sum"===l?e.getArea(k.from,k.to):j,f+=k.value}if(0<s){var E=s/f;for(y=0;y<h.length;y++){var D=h[y].integralData;D.value*=E}}return h}function a(e){return S(1.57*(e.intensity*e.width))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n,o){o=Object.assign({},g,o);var l=o.nH,u,i;n=(0,h.default)(n,o.removeImpurity);var p=s(e,n,o);if(o.clean)for(u=0;u<p.length;u++)p[u].integralData.value<o.clean&&p.splice(u,1);if(o.compile){var m,f;for(u=0;u<p.length;u++)if(c.default.compilePattern(p[u]),p[u].maskPattern&&"m"!==p[u].multiplicity&&""!==p[u].multiplicity){m=0,f=0;var y=[];for(i=p[u].maskPattern.length-1;0<=i;i--)if(f+=a(p[u].peaks[i]),!1===p[u].maskPattern[i]){var x=p[u].peaks.splice(i,1)[0];y.push({x:x.x,y:x.intensity,width:x.width}),p[u].mask.splice(i,1),p[u].mask2.splice(i,1),p[u].maskPattern.splice(i,1),p[u].nbPeaks--,m+=a(x)}if(0<y.length){m=m*p[u].integralData.value/f,p[u].integralData.value-=m;var b=[];for(i=y.length-1;0<=i;i--)b.push(y[i]);o.nH=m;var _=s(e,b,o);for(i=0;i<_.length;i++)p.push(_[i])}}var C=0,k=0;for(u=0;u<p.length;u++)k+=t(p[u].integralData.value);if(k!==l)for(C=l/k,u=0;u<p.length;u++)p[u].integralData.value*=C}if(p.sort(function(e,t){return t.delta1-e.delta1}),o.clean)for(u=p.length-1;0<=u;u--)p[u].integralData.value<o.clean&&p.splice(u,1);var w=Array(p.length);for(u=0;u<p.length;u++){var j=p[u];w[u]={from:(0,d.default)(j.integralData.from,5),to:(0,d.default)(j.integralData.to,5),integral:(0,d.default)(j.integralData.value,5),signal:[{nbAtoms:0,diaID:[],multiplicity:j.multiplicity,kind:"",remark:""}]},o.keepPeaks&&(w[u].signal[0].peak=j.peaks),j.nmrJs&&(w[u].signal[0].j=j.nmrJs),j.asymmetric&&"m"!==j.multiplicity||(w[u].signal[0].delta=(0,d.default)(j.delta1,5))}return new r.Ranges(w)};var r=e("spectra-data-ranges"),l=e("lodash.round"),d=o(l),p=e("./jAnalyzer"),c=o(p),m=e("./ImpurityRemover"),h=o(m),g={nH:100,clean:0.5,thresholdFactor:1,compile:!0,integralType:"sum",optimize:!0,frequencyCluster:16,keepPeaks:!1}},{"./ImpurityRemover":156,"./jAnalyzer":158,"lodash.round":41,"spectra-data-ranges":140}],163:[function(e,t){t.exports={_from:"spectra-data@^3.4.5",_id:"spectra-data@3.4.5",_inBundle:!1,_integrity:"sha512-xDKg4neffK+O/yzcKsfMHlAqpjl7MNvV7+a3F8+/cTd55z1M8z40lwsk7Gi3Ae9Pk02Ah/lmy/V0RliJnWABwA==",_location:"/spectra-data",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"spectra-data@^3.4.5",name:"spectra-data",escapedName:"spectra-data",rawSpec:"^3.4.5",saveSpec:null,fetchSpec:"^3.4.5"},_requiredBy:["/nmr-metadata"],_resolved:"https://registry.npmjs.org/spectra-data/-/spectra-data-3.4.5.tgz",_shasum:"dde5e7c37ec030b3b94f02c5bc6ccd4fa9911f9c",_spec:"spectra-data@^3.4.5",_where:"/usr/local/www/sites/www.lactame.com/node/grm-data/git/cheminfo/eln-plugin/node_modules/nmr-metadata",author:{name:"Andres Castillo"},bugs:{url:"https://github.com/cheminfo-js/spectra/issues"},bundleDependencies:!1,contributors:[{name:"Micha\xEBl Zasso"},{name:"Luc Patiny"}],dependencies:{brukerconverter:"^1.0.1",jcampconverter:"^2.9.2","lodash.round":"^4.0.4","ml-array-max":"^1.0.1","ml-array-median":"^1.0.0","ml-array-min":"^1.0.1","ml-array-rescale":"^1.1.0","ml-array-utils":"^0.4.0","ml-curve-fitting":"^0.0.7","ml-fft":"^1.3.5","ml-gsd":"^2.0.1","ml-matrix-peaks-finder":"^0.2.1","ml-simple-clustering":"^0.1.0","nmr-simulation":"^1.0.17","spectra-data-ranges":"^1.1.5","spectra-nmr-utilities":"^1.0.5"},deprecated:!1,description:"spectra-data project - manipulate spectra",devDependencies:{jsdoc:"^3.5.5","nmr-predictor":"^1.1.11",should:"^13.2.3"},files:["lib","src"],homepage:"https://github.com/cheminfo-js/spectra/packages/spectra-data",jest:{testEnvironment:"node"},keywords:["spectra-data","project"],license:"MIT",main:"./lib/index.js",module:"./src/index.js",name:"spectra-data",repository:{type:"git",url:"git+https://github.com/cheminfo-js/spectra.git"},version:"3.4.5"}},{}],164:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.nmrJ=function(e,t={}){var n="";t=Object.assign({},{separator:", ",nbDecimal:2},t);var o,s;for(s=0;s<e.length;s++)o=e[s],11<o.length&&(o+=t.separator),n+=`${o.multiplicity} ${o.coupling.toFixed(t.nbDecimal)}`;return n},i.joinCoupling=function(e,t=0.05){var o=e.j;if(o&&0<o.length){var s=o[0].assignment?o[0].assignment.length:1,a="",r=[],l=[],d=[];o.sort(function(e,t){return t.coupling-e.coupling}),o[0].diaID&&(l=[o[0].diaID]),o[0].assignment&&(d=o[0].assignment);for(var u=0;u<o.length-1;u++)if(S(o[u].coupling-o[u+1].coupling)<t)s+=o[u+1].assignment?o[u+1].assignment.length:1,l.push(o[u].diaID),d=d.concat(o[u+1].assignment);else{var i={coupling:S(o[u].coupling),multiplicity:n[s]};0<l.length&&(i.diaID=l),0<d.length&&(i.assignment=d),r.push(i),o[0].diaID&&(l=[o[u].diaID]),o[0].assignment&&(d=o[u].assignment),a+=n[s],s=o[u+1].assignment?o[u+1].assignment.length:1}var p={coupling:S(o[u].coupling),multiplicity:n[s]};0<l.length&&(p.diaID=l),0<d.length&&(p.assignment=d),r.push(p),a+=n[s],e.j=r}else a=e.delta?"s":"m";return a},i.group=function(e,o={}){var s,i;for(s=0;s<e.length;s++){var a=e[s].j;if(a&&0<a.length)for(i=a.length-2;0<=i;i--)for(var r=a.length-1;r>i;r--)a[i].diaID===a[r].diaID&&a[i].coupling===a[r].coupling&&a[i].distance===a[r].distance&&(a[i].assignment=a[i].assignment.concat(a[r].assignment),a.splice(r,1))}for(e.sort((e,t)=>{return e.diaIDs[0]<t.diaIDs[0]?-1:e.diaIDs[0]>t.diaIDs[0]?1:0}),s=e.length-2;0<=s;s--)e[s].diaIDs[0]===e[s+1].diaIDs[0]&&(e[s].nbAtoms+=e[s+1].nbAtoms,e[s].atomIDs=e[s].atomIDs.concat(e[s+1].atomIDs),e.splice(s+1,1));for(s=0;s<e.length;s++){if(a=e[s].j,a)for(i=0;i<a.length;i++)a[i].multiplicity=n[a[i].assignment.length];e[s].multiplicity=t.exports.compilePattern(e[s],o.tolerance)}return e},i.compilePattern=function(e,t=0.05){var o=e.j,s="";if(o&&0<o.length){var a=o[0].assignment?o[0].assignment.length:0;o.sort(function(e,t){return t.coupling-e.coupling});for(var r=0;r<o.length-1;r++)S(o[r].coupling-o[r+1].coupling)<t?a+=o[r+1].assignment?o[r+1].assignment.length:1:(s+=n[a],a=o[r+1].assignment?o[r+1].assignment.length:1);s+=n[a]}else s=e.delta?"s":"m";return s};var n=["s","d","t","q","quint","h","sept","o","n"]},{}],165:[function(e,t){"use strict";t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],166:[function(e,t,i){(function(t,n){"use strict";function o(e,t){var n={seen:[],stylize:a};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&i._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),l(n,e,n.depth)}function s(e,t){var i=o.styles[t];return i?"\x1B["+o.colors[i][0]+"m"+e+"\x1B["+o.colors[i][1]+"m":e}function a(e){return e}function r(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function l(e,t,o){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==i.inspect&&!(t.constructor&&t.constructor.prototype===t)){var s=t.inspect(o,e);return b(s)||(s=l(e,s,o)),s}var a=d(e,t);if(a)return a;var g=Object.keys(t),f=r(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(t)),w(t)&&(0<=g.indexOf("message")||0<=g.indexOf("description")))return u(t);if(0===g.length){if(j(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(_(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return u(t)}var x="",C=!1,v=["{","}"];if(h(t)&&(C=!0,v=["[","]"]),j(t)){var S=t.name?": "+t.name:"";x=" [Function"+S+"]"}if(_(t)&&(x=" "+RegExp.prototype.toString.call(t)),k(t)&&(x=" "+Date.prototype.toUTCString.call(t)),w(t)&&(x=" "+u(t)),0===g.length&&(!C||0==t.length))return v[0]+x+v[1];if(0>o)return _(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var n;return n=C?p(e,t,o,f,g):g.map(function(i){return c(e,t,o,f,i,C)}),e.seen.pop(),m(n,x,v)}function d(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return e.stylize(i,"string")}return f(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,o,s){for(var a=[],r=0,i=t.length;r<i;++r)D(t,r+"")?a.push(c(e,t,n,o,r+"",!0)):a.push("");return s.forEach(function(i){i.match(/^\d+$/)||a.push(c(e,t,n,o,i,!0))}),a}function c(e,t,i,n,o,s){var a,r,d;if(d=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},d.get?d.set?r=e.stylize("[Getter/Setter]","special"):r=e.stylize("[Getter]","special"):d.set&&(r=e.stylize("[Setter]","special")),D(n,o)||(a="["+o+"]"),r||(0>e.seen.indexOf(d.value)?(r=y(i)?l(e,d.value,null):l(e,d.value,i-1),-1<r.indexOf("\n")&&(s?r=r.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):r="\n"+r.split("\n").map(function(e){return"   "+e}).join("\n"))):r=e.stylize("[Circular]","special")),x(a)){if(s&&o.match(/^\d+$/))return r;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+r}function m(e,t,i){var n=0,o=e.reduce(function(e,t){return n++,0<=t.indexOf("\n")&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return 60<o?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function f(e){return"number"==typeof e}function b(e){return"string"==typeof e}function x(e){return void 0===e}function _(e){return C(e)&&"[object RegExp]"===v(e)}function C(e){return"object"==typeof e&&null!==e}function k(e){return C(e)&&"[object Date]"===v(e)}function w(t){return C(t)&&("[object Error]"===v(t)||t instanceof Error)}function j(e){return"function"==typeof e}function v(e){return Object.prototype.toString.call(e)}function S(e){return 10>e?"0"+e.toString(10):e.toString(10)}function E(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var H=/%[sdj%]/g;i.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,s=i.length,a=(e+"").replace(H,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return i[n++]+"";case"%d":return+i[n++];case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e;}}),r=i[n];n<s;r=i[++n])a+=y(r)||!C(r)?" "+r:" "+o(r);return a},i.deprecate=function(e,o){if(x(n.process))return function(){return i.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var s=!1;return function(){if(!s){if(t.throwDeprecation)throw new Error(o);else t.traceDeprecation?console.trace(o):console.error(o);s=!0}return e.apply(this,arguments)}};var P={},I;i.debuglog=function(e){if(x(I)&&(I=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var n=t.pid;P[e]=function(){var t=i.format.apply(i,arguments);console.error("%s %d: %s",e,n,t)}}else P[e]=function(){};return P[e]},i.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=h,i.isBoolean=g,i.isNull=y,i.isNullOrUndefined=function(e){return null==e},i.isNumber=f,i.isString=b,i.isSymbol=function(e){return"symbol"==typeof e},i.isUndefined=x,i.isRegExp=_,i.isObject=C,i.isDate=k,i.isError=w,i.isFunction=j,i.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e},i.isBuffer=e("./support/isBuffer");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",E(),i.format.apply(i,arguments))},i.inherits=e("inherits"),i._extend=function(e,t){if(!t||!C(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./support/isBuffer":165,_process:138,inherits:13}],167:[function(e,t){"use strict";function n(e,t){var n=t.jpath;if(!n)throw new Error("createFromJpath: undefined jpath argument");for(var o=0;o<n.length;o++)void 0===e[n[o]]&&(o===n.length-1?e[n[o]]=t.getEmpty():e[n[o]]={}),e=e[n[o]];return 0===n.length&&(e=Object.assign(e,t.getEmpty())),e}function i(e,t){if(e){var n=t.jpath;if(!n)throw new Error("getFromJpath: undefined jpath argument");for(var o=0;o<n.length;o++){if(void 0===e[n[o]])return;e=e[n[o]]}return e}}function o(e){switch(e.encoding){case"base64":return atob(e.content);default:return e.content;}}var s=e("./types"),a=e("./util/defaults"),r=e("./types/common");t.exports={util:r,process:function(e,i,a,r){var l=a.filename,d=o(a),u=s.getType(e),p=n(i,u),c=u.find(p,l),m=u.getProperty(l,a);if(void 0===m)throw new Error(`Could not get property of ${l} (type ${e}`);var h=u.process(l,d);return h[m]={filename:t.exports.getFilename(e,a.filename)},c?Object.assign(c,h,r):(Object.assign(h,r),p.push(h)),i},getType:function(e,t,n){var o=s.getType(e,n);return i(t,o)},getFilename(e,t){var i=/[^/]*$/.exec(t);i&&(t=i[0]);var n=s.getType(e),o=n.jpath;if(!o)throw new Error("No such type or no jpath");return o.concat(t).join("/")},getEmpty(e,t){var o=s.getAllTypes(e);t||(t={});for(var a=0;a<o.length;a++)n(t,o[a]);return t},defaults(e,i){var n=t.exports.getEmpty(e);return a(!0,i,n),i}}},{"./types":168,"./types/common":169,"./util/defaults":188}],168:[function(e,t){"use strict";var i={types:{common:e("./types/common.js"),default:e("./types/default.js"),nmr:e("./types/nmr.js"),reaction:{general:e("./types/reaction/general.js")},sample:{chromatogram:e("./types/sample/chromatogram.js"),differentialScanningCalorimetry:e("./types/sample/differentialScanningCalorimetry.js"),elementAnalysis:e("./types/sample/elementAnalysis.js"),genbank:e("./types/sample/genbank.js"),general:e("./types/sample/general.js"),image:e("./types/sample/image.js"),ir:e("./types/sample/ir.js"),iv:e("./types/sample/iv.js"),mass:e("./types/sample/mass.js"),nmr:e("./types/sample/nmr.js"),physical:e("./types/sample/physical.js"),raman:e("./types/sample/raman.js"),thermogravimetricAnalysis:e("./types/sample/thermogravimetricAnalysis.js"),uv:e("./types/sample/uv.js"),xray:e("./types/sample/xray.js")}}};t.exports={getType(e,t,n){if(!t){for(t in i.types)if(i.types[t][e])return Object.assign({},i.types.default,i.types[t].default,i.types[t][e],n);}else if(i.types[t][e])return Object.assign({},i.types.default,i.types[t].default,i.types[t][e],n);return Object.assign({},i.types.default)},getAllTypes(e,n){var o=[];for(var s in i.types[e])"default"!=s&&o.push(t.exports.getType(s,e,n));return o}}},{"./types/common.js":169,"./types/default.js":170,"./types/nmr.js":171,"./types/reaction/general.js":172,"./types/sample/chromatogram.js":173,"./types/sample/differentialScanningCalorimetry.js":174,"./types/sample/elementAnalysis.js":175,"./types/sample/genbank.js":176,"./types/sample/general.js":177,"./types/sample/image.js":178,"./types/sample/ir.js":179,"./types/sample/iv.js":180,"./types/sample/mass.js":181,"./types/sample/nmr.js":182,"./types/sample/physical.js":183,"./types/sample/raman.js":184,"./types/sample/thermogravimetricAnalysis.js":185,"./types/sample/uv.js":186,"./types/sample/xray.js":187}],169:[function(e,t){"use strict";var i=t.exports={};i.getBasename=function(e){var t=e.replace(/.*\//,"");return t.replace(/\.[0-9]+$/,"")},i.getExtension=function(e){var t=i.getBasename(e);return t.replace(/.*\./,"").toLowerCase()},i.getFilename=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)if(e[t[n]]&&e[t[n]].filename)return e[t[n]].filename},i.basenameFind=function(e,t){var n=i.getBasename(t);return e.find((e)=>{return i.getBasename(i.getFilename(e))===n})},i.getTargetProperty=function(e){switch(i.getExtension(e)){case"jdx":case"dx":case"jcamp":return"jcamp";case"png":case"jpg":case"jpeg":case"tif":case"tiff":case"svg":return"image";case"cif":return"cif";case"pdb":return"pdb";case"xml":return"xml";case"cdf":case"nc":case"netcdf":return"cdf";case"pdf":return"pdf";case"txt":case"text":case"csv":case"tsv":return"text";case"gbk":case"gb":return"genbank";default:return"file";}}},{}],170:[function(e,t){"use strict";t.exports={process(){return{}},getEmpty(){return[]}}},{}],171:[function(e,t,i){"use strict";var n=e("nmr-metadata");i.getMetadata=n.parseJcamp,i.getSpectrumType=n.getSpectrumType,i.getNucleusFrom2DExperiment=n.getNucleusFrom2DExperiment},{"nmr-metadata":114}],172:[function(e,t){"use strict";t.exports={jpath:[],getEmpty(){return{code:"",date:Date.now(),procedure:"",products:[],reagents:[],conditions:"",keywords:[],remarks:"",title:"",reactionRXN:"$RXN\n\n\n\n  0  0\n"}}}},{}],173:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","chromatogram"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],174:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","differentialScanningCalorimetry"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],175:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","elementalAnalysis"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],176:[function(e,t){"use strict";var i=e("genbank-parser"),n=e("../common");t.exports={find(e,t){var i=n.getBasename(t);return e.find((e)=>{return n.getBasename(n.getFilename(e))===i})},getProperty(e){return n.getTargetProperty(e)},process(e,t){var n=i(t),o;return o={seq:n.map((e)=>e.parsedSequence)},o},jpath:["biology","nucleic"]}},{"../common":169,"genbank-parser":6}],177:[function(e,t){"use strict";t.exports={jpath:["general"],getEmpty(){return{description:"",title:"",name:[],mf:"",molfile:"",mw:0,keyword:[],sequence:"",kind:""}}}},{}],178:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["image"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],179:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","ir"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],180:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","iv"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],181:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","mass"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],182:[function(e,t){"use strict";function i(e){if("undefined"!=typeof e){var t=s.getBasename(e);return t=t.replace(r,"$1"),n.test(e)&&(t=t.replace(o,"")),t}}var n=/[^a-z]fid[^a-z]/i,o=/[^a-z]fid[^a-z]?/i,s=e("../common"),a=e("../nmr");t.exports={find(e,t){var n=i(t);return e.find((e)=>{return i(s.getFilename(e))===n})},getProperty(e){var t=s.getExtension(e);return("jdx"===t||"dx"===t||"jcamp"===t)&&n.test(e)?"jcampFID":s.getTargetProperty(e)},process(e,t){var i=s.getExtension(e),n={};return("jdx"===i||"dx"===i||"jcamp"===i)&&(n=a.getMetadata(t)),n},jpath:["spectra","nmr"]};var r=/(.*)\.(.*)/},{"../common":169,"../nmr":171}],183:[function(e,t){"use strict";t.exports={jpath:["physical"],getEmpty(){return{}}}},{}],184:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","raman"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],185:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","thermogravimetricAnalysis"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],186:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","uv"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],187:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","xray"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":169}],188:[function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t=i.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!o)return!1;for(var s in e);return"undefined"==typeof s||i.call(e,s)};t.exports=function e(){var t=arguments[0],n=1,i=arguments.length,a=!1,r,l,d,u,p,c;for("boolean"==typeof t?(a=t,t=arguments[1]||{},n=2):("object"!=typeof t&&"function"!=typeof t||null==t)&&(t={});n<i;++n)if(r=arguments[n],null!=r)for(l in r)d=t[l],u=r[l],t!==u&&(a&&u&&(s(u)||(p=o(u)))?(p?(p=!1,c=d&&o(d)?d:[]):c=d&&s(d)?d:{},"undefined"==typeof t[l]?t[l]=e(a,c,u):e(a,c,u)):"undefined"!=typeof u&&"undefined"==typeof t[l]&&(t[l]=u));return t}},{}]},{},[167])(167)});

